(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}};e.d({},{Z:()=>I});var t={};e.r(t),e.d(t,{apiFetch:()=>o.apiFetch,beforeDeleteRecord:()=>u,setPartialRecords:()=>c,setRecord:()=>i,setRecordOverview:()=>d,setRecords:()=>a,setSchema:()=>s,setTabContent:()=>l});var r={};e.r(r),e.d(r,{getQuerySummary:()=>m,getQueryTotal:()=>g,getRecord:()=>O,getRecordIDs:()=>w,getRecordOverview:()=>D,getRecords:()=>S,getSchema:()=>T,getTabContent:()=>_});const n=window.wp.data,o=window.wp.dataControls;var c=function(e,t){return{type:"SET_PARTIAL_RECORDS",records:e,queryString:t}},a=function(e,t){return{type:"SET_RECORDS",records:e,queryString:t}},i=function(e){return{type:"SET_RECORD",record:e}},s=function(e){return{type:"SET_SCHEMA",schema:e}},u=function(e){return{type:"BEFORE_DELETE_RECORD",id:e}},l=function(e,t,r){return{type:"SET_TAB_CONTENT",id:e,tab_id:t,content:r}},d=function(e,t){return{type:"SET_RECORD_OVERVIEW",id:e,overview:t}},f=function(e,t){var r,n,o,c,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return c={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function i(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function p(e,t){return{createRecord:function(r,n){var c,a;return f(this,(function(s){switch(s.label){case 0:return c="".concat(e,"/v1/").concat(t),[4,(0,o.apiFetch)({path:c,method:"POST",data:r})];case 1:return(a=s.sent())?[4,n.invalidateResolutionForStoreSelector("getRecords")]:[3,6];case 2:return s.sent(),[4,n.invalidateResolution("getRecord",[a.id])];case 3:return s.sent(),[4,n.startResolution("getRecord",[a.id])];case 4:return s.sent(),[4,n.finishResolution("getRecord",[a.id])];case 5:return s.sent(),[2,i(a)];case 6:return[2]}}))},updateRecord:function(r,n,c){var a,i;return f(this,(function(s){switch(s.label){case 0:return a="".concat(e,"/v1/").concat(t,"/").concat(r),[4,(0,o.apiFetch)({path:a,method:"PUT",data:n})];case 1:return(i=s.sent())?[4,c.startResolution("getRecord",[i.id])]:[3,4];case 2:return s.sent(),[4,c.finishResolution("getRecord",[i.id])];case 3:return s.sent(),[2,c.setRecord(i)];case 4:return[2]}}))},deleteRecord:function(r,n){var c;return f(this,(function(a){switch(a.label){case 0:return[4,n.beforeDeleteRecord(r)];case 1:return a.sent(),c="".concat(e,"/v1/").concat(t,"/").concat(r),[4,(0,o.apiFetch)({path:c,method:"DELETE"})];case 2:return a.sent(),[4,n.invalidateResolution("getRecord",[r])];case 3:return a.sent(),[2,{type:"DELETE_RECORD",id:r}]}}))},deleteRecords:function(r,n){var c;return f(this,(function(a){switch(a.label){case 0:return c="".concat(e,"/v1/").concat(t).concat(r),[4,(0,o.apiFetch)({path:c,method:"DELETE"})];case 1:return a.sent(),[4,n.emptyCache(n)];case 2:return a.sent(),[2,{type:"DELETE_RECORDS"}]}}))},emptyCache:function(e){return f(this,(function(t){switch(t.label){case 0:return[4,e.invalidateResolutionForStoreSelector("getRecords")];case 1:return t.sent(),[4,e.invalidateResolutionForStoreSelector("getRecord")];case 2:return t.sent(),[4,e.invalidateResolutionForStoreSelector("getRecordOverview")];case 3:return t.sent(),[4,e.invalidateResolutionForStoreSelector("getTabContent")];case 4:return t.sent(),[2]}}))}}}I("my-namespace","my-collection");var v=function(){return v=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},v.apply(this,arguments)},h=function(e,t){var r,n,o,c,a,i=""===t.queryString?"all":t.queryString;switch(t.type){case"SET_SCHEMA":return v(v({},e),{schema:t.schema});case"SET_PARTIAL_RECORDS":return v(v({},e),{partialRecords:v(v({},e.partialRecords),(r={},r[i]=t.records,r))});case"SET_RECORDS":var s=v({},e.records),u=[],l=t.records.summary,d=t.records.total;return t.records.items.forEach((function(e){s[e.id]=e,u.push(e.id)})),v(v({},e),{records:s,recordIDs:v(v({},e.recordIDs),(n={},n[i]={items:u,summary:l,total:d},n))});case"SET_RECORD":return v(v({},e),{records:v(v({},e.records),(o={},o[t.record.id]=t.record,o))});case"BEFORE_DELETE_RECORD":var f=v({},e.recordIDs);return Object.keys(f).forEach((function(e){var r=f[e].items.indexOf(t.id);-1!==r&&(f[e].items.splice(r,1),f[e].total-=1)})),v(v({},e),{recordIDs:f});case"DELETE_RECORD":var p=v({},e.records);return delete p[t.id],v(v({},e),{records:p});case"DELETE_RECORDS":return v(v({},e),{records:{},recordIDs:{},tabContent:{},recordOverview:{},partialRecords:{}});case"SET_TAB_CONTENT":return v(v({},e),{tabContent:v(v({},e.tabContent),(c={},c["".concat(t.id,"_").concat(t.tab_id)]=t.content,c))});case"SET_RECORD_OVERVIEW":return v(v({},e),{recordOverview:v(v({},e.recordOverview),(a={},a[t.id]=t.overview,a))})}return e};const R=window.wp.url;var y=function(e,t){var r,n,o,c,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return c={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function i(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,i[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};function b(e,t){return{getRecords:function(r){var i,s,u,l,d;return y(this,(function(f){switch(f.label){case 0:return i="".concat(e,"/v1/").concat(t).concat(r),s=(0,R.getQueryArg)(r,"__fields"),[4,(0,o.apiFetch)({path:i})];case 1:return(u=f.sent())?s?[2,c(u.items,r)]:(l="".concat(e,"/").concat(t),d=u.items.map((function(e){return[e.id]})),[4,n.controls.dispatch(l,"startResolutions","getRecord",d)]):[3,4];case 2:return f.sent(),[4,n.controls.dispatch(l,"finishResolutions","getRecord",d)];case 3:return f.sent(),[2,a(u,r)];case 4:return[2,a([],r)]}}))},getRecord:function(r){var n,c;return y(this,(function(a){switch(a.label){case 0:return n="".concat(e,"/v1/").concat(t,"/").concat(r),[4,(0,o.apiFetch)({path:n})];case 1:return c=a.sent(),[2,i(c)]}}))},getSchema:function(){var r,n;return y(this,(function(c){switch(c.label){case 0:return r="".concat(e,"/v1/").concat(t,"/collection_schema"),[4,(0,o.apiFetch)({path:r})];case 1:return n=c.sent(),[2,s(n)]}}))},getTabContent:function(r,n){var c,a;return y(this,(function(i){switch(i.label){case 0:return c="".concat(e,"/v1/").concat(t,"/").concat(r,"/").concat(n),[4,(0,o.apiFetch)({path:c})];case 1:return a=i.sent(),[2,l(r,n,a)]}}))},getRecordOverview:function(r){var n,c;return y(this,(function(a){switch(a.label){case 0:return n="".concat(e,"/v1/").concat(t,"/").concat(r,"/overview"),[4,(0,o.apiFetch)({path:n})];case 1:return c=a.sent(),[2,d(r,c)]}}))}}}var E={recordIDs:{},records:{},partialRecords:{},schema:{schema:[],hidden:[],ignore:[],routes:{},labels:{},id_prop:"id",tabs:{}},tabContent:{},recordOverview:{}},w=function(e,t){var r;return t=""===t?"all":t,Array.isArray(null===(r=e.recordIDs[t])||void 0===r?void 0:r.items)?e.recordIDs[t].items:[]},g=function(e,t){var r;return t=""===t?"all":t,(null===(r=e.recordIDs[t])||void 0===r?void 0:r.total)||0},m=function(e,t){var r;return t=""===t?"all":t,(null===(r=e.recordIDs[t])||void 0===r?void 0:r.summary)||{}},S=function(e,t){var r,n,o;return t=""===t?"all":t,(0,R.getQueryArg)(t,"__fields")?Array.isArray(null===(r=e.partialRecords[t])||void 0===r?void 0:r.items)?null===(n=e.partialRecords[t])||void 0===n?void 0:n.items:[]:Array.isArray(null===(o=e.recordIDs[t])||void 0===o?void 0:o.items)?e.recordIDs[t].items.map((function(t){return e.records[t]})):[]},O=function(e,t){return e.records[t]||null},T=function(e){return e.schema||E.schema},_=function(e,t,r){return e.tabContent["".concat(t,"_").concat(r)]||{}},D=function(e,t){return e.recordOverview[t]||[]};window.wp.element;var C=function(){return C=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},C.apply(this,arguments)},F={};function I(e,c){var a="".concat(e,"/").concat(c);return F[a]||(F[a]=(0,n.createReduxStore)(a,{reducer:h,actions:C(C({},t),p(e,c)),selectors:C({},r),controls:C(C({},o.controls),n.controls),resolvers:b(e,c),initialState:C({},E)}),(0,n.register)(F[a])),F[a]}})();