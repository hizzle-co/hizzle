# History

This package contains history utilities for the HizzleWP framework.

Usage example:

```tsx
import { Router, Outlet, updatePath, useQuery, onQueryChange } from '@hizzlewp/history';
import { Button } from '@wordpress/components';

/**
 * Display the home page.
 */
const Home = () => <div>Home Page</div>;

/**
 * Display the user's page layoute.
 */
const UserLayout = () => (
    <div>
        <h1>User's Page</h1>
        <Outlet path="/users" />
    </div>
);

/**
 * Display the user list.
 */
const UserList = () => {
    // Get the query parameters.
    const {page} = useQuery();

    // Get the users. You can use any data source you want.
    const users = useUsers({page });

    // Move to the next page.
    const onChangePage = onQueryChange('page');

    return (
        <div>
            <div>User List</div>
            {users.map((user) => (
                <Button key={user.id} onClick={() => updatePath(`/users/${user.id}`)}>
                    {user.name}
                </Button>
            ))}
            <Button onClick={() => onChangePage(page + 1)}>Next Page</Button>
        </div>
    );
};

/**
 * Display a user's detail.
 */
const UserDetail = () => {
    const { params } = useRoute();
    return <div>User Detail {params.get('id')}</div>;
};

// Define routes
const routes = [
  {
    path: '/',
    element: <Home />,
  },
  {
    path: '/users',
    element: <UserLayout />,
    children: [
      {
        path: '/users/:id',
        element: <UserDetail />,
      }
    ],
    index: <UserList />,
  },
];

// Use in app
const App = () => (
  <Router routes={routes}>
    <nav>
      <Button onClick={() => updatePath('/')}>Home</Button>
      <Button onClick={() => updatePath('/users')}>Users</Button>
    </nav>
    <Outlet />
  </Router>
);
```

<!-- START TOKEN(Autogenerated API docs) -->

## addHistoryListener

Adds a listener that runs on history change.

_Parameters_

-   _listener_ `Function`: Listener to run on history change.

_Returns_

-   `Function`: Function to remove listeners.

## getHistory

Recreate `history` to coerce React Router into accepting path arguments found in query parameter `hizzlewp_path`, allowing a url hash to be avoided. Since hash portions of the url are not sent server side, full route information can be detected by the server.

_Returns_

-   `History`: React-router history object with `get location` modified.

## getNewPath

Return a URL with set query parameters.

_Parameters_

-   _query_ `Object`: object of params to be updated.
-   _path_ `string`: Relative path (defaults to current path).

_Returns_

-   `string`: Updated URL merging query params into existing params.

## getPath

Get the current path from history.

_Returns_

-   `string`: Current path.

## getQuery

Get the current query string, parsed into an object, from history.

_Returns_

-   `Record<string, QueryArgParsed>`: Current query object, defaults to empty object.

## goToParent

Navigates to the parent path.

## navigateTo

A utility function that navigates to a page.

_Parameters_

-   _args_ `Object`: - All arguments.
-   _args.url_ `string`: - Relative path or absolute url to navigate to

## onQueryChange

This function returns an event handler for the given `param`

_Parameters_

-   _param_ `string`: The parameter in the querystring which should be updated (ex `paged`, `per_page`)
-   _path_ `string`: Relative path (defaults to current path).
-   _query_ `string`: object of current query params (defaults to current querystring).

_Returns_

-   `Function`: A callback which will update `param` to the passed value when called.

## Outlet

The outlet component

_Type_

-   `React.FC< { path?: string; } >`

## Router

Router component

_Type_

-   `React.FC< RouterProps >`

## updatePath

Updates the path of the current page.

_Parameters_

-   _path_ `string`: Relative path (defaults to current path).

## updateQueryString

Updates the query parameters of the current page.

_Parameters_

-   _query_ `Object`: object of params to be updated.
-   _path_ `string`: Relative path (defaults to current path).
-   _currentQuery_ `Object`: object of current query params (defaults to current querystring).

## usePath

A hook that returns the current path.

_Returns_

-   `string`: The current path.

## useQuery

Like getQuery but in useHook format for easy usage in React functional components

_Returns_

-   `Record<string, string>`: Current query object, defaults to empty object.

## useRoute

Undocumented declaration.


<!-- END TOKEN(Autogenerated API docs) -->
