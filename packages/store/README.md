# Store

This package contains store utilities for the HizzleWP framework.

### Installation

```bash
npm install @hizzlewp/store
composer require hizzle/store
```

### Usage

```tsx
import { useCollectionRecords } from '@hizzlewp/store';

// In your component, use the useRecords hook to get the records.
export ListRecords = ( {per_page} ) => {
    const { data, total, summary, isResolving, hasResolutionFailed, getResolutionError } = useCollectionRecords( 'noptin', 'subscribers', { per_page } );

    // Check if the records are still loading.
    if ( isResolving() ) {
        return <div>Loading...</div>;
    }

    // Check if the records failed to load.
    if ( hasResolutionFailed() ) {
        return <div>Error: { getResolutionError() }</div>;
    }

    // Render the records.
    return (
        <div>
            <ul>
                { data.map( ( record ) => <li key={ record.id }>{ record.email }</li> ) }
            </ul>
            <p>Total: { total }</p>
            <p>Summary: { summary }</p>
        </div>
    );
}
```

### API

## Collection Provider

The `CollectionProvider` component is used to provide the collection context to the component tree.

```tsx
import { CollectionProvider } from '@hizzlewp/store';

<CollectionProvider namespace="noptin" collection="subscribers" recordId={ 123 }>
    <SubscriberDetails />
</CollectionProvider>
```

recordId is optional. If provided, the component will be rendered with the record context.

<!-- START TOKEN(Autogenerated collection provider|src/collection-provider.tsx) -->

<!-- END TOKEN(Autogenerated collection provider|src/collection-provider.tsx) -->

## Actions

The following set of dispatching action creators are available on the object returned by `wp.data.dispatch( 'hizzlewp/store' )`:

<!-- START TOKEN(Autogenerated actions|src/actions.ts) -->

<!-- END TOKEN(Autogenerated actions|src/actions.ts) -->

## Selectors

The following set of selectors are available on the object returned by `wp.data.select( 'hizzlewp/store' )`:

<!-- START TOKEN(Autogenerated selectors|src/selectors.ts) -->

<!-- END TOKEN(Autogenerated selectors|src/selectors.ts) -->

## Hooks

The following set of react hooks are available to import from the `@hizzlewp/store` package:

<!-- START TOKEN(Autogenerated hooks|src/hooks/index.ts) -->

<!-- END TOKEN(Autogenerated hooks|src/hooks/index.ts) -->
