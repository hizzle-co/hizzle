(()=>{"use strict";var e,t={280:(e,t,n)=>{const s=window.wp.domReady;var i=n.n(s);const a=window.wp.element,r=window.wp.components,o=window.React,c=window.hizzlewp.interface,l=window.wp.data,d=window.wp.notices,p=window.ReactJSXRuntime;function u(){const{notices:e}=(0,l.useSelect)((e=>({notices:e(d.store).getNotices()})),[]),{removeNotice:t}=(0,l.useDispatch)(d.store),n=e.filter((({isDismissible:e,type:t})=>e&&"default"===t)),s=e.filter((({isDismissible:e,type:t})=>!e&&"default"===t));return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(r.NoticeList,{notices:s,className:"components-editor-notices__pinned"}),(0,p.jsx)(r.NoticeList,{notices:n,className:"components-editor-notices__dismissible",onRemove:t})]})}function h(){const e=(0,l.useSelect)((e=>e(d.store).getNotices()),[]),{removeNotice:t}=(0,l.useDispatch)(d.store),n=e.filter((({type:e})=>"snackbar"===e)).slice(-3);return(0,p.jsx)(r.SnackbarList,{notices:n,className:"components-editor-notices__snackbar",onRemove:t})}const m=window.hizzlewp.components,x=window.hizzlewp.history,g=window.wp.compose,_=window.wp.apiFetch;var j=n.n(_);const b=window.wp.i18n,v=(0,o.createContext)({option_name:"",saved:{},settings:[],isSaving:!1,setAttributes:()=>{},save:()=>{}}),f=()=>(0,o.useContext)(v),w=({settings:e,option_name:t,saved:n,children:s})=>{const[i,a]=(0,o.useState)(n),[r,c]=(0,o.useState)(!1),u=(0,o.useRef)(!1),{createSuccessNotice:h,createErrorNotice:m}=(0,l.useDispatch)(d.store),x=(0,o.useMemo)((()=>Object.keys(e).map((t=>{const n=e[t],s=Object.keys(n.sub_sections)[0],i=[];return Object.keys(n.sub_sections).map((e=>{const s=n.sub_sections[e];i.push({name:e,title:s.label,settings:s.settings,path:`/${t}/${e}`})})),{name:t,title:n.label,path:`/${t}/${s}`,sections:i}}))),[e]);(0,o.useEffect)((()=>{const e=e=>{if(u.current)return e.returnValue=(0,b.__)("You have unsaved changes. If you proceed, they will be lost."),e.returnValue};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}}),[u.current]);const g=(0,o.useCallback)((()=>{c(!0),u.current=!1,j()({path:"/wp/v2/settings",method:"POST",data:{[t]:{...i}}}).then((e=>(h((0,b.__)("Settings saved."),{type:"snackbar"}),"object"==typeof e&&null!==e&&t in e&&a(e[t]),e))).catch((e=>{e.message?m(e.message):m((0,b.__)("An error occurred while saving."))})).finally((()=>{c(!1)}))}),[i,a,c,h,m,t]),_=(0,o.useCallback)((e=>{u.current=!0,a({...i,...e})}),[i,a]),f=(0,o.useMemo)((()=>({option_name:t,saved:i,settings:x,isSaving:r,save:g,setAttributes:_})),[t,i,x,r,g,_]),w=(0,o.useMemo)((()=>({opacity:r?.5:1,pointerEvents:r?"none":"auto",cursor:r?"wait":"auto"})),[r]);return(0,p.jsx)(v.Provider,{value:f,children:(0,p.jsx)("div",{style:w,children:s})})};function y(e){var t,n,s="";if("string"==typeof e||"number"==typeof e)s+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=y(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}const S=function(){for(var e,t,n=0,s="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=y(e))&&(s&&(s+=" "),s+=t);return s};function k({id:e,heading:t,description:n,help_url:s,badges:i,className:a,settings:c,cardProps:l}){const[d,u]=(0,o.useState)(!1),{saved:h}=f();let x=null;i.forEach((e=>{Array.isArray(e.conditions)&&!(0,m.checkConditions)(e.conditions,h)||(x=(0,p.jsx)(r.__experimentalText,{...e.props,children:e.text}))}));const g=()=>s?(0,p.jsx)(r.Button,{href:s,target:"_blank",icon:"info",label:"Learn more",showTooltip:!0}):n?(0,p.jsx)(r.Icon,{icon:"info",style:{color:"#454545"}}):null;return(0,p.jsxs)(r.Card,{id:e,size:"small",className:S(a,"noptin-no-shadow"),borderBottom:!0,borderLeft:!0,borderRight:!0,borderTop:!0,...l||{},children:[(0,p.jsx)(r.CardHeader,{style:{padding:0},children:(0,p.jsxs)(r.Flex,{as:r.Button,onClick:()=>u(!d),style:{paddingLeft:16,paddingRight:16,height:48},label:n,showTooltip:!0,children:[(0,p.jsxs)(r.__experimentalHStack,{as:r.FlexBlock,children:[(0,p.jsx)(r.__experimentalText,{as:"h3",weight:600,children:t}),(0,p.jsx)(g,{})]}),(0,p.jsx)(r.FlexItem,{children:(0,p.jsxs)(r.__experimentalHStack,{children:[x,(0,p.jsx)(r.Icon,{icon:d?"arrow-up-alt2":"arrow-down-alt2"})]})})]})}),d&&(0,p.jsx)(r.CardBody,{children:(0,p.jsxs)(r.__experimentalVStack,{spacing:6,children:[(0,p.jsx)(P,{settings:c}),s&&(0,p.jsx)(r.__experimentalHStack,{alignment:"flex-end",justify:"flex-end",children:(0,p.jsxs)(r.Button,{href:s,target:"_blank",label:"Need help?",variant:"secondary",showTooltip:!0,children:[(0,p.jsx)(r.__experimentalText,{children:"View integration guide"}),(0,p.jsx)(r.Icon,{icon:"external"})]})})]})})]})}function z({id:e,label:t,className:n,settings:s,conditions:i,cardProps:a}){const{saved:o}=f();return Array.isArray(i)&&!(0,m.checkConditions)(i,o)?null:(0,p.jsxs)(r.Card,{id:e,isRounded:!1,className:S("hizzlewp-settings__group",n),...a||{},children:[(0,p.jsx)(r.CardHeader,{children:(0,p.jsx)(r.__experimentalHeading,{level:4,size:16,children:t})}),(0,p.jsx)(r.CardBody,{children:(0,p.jsx)(P,{settings:s})})]})}const N=()=>{const e=(0,g.useViewportMatch)("small","<"),{settings:t}=f(),{params:n,location:s,goTo:i}=(0,r.__experimentalUseNavigator)(),a=(0,x.usePath)();(0,o.useEffect)((()=>{a!==s.path&&i(a)}),[a,s.path]);const{tab:c,section:l}=(0,o.useMemo)((()=>{if(!n.tab)return{tab:t[0].name,section:t[0].sections[0].name};const e=t.find((e=>e.name===n.tab));if(!e)return{tab:t[0].name,section:t[0].sections[0].name};if(!n.section)return{tab:e.name,section:e.sections[0].name};const s=e.sections.find((e=>e.name===n.section));return s?{tab:e.name,section:s.name}:{tab:e.name,section:e.sections[0].name}}),[n.tab,n.section,t]),d=(0,o.useMemo)((()=>t.find((e=>e.name===c))),[c,t]);return(0,p.jsx)("div",{children:(0,p.jsxs)(r.__experimentalVStack,{spacing:4,"data-current-path":s.path,style:{maxWidth:620,padding:20},children:[1<t.length&&(0,p.jsx)(r.__experimentalSurface,{className:"hizzlewp-settings__tabs",orientation:e?"vertical":"horizontal",onNavigate:e=>(0,x.updatePath)(t[e].path),as:r.NavigableMenu,borderBottom:!0,borderTop:!0,borderLeft:!0,borderRight:!0,children:t.map((e=>(0,p.jsx)(r.Button,{onClick:()=>(0,x.updatePath)(e.path),className:"components-tab-panel__tabs-item "+(c===e.name?"is-active":""),"aria-selected":c===e.name,children:e.title},e.path)))}),d&&(0,p.jsx)(C,{...d,currentTab:c,currentSection:l})]},a)})},C=({name:e,sections:t,currentTab:n,currentSection:s})=>{const{location:i}=(0,r.__experimentalUseNavigator)(),a=(0,o.useMemo)((()=>t.find((e=>e.name===s))),[n,s]);return(0,p.jsxs)(m.ErrorBoundary,{children:[1<t.length&&(0,p.jsx)(r.NavigableMenu,{className:`hizzlewp-settings__sections-menu hizzlewp-settings__sections-menu--${e}`,orientation:"horizontal",onNavigate:e=>(0,x.updatePath)(t[e].path),children:t.map((e=>(0,p.jsx)(r.Button,{onClick:()=>(0,x.updatePath)(e.path),variant:"tertiary",isPressed:i.path===e.path,children:e.title},e.path)))}),a&&(0,p.jsx)(P,{settings:a.settings})]})},P=({settings:e})=>(0,p.jsx)(r.__experimentalVStack,{spacing:4,children:Object.keys(e).map((t=>(0,p.jsx)(m.ErrorBoundary,{children:(0,p.jsx)(B,{settingKey:t,setting:e[t]})},t)))}),B=({setting:e,settingKey:t})=>{const{saved:n,setAttributes:s}=f();return"integration_panel"===e.el?(0,p.jsx)(k,{...e}):"settings_group"===e.el?(0,p.jsx)(z,{...e}):(0,p.jsx)(m.Setting,{settingKey:t,setting:e,saved:n,setAttributes:s})},O=()=>(0,p.jsx)(m.ErrorBoundary,{children:(0,p.jsxs)(r.__experimentalNavigatorProvider,{initialPath:(0,x.getPath)(),children:[(0,p.jsx)(r.__experimentalNavigatorScreen,{path:"/",children:(0,p.jsx)(N,{})}),(0,p.jsx)(r.__experimentalNavigatorScreen,{path:"/:tab",children:(0,p.jsx)(N,{})}),(0,p.jsx)(r.__experimentalNavigatorScreen,{path:"/:tab/:section",children:(0,p.jsx)(N,{})})]})}),T=()=>{const{save:e,isSaving:t}=f();return{variant:"primary",text:t?(0,b.__)("Saving...","newsletter-optin-box"):(0,b.__)("Save Settings","newsletter-optin-box"),onClick:e,isBusy:t,disabled:t}},E=e=>(0,p.jsx)(c.Header,{...e,actions:[T()]}),R=(0,p.jsxs)(r.__experimentalVStack,{children:[(0,p.jsx)(O,{}),(0,p.jsx)(h,{}),(0,p.jsx)(u,{})]}),A=()=>(0,p.jsx)(c.Footer,{children:(0,p.jsx)(r.Button,{...T()})});function M(e){return(0,p.jsx)(c.Interface,{className:"hizzlewp-settings__interface",header:(0,p.jsx)(E,{...e}),content:R,footer:(0,p.jsx)(A,{})})}const{option_name:L,saved:V,settings:F,...H}=window.hizzleWPSettings?.data||{};i()((()=>{const e=document.getElementById("hizzlewp-settings__app");if(!e||!F)return;const t=()=>(0,p.jsx)(r.SlotFillProvider,{children:(0,p.jsx)(w,{option_name:L||"hizzlewp_settings",settings:F||{},saved:V||{},children:(0,p.jsx)(M,{...H})})});(0,a.createRoot)(e).render((0,p.jsx)(t,{}))}))}},n={};function s(e){var i=n[e];if(void 0!==i)return i.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,s),a.exports}s.m=t,e=[],s.O=(t,n,i,a)=>{if(!n){var r=1/0;for(d=0;d<e.length;d++){for(var[n,i,a]=e[d],o=!0,c=0;c<n.length;c++)(!1&a||r>=a)&&Object.keys(s.O).every((e=>s.O[e](n[c])))?n.splice(c--,1):(o=!1,a<r&&(r=a));if(o){e.splice(d--,1);var l=i();void 0!==l&&(t=l)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,i,a]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={472:0,748:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var i,a,[r,o,c]=n,l=0;if(r.some((t=>0!==e[t]))){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(c)var d=c(s)}for(t&&t(n);l<r.length;l++)a=r[l],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(d)},n=globalThis.webpackChunkhizzlewp=globalThis.webpackChunkhizzlewp||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=s.O(void 0,[748],(()=>s(280)));i=s.O(i)})();