(()=>{"use strict";var e,t={28:(e,t,n)=>{const r=window.wp.domReady;var s=n.n(r);const i=window.wp.element,a=window.wp.components,o=window.wp.keyboardShortcuts,l=window.wp.data,c=window.React;var d=n.n(c);const u=window.hizzlewp.interface,p=window.hizzlewp.components,m=window.wp.notices,h=window.ReactJSXRuntime;function x(){const{notices:e}=(0,l.useSelect)((e=>({notices:e(m.store).getNotices()})),[]),{removeNotice:t}=(0,l.useDispatch)(m.store),n=e.filter((({isDismissible:e,type:t})=>e&&"default"===t)),r=e.filter((({isDismissible:e,type:t})=>!e&&"default"===t));return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(a.NoticeList,{notices:r,className:"components-editor-notices__pinned"}),(0,h.jsx)(a.NoticeList,{notices:n,className:"components-editor-notices__dismissible",onRemove:t})]})}function g(){const e=(0,l.useSelect)((e=>e(m.store).getNotices()),[]),{removeNotice:t}=(0,l.useDispatch)(m.store),n=e.filter((({type:e})=>"snackbar"===e)).slice(-3);return(0,h.jsx)(a.SnackbarList,{notices:n,className:"components-editor-notices__snackbar",onRemove:t})}const j=window.hizzlewp.history,_=window.wp.primitives,b=(0,h.jsx)(_.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(_.Path,{d:"M20 11.2H6.8l3.7-3.7-1-1L3.9 12l5.6 5.5 1-1-3.7-3.7H20z"})}),w=window.hizzlewp.store,y=({children:e})=>(0,h.jsx)("div",{className:"hizzlewp-upsell-card",children:e}),v=({upsell:e})=>{if(!e)return null;const{content:t,buttonURL:n,buttonText:r}=e;return(0,h.jsx)(y,{children:(0,h.jsxs)(a.Tip,{children:[t,(0,h.jsx)(a.Button,{href:n,target:"_blank",variant:"link",children:r})]})})},f=()=>{const{config:{namespace:e,collection:t,labels:n,routes:r,fills:s}}=(0,w.useProvidedCollectionConfig)(),{path:i}=(0,j.useRoute)(),o=`/${e}/${t}`,l=(0,c.useMemo)((()=>{const e=[];return o!==i||(e.push({text:n?.add_new_item||"Add New",onClick:()=>(0,j.updatePath)(`${o}/add`),variant:"primary"}),r&&Object.entries(r).forEach((([t,{title:n,...r}])=>{e.push({text:n,onClick:r.href?void 0:()=>(0,j.updatePath)(t),variant:"secondary",...r})}))),e}),[n,r,i]),d=(0,c.useCallback)((()=>{(0,j.updatePath)(`${e}/${t}`)}),[e,t]);return(0,h.jsxs)(a.Card,{isRounded:!1,children:[(0,h.jsxs)(a.CardHeader,{size:"small",as:a.__experimentalHStack,wrap:!0,children:[(0,h.jsx)(p.ErrorBoundary,{children:(0,h.jsx)(a.__experimentalHStack,{expanded:!1,spacing:2,justify:"flex-start",wrap:!0,children:o!==i?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(a.Button,{variant:"primary",onClick:d,icon:b,label:n?.view_items||"View Items",showTooltip:!0,__next40pxDefaultSize:!0}),(0,h.jsx)("span",{children:(0,h.jsx)(a.Slot,{name:`${o}/title`})})]}):(0,h.jsx)(a.__experimentalHeading,{level:1,size:16,truncate:!0,children:n?.name||"Items"})})}),(0,h.jsx)(p.ErrorBoundary,{children:l.length>0&&(0,h.jsx)(a.__experimentalHStack,{as:a.NavigableMenu,orientation:"horizontal",className:"hizzle-store-ui__header-menu",expanded:!1,spacing:0,alignment:"stretch",wrap:!0,children:l.map((e=>(0,h.jsx)(p.ErrorBoundary,{children:(0,h.jsx)(a.Button,{__next40pxDefaultSize:!0,...e})},e.text)))})})]}),(0,h.jsx)(a.CardBody,{children:(0,h.jsxs)(a.__experimentalVStack,{children:[(0,h.jsx)(p.ErrorBoundary,{children:(0,h.jsx)(j.Outlet,{path:"/:namespace/:collection"})}),(0,h.jsx)(a.Slot,{name:"noptin-interface-notices"}),s&&s.map((e=>(0,h.jsx)(a.Fill,{name:`${e.name}`,children:(0,h.jsxs)(p.ErrorBoundary,{children:[e.content&&(0,h.jsx)("span",{dangerouslySetInnerHTML:{__html:e.content}}),e.upsell&&(0,h.jsx)(v,{upsell:e.upsell})]})},e.name)))]})})]})},z=({children:e})=>{const{config:t,isResolving:n,hasResolved:r,error:s}=(0,w.useProvidedCollectionConfig)();return n||!r?(0,h.jsx)(a.Spinner,{}):s||!t?(0,h.jsx)(a.Notice,{status:"error",isDismissible:!1,children:s?.message||"An unknown error occurred."}):(0,h.jsx)(p.ErrorBoundary,{children:e})},C=({defaultNamespace:e,defaultCollection:t})=>{const{params:n}=(0,j.useRoute)(),r=n?.get("namespace")||e,s=n?.get("collection")||t,i=n?.get("recordId");return(0,h.jsx)(w.CollectionProvider,{namespace:r,collection:s,recordId:i?Number(i):i,children:(0,h.jsx)(p.ErrorBoundary,{children:(0,h.jsx)(z,{children:(0,h.jsx)(f,{})})})})},S=window.wp.i18n,k=window.hizzlewp.records,N=window.wp.date,B=window.wp.url;function R(e){if(["subscribed","subscribe","active","yes","true","1","complete"].includes(e))return{backgroundColor:"#78c67a",color:"#111111"};if(["unsubscribed","unsubscribe","inactive","no","false","0","canceled"].includes(e))return{backgroundColor:"#fbcfbd",color:"#241c15"};if(["pending","waiting","maybe","2"].includes(e))return{backgroundColor:"#fbeeca",color:"#241c15"};const t=(0,p.stringToColor)(e,{saturation:[60,100],lightness:[30,45]});return{backgroundColor:t.color,color:t.isLight?"#111111":"#ffffff"}}const $=e=>{const{className:t,...n}=e;return(0,h.jsx)("span",{className:`hizzlewp-badge ${t||""}`,...n})},E=(e,t,n=!1)=>{if(!e)return e;n&&(e=(0,B.addQueryArgs)(e,{s:360}));const r=(0,B.getQueryArg)(e,"d");if(!r||!r.includes("ui-avatars.com"))return e;const s=r.match(/\/api\/(.*?)\/64\//),i=s&&s.length>1?s[1]:r,a=R(t||i),o=r.indexOf("/64/");return-1!==o&&(e=(0,B.addQueryArgs)(e,{d:`${r.substring(0,o+4)}/${a.backgroundColor.replace("#","")}/${a.color.replace("#","")}`})),e.includes("%2F64%2F%")&&(e=e.replace("%2F64%2F%","%2F360%2F%")),e},D=({record:e,name:t,viewType:n,path:r})=>{const s=e[t],o="table"!==n?"":E(e.avatar_url,s),l=o?(0,h.jsx)("img",{className:"hizzlewp-avatar",src:o,alt:s}):null,c=(0,i.useCallback)((()=>r?(0,j.updatePath)(r):null),[r]),d=(0,h.jsxs)(a.Flex,{className:"hizzlewp-table__cell--primary",children:[l&&(0,h.jsx)(a.FlexItem,{children:l}),(0,h.jsx)(a.FlexBlock,{children:s})]});return r?(0,h.jsx)(a.Button,{variant:"link",style:{width:"100%",alignItems:"start",textDecoration:"none"},onClick:c,children:d}):d},A=({value:e,enums:t={}})=>{const[n,r]=(0,i.useState)(!1),s=n?e:e.slice(0,2),o=e.length>2;return(0,h.jsxs)(a.Flex,{gap:2,justify:"flex-start",wrap:!0,children:[s.map((e=>(0,h.jsx)(a.FlexItem,{children:(0,h.jsx)($,{style:R(e),children:t[e]||e})},e))),o&&(0,h.jsx)(a.FlexItem,{children:(0,h.jsx)(a.Button,{variant:"link",onClick:()=>r(!n),children:n?(0,S.__)("Hide","newsletter-optin-box"):(0,S.__)("Show all","newsletter-optin-box")})})]})},P=({row:e,header:t,viewType:n="table",isBadge:r=!1,path:s})=>{const i=e[t.name];if(null==i||""===i)return r?"":(0,h.jsx)("span",{className:"hizzlewp-table__cell--null",children:"–"});if(Array.isArray(i)&&0===i.length)return r?"":(0,h.jsx)("span",{className:"noptin-table__cell--null",children:"–"});if(t.is_primary&&"string"==typeof i)return(0,h.jsx)(D,{record:e,name:t.name,viewType:n,path:s});if("avatar_url"===t.name){const t=E(e.avatar_url,i,"table"!==n);return t?"table"!==n?(0,h.jsx)("img",{src:t,alt:i}):t?(0,h.jsx)("img",{className:"hizzlewp-avatar",src:t,alt:i}):null:null}if(t.is_boolean){const e=i?"yes":"no",t=i?"#3a9001":"#880000";return(0,h.jsx)(a.Icon,{size:24,style:{color:t},icon:e})}if(t.is_date&&i){const e=(0,N.getSettings)();return 10===i.length?(0,N.dateI18n)(e.formats.date,i):(0,N.dateI18n)(e.formats.datetime,i)}return t.is_tokens&&Array.isArray(i)?(0,h.jsx)(A,{value:i}):t.enum&&Array.isArray(i)?(0,h.jsx)(A,{value:i,enums:t.enum}):t.is_numeric||t.is_float||"string"==typeof i?t.enum&&(o=t.enum)&&"object"==typeof o&&o.constructor===Object?(0,h.jsx)($,{style:R(i),children:t.enum?.[i]||i}):i:JSON.stringify(i);var o},I=()=>{const{config:{namespace:e,collection:t,props:n,ignore:r,hidden:s,badges:i}}=(0,w.useProvidedCollectionConfig)()||{},{preferences:o,setPreferences:l}=(0,u.usePreferences)("recordsTablePreferences",`${e}/${t}`),{preferences:d}=(0,u.usePreferences)("view",`${e}/${t}`),m=(0,j.useQuery)(),x=(0,c.useMemo)((()=>{const e={...m};return!m.orderby&&o?.sorting?.[0]?.id&&(e.orderby=o.sorting[0].id,e.order=o.sorting[0].desc?"desc":"asc"),!m.per_page&&o?.pagination?.pageSize&&(e.per_page=o.pagination.pageSize),e}),[m,o]),g=(0,w.useCollectionRecords)(e,t,x),{columns:_,primaryColumn:b}=(0,c.useMemo)((()=>{const s=[];let a="";return n.forEach((n=>{n.is_textarea&&!n.is_tokens&&(!n.enum||Array.isArray(n.enum))||r.includes(n.name)||"hide"===n.js_props?.table||(n.is_primary&&(a=n.name),s.push({accessorKey:n.name,header:n.label,enableSorting:!n.is_dynamic&&!n.is_meta,enableHiding:!n.is_primary,cell:({row:r})=>(0,h.jsx)(P,{row:r.original,header:n,isBadge:Array.isArray(i)&&i.includes(n.name),path:`${e}/${t}/${r.original.id}`})}))})),{columns:s,primaryColumn:a}}),[n,r]),y=(0,c.useMemo)((()=>(Array.isArray(d?.hiddenFields)?d?.hiddenFields:s).reduce(((e,t)=>(e[t]=!1,e)),{})),[s,d]),v=(0,c.useMemo)((()=>{const e=m.orderby,t=m.order||"desc";return{columnVisibility:y,columnPinning:{left:["hizzlewp-selection",b].filter(Boolean),right:["hizzlewp-actions"]},...o,sorting:e?[{id:e,desc:"desc"===t}]:o?.sorting||[],pagination:{pageSize:m.per_page||o?.pagination?.pageSize||25,pageIndex:m.paged?Number(m.paged)-1:0}}}),[g.records,m,o,l]);console.log({left:["hizzlewp-selection",b].filter(Boolean),right:["hizzlewp-actions"]},v);const f=(0,c.useCallback)((e=>{l(e),(0,j.updateQueryString)({orderby:e?.sorting?.[0]?.id||"",order:e?.sorting?.[0]?.desc?"desc":"asc",per_page:`${e?.pagination?.pageSize||25}`,paged:`${(e?.pagination?.pageIndex||0)+1}`})}),[l]);return g.isResolving||!g.hasResolved?(0,h.jsx)("div",{className:"hizzlewp-records-table-loading",children:(0,h.jsx)(a.Spinner,{})}):"ERROR"===g.status?(0,h.jsx)(a.Notice,{status:"error",isDismissible:!1,children:g.error?.message||"An unknown error occurred."}):(0,h.jsx)(p.ErrorBoundary,{children:(0,h.jsx)(k.Table,{rowCount:g.totalItems||0,data:g.records||[],columns:_,enableSorting:!0,enableFiltering:!0,enablePagination:!0,state:v,onChange:f,onColumnPinningChange:e=>f({...v,columnPinning:e(v?.columnPinning||{})}),getRowId:e=>e.id,debugTable:!0,bulkActions:(e,t)=>(0,h.jsx)(T,{selected:e,isAllSelected:t,query:x})})})},T=({selected:e,isAllSelected:t,query:n})=>(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(a.Button,{children:(0,S.__)("Edit","hizzlewp")}),(0,h.jsx)(a.Button,{children:(0,S.__)("Export","hizzlewp")}),(0,h.jsx)(a.Button,{children:(0,S.__)("Delete","hizzlewp")})]}),F=({children:e,loading:t})=>t?(0,h.jsx)(a.Animate,{type:"loading",children:({className:t})=>(0,h.jsx)("div",{className:t,style:{cursor:"wait"},children:e})}):e,O=({record:e,onChange:t,schema:n,hidden:r,ignore:s,onSubmit:i,loading:l,slotName:d,submitText:u})=>{const m=(0,c.useMemo)((()=>M(n,r,s)),[n,r,s]);return(0,o.useShortcut)("hizzlewp/save-record",(e=>{e?.preventDefault(),i()})),(0,h.jsx)(F,{loading:l,children:(0,h.jsxs)(a.__experimentalVStack,{as:"form",spacing:6,style:{pointerEvents:l?"none":"auto"},onSubmit:i,children:[m.map((n=>(0,h.jsx)(p.ErrorBoundary,{children:(0,h.jsx)(p.Setting,{settingKey:n.name,saved:e,setAttributes:t,setting:n})},n.name))),d&&(0,h.jsx)(a.Slot,{name:d,children:e=>Array.isArray(e)?e.map(((e,t)=>(0,h.jsx)(a.Tip,{children:e},t))):e}),(0,h.jsx)(a.Button,{className:"hizzlewp-block-button",variant:"primary",onClick:i,isBusy:l,children:l?(0,h.jsx)(a.Spinner,{}):u})]})})},M=(e,t,n)=>e.map((e=>e.readonly||e.is_dynamic||"metadata"===e.name||Array.isArray(t)&&t.includes(e.name)||Array.isArray(n)&&n.includes(e.name)?null:(e=>{const t={default:e.default,label:e.label,el:"input",type:"text",name:e.name,isInputToChange:!0};return e.js_props?.setting&&(t.customAttributes=e.js_props.setting),e.js_props?.conditions&&(t.conditions=e.js_props?.conditions),e.is_tokens?(t.el="form_token",t.suggestions=e.suggestions):e.enum&&!Array.isArray(e.enum)?(t.el="select",t.options=e.enum,e.multiple&&(t.multiple=!0)):e.is_textarea&&(t.el="textarea"),(e.is_numeric||e.is_float)&&(t.type="number"),e.is_date&&(t.type="datetime-local",t.placeholder="YYYY-MM-DDTHH:MM:SS+ZZ:ZZ"),e.is_boolean&&(t.type="toggle"),e.description&&e.description!==e.label&&(t.description=e.description),t})(e))).filter((e=>!!e)),H=()=>{const{config:{namespace:e,collection:t,props:n,hidden:r,ignore:s,defaultProps:i,labels:a}}=(0,w.useProvidedCollectionConfig)()||{},{saveCollectionRecord:o}=(0,l.useDispatch)(w.store),[d,u]=(0,c.useState)(!1),[p,x]=(0,c.useState)({}),g=(0,c.useMemo)((()=>[...s,...Object.keys(i||{})]),[s,i]),{createErrorNotice:_,createSuccessNotice:b,removeAllNotices:y}=(0,l.useDispatch)(m.store),v=(0,c.useCallback)((n=>{n?.preventDefault(),d||(y(),u(!0),o(e,t,{...p,...i},{throwOnError:!0}).then((({id:n})=>{b((0,S.__)("Record saved successfully.","newsletter-optin-box"),{isDismissible:!0,type:"snackbar"}),(0,j.updatePath)(`/${e}/${t}/${n}`)})).catch((e=>{_(e.message,{isDismissible:!0,type:"default"});const t=document.getElementById("hizzlewp-collection__main-content");t&&t.parentElement?.scrollTo({top:0,behavior:"smooth"})})).finally((()=>{u(!1)})))}),[p,i,e,t,o,_,b,y]);return(0,h.jsx)(O,{record:p,onChange:e=>x({...p,...e}),onSubmit:v,submitText:a?.save_item||"Save",schema:n,hidden:r,ignore:g,loading:d,slotName:`${e}_${t}_record_create_below`})},L=({children:e})=>(0,h.jsx)(a.FlexItem,{style:{width:400,maxWidth:"100%"},children:(0,h.jsx)(p.ErrorBoundary,{children:e})}),V=()=>{const{config:{namespace:e,collection:t,labels:n}}=(0,w.useProvidedCollectionConfig)()||{};return(0,h.jsxs)(a.__experimentalHStack,{alignment:"flex-start",justify:"space-between",wrap:!0,children:[(0,h.jsx)(a.Fill,{name:`/${e}/${t}/title`,children:(0,h.jsx)(a.__experimentalHeading,{level:1,size:16,truncate:!0,children:n?.add_new_item||"Add New Item"})}),(0,h.jsx)(L,{children:(0,h.jsx)(H,{})}),(0,h.jsx)(a.Slot,{name:`${e}_${t}_record_create_upsell`,children:e=>e?(0,h.jsx)(L,{children:e}):null})]})},Z=()=>{const{config:{labels:e,tabs:t,namespace:n,collection:r}}=(0,w.useProvidedCollectionConfig)(),s=`${n}/${r}/${(0,w.useProvidedRecordId)()}`,{params:i}=(0,j.useRoute)(),o=[{title:e?.edit_item||e?.singular_name||"Edit",name:"overview"}];t&&!Array.isArray(t)&&Object.entries(t).map((([e,{title:t}])=>o.push({title:t,name:e})));const l=(0,c.useCallback)((e=>{const t=o[e]?.name||"overview",n="overview"===t?s:`${s}/${t}`;(0,j.updatePath)(n)}),[s]),d=i?.get("tab")||"overview";return(0,h.jsx)(p.ErrorBoundary,{children:o.length>1?(0,h.jsx)(a.__experimentalHStack,{as:a.NavigableMenu,orientation:"horizontal",className:"hizzle-interface__header-menu",expanded:!1,spacing:0,alignment:"stretch",onNavigate:l,wrap:!0,children:o.map(((e,t)=>(0,h.jsx)(a.Button,{isPressed:e.name===d||!d&&0===t,onClick:()=>l(t),__next40pxDefaultSize:!0,children:e.title},e.name)))}):(0,h.jsx)(h.Fragment,{children:e?.singular_name||"Item"})})},Q=({children:e})=>{const t=(0,w.useProvidedRecordId)(),{config:{namespace:n,collection:r}}=(0,w.useProvidedCollectionConfig)(),{record:s,isResolving:i,hasResolved:o,error:l}=(0,w.useCollectionRecord)(n,r,t);return i||!o?(0,h.jsx)(a.Spinner,{}):l||!s?(0,h.jsx)(a.Notice,{status:"error",isDismissible:!1,children:l?.message||"An unknown error occurred."}):(0,h.jsx)(p.ErrorBoundary,{children:e})},Y=()=>{const e=(0,w.useProvidedRecordId)(),{config:{namespace:t,collection:n,labels:r}}=(0,w.useProvidedCollectionConfig)();return e?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(a.Fill,{name:`/${t}/${n}/title`,children:(0,h.jsx)(Z,{})}),(0,h.jsx)(Q,{children:(0,h.jsx)(j.Outlet,{path:"/:namespace/:collection/:recordId"})})]}):(0,h.jsx)(a.Notice,{status:"error",isDismissible:!1,children:"No record ID found."})},q=()=>{const e=(0,w.useProvidedRecordId)(),{config:{namespace:t,collection:n,labels:r,props:s,hidden:i,ignore:a,defaultProps:o}}=(0,w.useProvidedCollectionConfig)(),{editedRecord:d,edit:u,save:p,isSaving:x}=(0,w.useCollectionRecord)(t,n,e),{createErrorNotice:g,createSuccessNotice:j,removeAllNotices:_}=(0,l.useDispatch)(m.store),b=(0,c.useMemo)((()=>[...a,...Object.keys(o||{})]),[a,o]),y=(0,c.useCallback)((e=>{e?.preventDefault(),x||(_(),p().then((()=>{j((0,S.__)("Record saved successfully.","newsletter-optin-box"),{type:"snackbar"})})).catch((e=>{g(e.message,{isDismissible:!0,type:"default"});const t=document.getElementById("hizzlewp-collection__main-content");t&&t.parentElement?.scrollTo({top:0,behavior:"smooth"})})))}),[p,x,g,j,_]);return(0,h.jsx)(O,{record:d||{},onChange:u,onSubmit:y,submitText:r?.save_item||"Save",schema:s,hidden:i,ignore:b,loading:x,slotName:`${t}_${n}_record_overview_below`})},G=(0,h.jsx)(_.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,h.jsx)(_.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})}),J=({confirm:e,closeModal:t,namespace:n,collection:r,id:s})=>{const{deleteCollectionRecord:i}=(0,l.useDispatch)(w.store),{createSuccessNotice:o,createErrorNotice:d}=(0,l.useDispatch)(m.store),{isDeleting:u,deletingError:p}=(0,l.useSelect)((e=>({isDeleting:e(w.store).isDeletingCollectionRecord(n,r,s),deletingError:e(w.store).getLastCollectionDeleteError(n,r,s)})),[n,r,s]),x=(0,c.useCallback)((e=>{e?.preventDefault(),u||i(n,r,s).then((()=>{o((0,S.__)("Record deleted successfully.","newsletter-optin-box"),{type:"snackbar"}),(0,j.updatePath)(`/${n}/${r}`)})).catch((e=>{d(e.message,{isDismissible:!0,type:"default"});const t=document.getElementById("hizzlewp-collection__main-content");t&&t.parentElement?.scrollTo({top:0,behavior:"smooth"})}))}),[i,o,d,n,r,s]);return(0,h.jsxs)(a.__experimentalVStack,{spacing:8,children:[(0,h.jsx)(a.__experimentalText,{variant:"muted",children:e||(0,S.__)("Are you sure you want to delete this record?","newsletter-optin-box")}),(0,h.jsxs)(a.__experimentalHStack,{justify:"flex-start",children:[(0,h.jsx)(a.Button,{variant:"primary",isDestructive:!0,onClick:x,isBusy:u,__next40pxDefaultSize:!0,children:u?(0,S.__)("Deleting...","newsletter-optin-box"):(0,S.__)("Delete","newsletter-optin-box")}),(0,h.jsx)(a.Button,{variant:"secondary",onClick:t,__next40pxDefaultSize:!0,children:(0,S.__)("Cancel","newsletter-optin-box")})]}),p&&(0,h.jsx)(a.Notice,{status:"error",isDismissible:!1,children:p?.message})]})},K=({label:e,...t})=>{const[n,r]=(0,c.useState)(!1);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(a.Button,{isDestructive:!0,onClick:()=>r(!0),icon:G,variant:"secondary",children:e}),n&&(0,h.jsx)(a.Modal,{title:e,onRequestClose:()=>{r(!1)},children:(0,h.jsx)(J,{...t,closeModal:()=>r(!1)})})]})},W=({label:e,actionName:t,namespace:n,collection:r,id:s})=>{const{doRemoteCollectionRecordAction:i}=(0,l.useDispatch)(w.store),{createSuccessNotice:o,createErrorNotice:d}=(0,l.useDispatch)(m.store),u=(0,l.useSelect)((e=>e(w.store).isDoingRemoteCollectionRecordAction(n,r,s,t)),[n,r,t,s]),p=(0,c.useCallback)((e=>{e?.preventDefault(),u||i(n,r,s,t).then((e=>{o(e?.message,{type:"snackbar"})})).catch((e=>{d(e.message,{isDismissible:!0,type:"default"});const t=document.getElementById("hizzlewp-collection__main-content");t&&t.parentElement?.scrollTo({top:0,behavior:"smooth"})}))}),[i,o,d,n,r,t,s]);return(0,h.jsxs)(a.Button,{variant:"secondary",onClick:p,children:[e,u&&(0,h.jsx)(a.Spinner,{})]})},U=window.wp.compose,X=({value:e,label:t})=>{const{createInfoNotice:n}=(0,l.useDispatch)(m.store),r=(0,U.useCopyToClipboard)(e,(()=>{n("Copied to clipboard.",{type:"snackbar"})}));return(0,h.jsx)(a.Button,{label:"Click to copy",variant:"secondary",ref:r,showTooltip:!0,children:t})},ee=({links:e,...t})=>(0,h.jsx)(a.__experimentalHStack,{justify:"flex-end",spacing:2,wrap:!0,children:e.map((({label:e,value:n,action:r,hide:s})=>s?(0,h.jsx)(d().Fragment,{},e):"delete"===r?(0,h.jsx)(K,{label:e,confirm:n,...t},e):"remote"===r?(0,h.jsx)(W,{label:e,actionName:n,...t},e):(n&&(n=n.replace(/&amp;/g,"&")),"copy"===r?(0,h.jsx)(X,{label:e,value:n,...t},e):(0,h.jsx)(a.Button,{href:n,variant:"secondary",target:"_blank",children:e},e))))}),te=({value:e,label:t,status:n})=>(0,h.jsx)("div",{className:`hizzlewp-stat-card hizzlewp-stat-card__${n||"default"}`,children:(0,h.jsxs)(a.Flex,{direction:"column",justify:"center",style:{minHeight:100},children:[(0,h.jsx)(a.FlexItem,{children:(0,h.jsx)(a.__experimentalText,{size:48,weight:600,as:"h2",children:e})}),(0,h.jsx)(a.FlexItem,{children:(0,h.jsx)(a.__experimentalText,{size:13,weight:400,as:"h3",children:t})})]})}),ne=({cards:e})=>(0,h.jsx)(a.__experimentalHStack,{spacing:2,justify:"flex-end",wrap:!0,children:e.map((({title:e,value:t,status:n})=>(0,h.jsx)(a.FlexItem,{children:(0,h.jsx)(te,{status:n||"info",label:e,value:(0,h.jsx)("span",{dangerouslySetInnerHTML:{__html:t}})})},e)))}),re=({content:e,buttonText:t,buttonLink:n})=>(0,h.jsx)(a.Card,{variant:"secondary",children:(0,h.jsx)(a.CardBody,{children:(0,h.jsxs)(a.__experimentalVStack,{spacing:8,children:[(0,h.jsx)(i.RawHTML,{children:e}),t&&n&&(0,h.jsx)("div",{children:(0,h.jsx)(a.Button,{variant:"secondary",href:n,text:t})})]})})}),se=({namespace:e,collection:t,id:n})=>{const r=(0,w.useCollectionRecordTabContent)(e,t,n,"overview");return r.isResolving?(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(a.__experimentalGrid,{columns:3,children:[(0,h.jsx)("div",{className:"hizzlewp-overview-loading-placeholder__card"}),(0,h.jsx)("div",{className:"hizzlewp-overview-loading-placeholder__card"}),(0,h.jsx)("div",{className:"hizzlewp-overview-loading-placeholder__card"})]})}):!r.error&&Array.isArray(r.data)&&r.data.length?(0,h.jsx)(h.Fragment,{children:r.data.map(((r,s)=>{switch(r.type){case"stat_cards":return(0,h.jsx)(ne,{cards:r.cards},s);case"action_links":return(0,h.jsx)(ee,{links:r.links,namespace:e,collection:t,id:n},s);case"card":return(0,h.jsx)(re,{...r},s);default:return null}}))}):null},ie=()=>{const e=(0,w.useProvidedRecordId)(),{config:{namespace:t,collection:n,labels:r}}=(0,w.useProvidedCollectionConfig)();return(0,h.jsxs)(a.__experimentalHStack,{alignment:"flex-start",justify:"space-between",wrap:!0,children:[(0,h.jsx)(L,{children:(0,h.jsx)(q,{})}),(0,h.jsx)(L,{children:(0,h.jsxs)(a.__experimentalVStack,{spacing:5,children:[(0,h.jsx)(a.Slot,{name:`${t}_${n}_record_overview_upsell`}),(0,h.jsx)(se,{namespace:t,collection:n,id:e})]})})]})},ae=({namespace:e,collection:t,recordId:n,tabName:r})=>(0,w.useCollectionRecordTabContent)(e,t,n,r).isResolving?(0,h.jsx)(a.Spinner,{}):(0,h.jsx)(h.Fragment,{children:"TODO"}),oe=()=>{const{config:{tabs:e,namespace:t,collection:n}}=(0,w.useProvidedCollectionConfig)(),r=(0,w.useProvidedRecordId)(),{params:s}=(0,j.useRoute)(),i=s?.get("tab")||"overview",o={namespace:t,collection:n,recordId:r,tabName:s?.get("tab")||"overview"},l=(0,c.useMemo)((()=>e&&!Array.isArray(e)&&e[o.tabName]?"table"===e[o.tabName].type?(0,h.jsx)(ae,{tab:e[o.tabName],...o}):(0,h.jsx)(a.Slot,{name:`${t}-${n}-tab-${o.tabName}`,fillProps:{tab:e[o.tabName],...o}}):(0,h.jsx)(ie,{})),[e,o.tabName,t,n,r]);return(0,h.jsx)("div",{id:`tab__${t}-${n}__${i}__content`,className:"hizzlewp-tab__content",children:l})},le=({defaultNamespace:e,defaultCollection:t})=>{const n=(0,c.useMemo)((()=>[{path:"/:namespace/:collection",element:(0,h.jsx)(p.ErrorBoundary,{children:(0,h.jsx)(C,{defaultNamespace:e,defaultCollection:t})}),index:(0,h.jsx)(p.ErrorBoundary,{children:(0,h.jsx)(I,{})}),children:[{path:"/:namespace/:collection/add",element:(0,h.jsx)(p.ErrorBoundary,{children:(0,h.jsx)(V,{})})},{path:"/:namespace/:collection/import",element:(0,h.jsx)(p.ErrorBoundary,{children:"TODO"})},{path:"/:namespace/:collection/export",element:(0,h.jsx)(p.ErrorBoundary,{children:"TODO"})},{path:"/:namespace/:collection/:recordId",element:(0,h.jsx)(p.ErrorBoundary,{children:(0,h.jsx)(Y,{})}),index:(0,h.jsx)(p.ErrorBoundary,{children:(0,h.jsx)(ie,{})}),children:[{path:"/:namespace/:collection/:recordId/:tab",element:(0,h.jsx)(p.ErrorBoundary,{children:(0,h.jsx)(oe,{})})}]}]}]),[e,t]);return(0,h.jsx)(p.ErrorBoundary,{children:(0,h.jsx)(j.Router,{basePath:`/${e}/${t}`,routes:n})})},ce=e=>(0,h.jsx)(p.ErrorBoundary,{children:(0,h.jsx)(u.Header,{...e})});function de({defaultNamespace:e,defaultCollection:t,...n}){const r=(0,c.useMemo)((()=>(0,h.jsxs)(a.__experimentalVStack,{id:"hizzlewp-collection__main-content",style:{padding:20},children:[(0,h.jsx)(p.ErrorBoundary,{children:(0,h.jsx)(g,{})}),(0,h.jsx)(p.ErrorBoundary,{children:(0,h.jsx)(x,{})}),(0,h.jsx)(p.ErrorBoundary,{children:(0,h.jsx)(le,{defaultNamespace:e,defaultCollection:t})})]})),[e,t]);return(0,h.jsx)(u.Interface,{className:"hizzlewp-settings__interface",header:(0,h.jsx)(ce,{...n}),content:r})}const{collection:ue,namespace:pe,...me}=window.hizzleWPStore?.data||{};s()((()=>{const e=document.getElementById("hizzlewp-store-ui");if(!e||!ue||!pe)return;(0,l.dispatch)(o.store).registerShortcut({name:"hizzlewp/save-record",category:"hizzlewp",description:"Save the current record",keyCombination:{modifier:"primary",character:"s"}});const t=()=>(0,h.jsx)(a.SlotFillProvider,{children:(0,h.jsx)(de,{defaultNamespace:pe,defaultCollection:ue,...me})});(0,i.createRoot)(e).render((0,h.jsx)(t,{}))}))}},n={};function r(e){var s=n[e];if(void 0!==s)return s.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,r),i.exports}r.m=t,e=[],r.O=(t,n,s,i)=>{if(!n){var a=1/0;for(d=0;d<e.length;d++){for(var[n,s,i]=e[d],o=!0,l=0;l<n.length;l++)(!1&i||a>=i)&&Object.keys(r.O).every((e=>r.O[e](n[l])))?n.splice(l--,1):(o=!1,i<a&&(a=i));if(o){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,s,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={77:0,385:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var s,i,[a,o,l]=n,c=0;if(a.some((t=>0!==e[t]))){for(s in o)r.o(o,s)&&(r.m[s]=o[s]);if(l)var d=l(r)}for(t&&t(n);c<a.length;c++)i=a[c],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(d)},n=globalThis.webpackChunkhizzlewp=globalThis.webpackChunkhizzlewp||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var s=r.O(void 0,[385],(()=>r(28)));s=r.O(s)})();