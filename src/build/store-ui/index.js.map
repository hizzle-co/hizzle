{"version":3,"file":"store-ui/index.js","mappings":"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AiB,qBAAqB;WACtC;WACA;WACA,kBAAkB,qBAAqB;WACvC;WACA;WACA,KAAK;WACL;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,E;;;;;WC3BA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA,E;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA,E;;;;;WCPA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC,I;;;;;WCPD,wF;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D,E;;;;;WCNA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA,4G;;;;;UEjDA;UACA;UACA;UACA;UACA","sources":["webpack://hizzlewp/./node_modules/@wordpress/icons/build-module/library/arrow-left.js","webpack://hizzlewp/./node_modules/@wordpress/icons/build-module/library/more-vertical.js","webpack://hizzlewp/./node_modules/@wordpress/icons/build-module/library/rotate-right.js","webpack://hizzlewp/./node_modules/@wordpress/icons/build-module/library/trash.js","webpack://hizzlewp/./node_modules/file-saver/dist/FileSaver.min.js","webpack://hizzlewp/./node_modules/papaparse/papaparse.min.js","webpack://hizzlewp/./packages/store-ui/src/components/actions/copy-action.tsx","webpack://hizzlewp/./packages/store-ui/src/components/actions/delete-action.tsx","webpack://hizzlewp/./packages/store-ui/src/components/actions/remote-action.tsx","webpack://hizzlewp/./packages/store-ui/src/components/collection.tsx","webpack://hizzlewp/./packages/store-ui/src/components/edit-record-form.tsx","webpack://hizzlewp/./packages/store-ui/src/components/layout.tsx","webpack://hizzlewp/./packages/store-ui/src/components/notices.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/create-record.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/import/import-file.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/import/index.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/import/map-headers.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/import/progress.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/import/reducer.ts","webpack://hizzlewp/./packages/store-ui/src/components/routes/import/select-file.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/main.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/records-table/display-cell.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/records-table/enum-colors.ts","webpack://hizzlewp/./packages/store-ui/src/components/routes/records-table/filters.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/records-table/header/delete.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/records-table/header/edit.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/records-table/header/export/download.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/records-table/header/export/index.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/records-table/header/export/modal.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/records-table/header/export/select-fields.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/records-table/header/index.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/records-table/index.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/records-table/item-actions.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/records-table/saved-filters.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/view-record/overview/action-buttons/copy-button.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/view-record/overview/action-buttons/delete.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/view-record/overview/action-buttons/index.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/view-record/overview/action-buttons/remote-action-link.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/view-record/overview/card.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/view-record/overview/edit-record.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/view-record/overview/index.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/view-record/overview/overview.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/view-record/overview/stats.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/view-record/tab-content/index.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/view-record/tab-content/table.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/view-record/tabs.tsx","webpack://hizzlewp/./packages/store-ui/src/components/routes/view-record/view-record.tsx","webpack://hizzlewp/./packages/store-ui/src/components/upsell.tsx","webpack://hizzlewp/./packages/store-ui/src/index.tsx","webpack://hizzlewp/./packages/store-ui/src/style.scss","webpack://hizzlewp/external window [\"hizzlewp\",\"components\"]","webpack://hizzlewp/external window [\"hizzlewp\",\"history\"]","webpack://hizzlewp/external window [\"hizzlewp\",\"interface\"]","webpack://hizzlewp/external window [\"hizzlewp\",\"records\"]","webpack://hizzlewp/external window [\"hizzlewp\",\"store\"]","webpack://hizzlewp/external window [\"wp\",\"components\"]","webpack://hizzlewp/external window [\"wp\",\"compose\"]","webpack://hizzlewp/external window [\"wp\",\"data\"]","webpack://hizzlewp/external window [\"wp\",\"date\"]","webpack://hizzlewp/external window [\"wp\",\"domReady\"]","webpack://hizzlewp/external window [\"wp\",\"element\"]","webpack://hizzlewp/external window [\"wp\",\"i18n\"]","webpack://hizzlewp/external window [\"wp\",\"keyboardShortcuts\"]","webpack://hizzlewp/external window [\"wp\",\"notices\"]","webpack://hizzlewp/external window [\"wp\",\"primitives\"]","webpack://hizzlewp/external window [\"wp\",\"url\"]","webpack://hizzlewp/external window \"React\"","webpack://hizzlewp/external window \"ReactJSXRuntime\"","webpack://hizzlewp/webpack/bootstrap","webpack://hizzlewp/webpack/runtime/chunk loaded","webpack://hizzlewp/webpack/runtime/compat get default export","webpack://hizzlewp/webpack/runtime/define property getters","webpack://hizzlewp/webpack/runtime/global","webpack://hizzlewp/webpack/runtime/hasOwnProperty shorthand","webpack://hizzlewp/webpack/runtime/make namespace object","webpack://hizzlewp/webpack/runtime/jsonp chunk loading","webpack://hizzlewp/webpack/before-startup","webpack://hizzlewp/webpack/startup","webpack://hizzlewp/webpack/after-startup"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst arrowLeft = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M20 11.2H6.8l3.7-3.7-1-1L3.9 12l5.6 5.5 1-1-3.7-3.7H20z\"\n  })\n});\nexport default arrowLeft;\n//# sourceMappingURL=arrow-left.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst moreVertical = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M13 19h-2v-2h2v2zm0-6h-2v-2h2v2zm0-6h-2V5h2v2z\"\n  })\n});\nexport default moreVertical;\n//# sourceMappingURL=more-vertical.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst rotateRight = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M15.1 4.8l-3-2.5V4c-4.4 0-8 3.6-8 8 0 3.7 2.5 6.9 6 7.7.3.1.6.1 1 .2l.2-1.5c-.4 0-.7-.1-1.1-.2l-.1.2v-.2c-2.6-.8-4.5-3.3-4.5-6.2 0-3.6 2.9-6.5 6.5-6.5v1.8l3-2.5zM20 11c-.2-1.4-.7-2.7-1.6-3.8l-1.2.8c.7.9 1.1 2 1.3 3.1L20 11zm-1.5 1.8c-.1.5-.2 1.1-.4 1.6s-.5 1-.8 1.5l1.2.9c.4-.5.8-1.1 1-1.8s.5-1.3.5-2l-1.5-.2zm-5.6 5.6l.2 1.5c1.4-.2 2.7-.7 3.8-1.6l-.9-1.1c-.9.7-2 1.1-3.1 1.2z\"\n  })\n});\nexport default rotateRight;\n//# sourceMappingURL=rotate-right.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst trash = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z\"\n  })\n});\nexport default trash;\n//# sourceMappingURL=trash.js.map","(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open(\"GET\",a),d.responseType=\"blob\",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error(\"could not download file\")},d.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open(\"\",\"_blank\"),g&&(g.document.title=g.document.body.innerText=\"downloading...\"),\"string\"==typeof b)return c(b,d,e);var h=\"application/octet-stream\"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&\"undefined\"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,\"undefined\"!=typeof module&&(module.exports=g)});\n\n//# sourceMappingURL=FileSaver.min.js.map","/* @license\nPapa Parse\nv5.5.3\nhttps://github.com/mholt/PapaParse\nLicense: MIT\n*/\n((e,t)=>{\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof module&&\"undefined\"!=typeof exports?module.exports=t():e.Papa=t()})(this,function r(){var n=\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:void 0!==n?n:{};var d,s=!n.document&&!!n.postMessage,a=n.IS_PAPA_WORKER||!1,o={},h=0,v={};function u(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine=\"\",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=b(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null);this._handle=new i(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(t,e){var i=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<i){let e=this._config.newline;e||(r=this._config.quoteChar||'\"',e=this._handle.guessLineEndings(t,r)),t=[...t.split(e).slice(i)].join(e)}this.isFirstChunk&&U(this._config.beforeFirstChunk)&&void 0!==(r=this._config.beforeFirstChunk(t))&&(t=r),this.isFirstChunk=!1,this._halted=!1;var i=this._partialLine+t,r=(this._partialLine=\"\",this._handle.parse(i,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){t=r.meta.cursor,i=(this._finished||(this._partialLine=i.substring(t-this._baseIndex),this._baseIndex=t),r&&r.data&&(this._rowCount+=r.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview);if(a)n.postMessage({results:r,workerId:v.WORKER_ID,finished:i});else if(U(this._config.chunk)&&!e){if(this._config.chunk(r,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=r=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(r.data),this._completeResults.errors=this._completeResults.errors.concat(r.errors),this._completeResults.meta=r.meta),this._completed||!i||!U(this._config.complete)||r&&r.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),i||r&&r.meta.paused||this._nextChunk(),r}this._halted=!0},this._sendError=function(e){U(this._config.error)?this._config.error(e):a&&this._config.error&&n.postMessage({workerId:v.WORKER_ID,error:e,finished:!1})}}function f(e){var r;(e=e||{}).chunkSize||(e.chunkSize=v.RemoteChunkSize),u.call(this,e),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(r=new XMLHttpRequest,this._config.withCredentials&&(r.withCredentials=this._config.withCredentials),s||(r.onload=y(this._chunkLoaded,this),r.onerror=y(this._chunkError,this)),r.open(this._config.downloadRequestBody?\"POST\":\"GET\",this._input,!s),this._config.downloadRequestHeaders){var e,t=this._config.downloadRequestHeaders;for(e in t)r.setRequestHeader(e,t[e])}var i;this._config.chunkSize&&(i=this._start+this._config.chunkSize-1,r.setRequestHeader(\"Range\",\"bytes=\"+this._start+\"-\"+i));try{r.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}s&&0===r.status&&this._chunkError()}},this._chunkLoaded=function(){4===r.readyState&&(r.status<200||400<=r.status?this._chunkError():(this._start+=this._config.chunkSize||r.responseText.length,this._finished=!this._config.chunkSize||this._start>=(e=>null!==(e=e.getResponseHeader(\"Content-Range\"))?parseInt(e.substring(e.lastIndexOf(\"/\")+1)):-1)(r),this.parseChunk(r.responseText)))},this._chunkError=function(e){e=r.statusText||e;this._sendError(new Error(e))}}function l(e){(e=e||{}).chunkSize||(e.chunkSize=v.LocalChunkSize),u.call(this,e);var i,r,n=\"undefined\"!=typeof FileReader;this.stream=function(e){this._input=e,r=e.slice||e.webkitSlice||e.mozSlice,n?((i=new FileReader).onload=y(this._chunkLoaded,this),i.onerror=y(this._chunkError,this)):i=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input,t=(this._config.chunkSize&&(t=Math.min(this._start+this._config.chunkSize,this._input.size),e=r.call(e,this._start,t)),i.readAsText(e,this._config.encoding));n||this._chunkLoaded({target:{result:t}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(i.error)}}function c(e){var i;u.call(this,e=e||{}),this.stream=function(e){return i=e,this._nextChunk()},this._nextChunk=function(){var e,t;if(!this._finished)return e=this._config.chunkSize,i=e?(t=i.substring(0,e),i.substring(e)):(t=i,\"\"),this._finished=!i,this.parseChunk(t)}}function p(e){u.call(this,e=e||{});var t=[],i=!0,r=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on(\"data\",this._streamData),this._input.on(\"end\",this._streamEnd),this._input.on(\"error\",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):i=!0},this._streamData=y(function(e){try{t.push(\"string\"==typeof e?e:e.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}},this),this._streamError=y(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=y(function(){this._streamCleanUp(),r=!0,this._streamData(\"\")},this),this._streamCleanUp=y(function(){this._input.removeListener(\"data\",this._streamData),this._input.removeListener(\"end\",this._streamEnd),this._input.removeListener(\"error\",this._streamError)},this)}function i(m){var n,s,a,t,o=Math.pow(2,53),h=-o,u=/^\\s*-?(\\d+\\.?|\\.\\d+|\\d+\\.\\d+)([eE][-+]?\\d+)?\\s*$/,d=/^((\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d\\.\\d+([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z)))$/,i=this,r=0,f=0,l=!1,e=!1,c=[],p={data:[],errors:[],meta:{}};function y(e){return\"greedy\"===m.skipEmptyLines?\"\"===e.join(\"\").trim():1===e.length&&0===e[0].length}function g(){if(p&&a&&(k(\"Delimiter\",\"UndetectableDelimiter\",\"Unable to auto-detect delimiting character; defaulted to '\"+v.DefaultDelimiter+\"'\"),a=!1),m.skipEmptyLines&&(p.data=p.data.filter(function(e){return!y(e)})),_()){if(p)if(Array.isArray(p.data[0])){for(var e=0;_()&&e<p.data.length;e++)p.data[e].forEach(t);p.data.splice(0,1)}else p.data.forEach(t);function t(e,t){U(m.transformHeader)&&(e=m.transformHeader(e,t)),c.push(e)}}function i(e,t){for(var i=m.header?{}:[],r=0;r<e.length;r++){var n=r,s=e[r],s=((e,t)=>(e=>(m.dynamicTypingFunction&&void 0===m.dynamicTyping[e]&&(m.dynamicTyping[e]=m.dynamicTypingFunction(e)),!0===(m.dynamicTyping[e]||m.dynamicTyping)))(e)?\"true\"===t||\"TRUE\"===t||\"false\"!==t&&\"FALSE\"!==t&&((e=>{if(u.test(e)){e=parseFloat(e);if(h<e&&e<o)return 1}})(t)?parseFloat(t):d.test(t)?new Date(t):\"\"===t?null:t):t)(n=m.header?r>=c.length?\"__parsed_extra\":c[r]:n,s=m.transform?m.transform(s,n):s);\"__parsed_extra\"===n?(i[n]=i[n]||[],i[n].push(s)):i[n]=s}return m.header&&(r>c.length?k(\"FieldMismatch\",\"TooManyFields\",\"Too many fields: expected \"+c.length+\" fields but parsed \"+r,f+t):r<c.length&&k(\"FieldMismatch\",\"TooFewFields\",\"Too few fields: expected \"+c.length+\" fields but parsed \"+r,f+t)),i}var r;p&&(m.header||m.dynamicTyping||m.transform)&&(r=1,!p.data.length||Array.isArray(p.data[0])?(p.data=p.data.map(i),r=p.data.length):p.data=i(p.data,0),m.header&&p.meta&&(p.meta.fields=c),f+=r)}function _(){return m.header&&0===c.length}function k(e,t,i,r){e={type:e,code:t,message:i};void 0!==r&&(e.row=r),p.errors.push(e)}U(m.step)&&(t=m.step,m.step=function(e){p=e,_()?g():(g(),0!==p.data.length&&(r+=e.data.length,m.preview&&r>m.preview?s.abort():(p.data=p.data[0],t(p,i))))}),this.parse=function(e,t,i){var r=m.quoteChar||'\"',r=(m.newline||(m.newline=this.guessLineEndings(e,r)),a=!1,m.delimiter?U(m.delimiter)&&(m.delimiter=m.delimiter(e),p.meta.delimiter=m.delimiter):((r=((e,t,i,r,n)=>{var s,a,o,h;n=n||[\",\",\"\\t\",\"|\",\";\",v.RECORD_SEP,v.UNIT_SEP];for(var u=0;u<n.length;u++){for(var d,f=n[u],l=0,c=0,p=0,g=(o=void 0,new E({comments:r,delimiter:f,newline:t,preview:10}).parse(e)),_=0;_<g.data.length;_++)i&&y(g.data[_])?p++:(d=g.data[_].length,c+=d,void 0===o?o=d:0<d&&(l+=Math.abs(d-o),o=d));0<g.data.length&&(c/=g.data.length-p),(void 0===a||l<=a)&&(void 0===h||h<c)&&1.99<c&&(a=l,s=f,h=c)}return{successful:!!(m.delimiter=s),bestDelimiter:s}})(e,m.newline,m.skipEmptyLines,m.comments,m.delimitersToGuess)).successful?m.delimiter=r.bestDelimiter:(a=!0,m.delimiter=v.DefaultDelimiter),p.meta.delimiter=m.delimiter),b(m));return m.preview&&m.header&&r.preview++,n=e,s=new E(r),p=s.parse(n,t,i),g(),l?{meta:{paused:!0}}:p||{meta:{paused:!1}}},this.paused=function(){return l},this.pause=function(){l=!0,s.abort(),n=U(m.chunk)?\"\":n.substring(s.getCharIndex())},this.resume=function(){i.streamer._halted?(l=!1,i.streamer.parseChunk(n,!0)):setTimeout(i.resume,3)},this.aborted=function(){return e},this.abort=function(){e=!0,s.abort(),p.meta.aborted=!0,U(m.complete)&&m.complete(p),n=\"\"},this.guessLineEndings=function(e,t){e=e.substring(0,1048576);var t=new RegExp(P(t)+\"([^]*?)\"+P(t),\"gm\"),i=(e=e.replace(t,\"\")).split(\"\\r\"),t=e.split(\"\\n\"),e=1<t.length&&t[0].length<i[0].length;if(1===i.length||e)return\"\\n\";for(var r=0,n=0;n<i.length;n++)\"\\n\"===i[n][0]&&r++;return r>=i.length/2?\"\\r\\n\":\"\\r\"}}function P(e){return e.replace(/[.*+?^${}()|[\\]\\\\]/g,\"\\\\$&\")}function E(C){var S=(C=C||{}).delimiter,O=C.newline,x=C.comments,I=C.step,A=C.preview,T=C.fastMode,D=null,L=!1,F=null==C.quoteChar?'\"':C.quoteChar,j=F;if(void 0!==C.escapeChar&&(j=C.escapeChar),(\"string\"!=typeof S||-1<v.BAD_DELIMITERS.indexOf(S))&&(S=\",\"),x===S)throw new Error(\"Comment character same as delimiter\");!0===x?x=\"#\":(\"string\"!=typeof x||-1<v.BAD_DELIMITERS.indexOf(x))&&(x=!1),\"\\n\"!==O&&\"\\r\"!==O&&\"\\r\\n\"!==O&&(O=\"\\n\");var z=0,M=!1;this.parse=function(i,t,r){if(\"string\"!=typeof i)throw new Error(\"Input must be a string\");var n=i.length,e=S.length,s=O.length,a=x.length,o=U(I),h=[],u=[],d=[],f=z=0;if(!i)return w();if(T||!1!==T&&-1===i.indexOf(F)){for(var l=i.split(O),c=0;c<l.length;c++){if(d=l[c],z+=d.length,c!==l.length-1)z+=O.length;else if(r)return w();if(!x||d.substring(0,a)!==x){if(o){if(h=[],k(d.split(S)),R(),M)return w()}else k(d.split(S));if(A&&A<=c)return h=h.slice(0,A),w(!0)}}return w()}for(var p=i.indexOf(S,z),g=i.indexOf(O,z),_=new RegExp(P(j)+P(F),\"g\"),m=i.indexOf(F,z);;)if(i[z]===F)for(m=z,z++;;){if(-1===(m=i.indexOf(F,m+1)))return r||u.push({type:\"Quotes\",code:\"MissingQuotes\",message:\"Quoted field unterminated\",row:h.length,index:z}),E();if(m===n-1)return E(i.substring(z,m).replace(_,F));if(F===j&&i[m+1]===j)m++;else if(F===j||0===m||i[m-1]!==j){-1!==p&&p<m+1&&(p=i.indexOf(S,m+1));var y=v(-1===(g=-1!==g&&g<m+1?i.indexOf(O,m+1):g)?p:Math.min(p,g));if(i.substr(m+1+y,e)===S){d.push(i.substring(z,m).replace(_,F)),i[z=m+1+y+e]!==F&&(m=i.indexOf(F,z)),p=i.indexOf(S,z),g=i.indexOf(O,z);break}y=v(g);if(i.substring(m+1+y,m+1+y+s)===O){if(d.push(i.substring(z,m).replace(_,F)),b(m+1+y+s),p=i.indexOf(S,z),m=i.indexOf(F,z),o&&(R(),M))return w();if(A&&h.length>=A)return w(!0);break}u.push({type:\"Quotes\",code:\"InvalidQuotes\",message:\"Trailing quote on quoted field is malformed\",row:h.length,index:z}),m++}}else if(x&&0===d.length&&i.substring(z,z+a)===x){if(-1===g)return w();z=g+s,g=i.indexOf(O,z),p=i.indexOf(S,z)}else if(-1!==p&&(p<g||-1===g))d.push(i.substring(z,p)),z=p+e,p=i.indexOf(S,z);else{if(-1===g)break;if(d.push(i.substring(z,g)),b(g+s),o&&(R(),M))return w();if(A&&h.length>=A)return w(!0)}return E();function k(e){h.push(e),f=z}function v(e){var t=0;return t=-1!==e&&(e=i.substring(m+1,e))&&\"\"===e.trim()?e.length:t}function E(e){return r||(void 0===e&&(e=i.substring(z)),d.push(e),z=n,k(d),o&&R()),w()}function b(e){z=e,k(d),d=[],g=i.indexOf(O,z)}function w(e){if(C.header&&!t&&h.length&&!L){var s=h[0],a=Object.create(null),o=new Set(s);let n=!1;for(let r=0;r<s.length;r++){let i=s[r];if(a[i=U(C.transformHeader)?C.transformHeader(i,r):i]){let e,t=a[i];for(;e=i+\"_\"+t,t++,o.has(e););o.add(e),s[r]=e,a[i]++,n=!0,(D=null===D?{}:D)[e]=i}else a[i]=1,s[r]=i;o.add(i)}n&&console.warn(\"Duplicate headers found and renamed.\"),L=!0}return{data:h,errors:u,meta:{delimiter:S,linebreak:O,aborted:M,truncated:!!e,cursor:f+(t||0),renamedHeaders:D}}}function R(){I(w()),h=[],u=[]}},this.abort=function(){M=!0},this.getCharIndex=function(){return z}}function g(e){var t=e.data,i=o[t.workerId],r=!1;if(t.error)i.userError(t.error,t.file);else if(t.results&&t.results.data){var n={abort:function(){r=!0,_(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:m,resume:m};if(U(i.userStep)){for(var s=0;s<t.results.data.length&&(i.userStep({data:t.results.data[s],errors:t.results.errors,meta:t.results.meta},n),!r);s++);delete t.results}else U(i.userChunk)&&(i.userChunk(t.results,n,t.file),delete t.results)}t.finished&&!r&&_(t.workerId,t.results)}function _(e,t){var i=o[e];U(i.userComplete)&&i.userComplete(t),i.terminate(),delete o[e]}function m(){throw new Error(\"Not implemented.\")}function b(e){if(\"object\"!=typeof e||null===e)return e;var t,i=Array.isArray(e)?[]:{};for(t in e)i[t]=b(e[t]);return i}function y(e,t){return function(){e.apply(t,arguments)}}function U(e){return\"function\"==typeof e}return v.parse=function(e,t){var i=(t=t||{}).dynamicTyping||!1;U(i)&&(t.dynamicTypingFunction=i,i={});if(t.dynamicTyping=i,t.transform=!!U(t.transform)&&t.transform,!t.worker||!v.WORKERS_SUPPORTED)return i=null,v.NODE_STREAM_INPUT,\"string\"==typeof e?(e=(e=>65279!==e.charCodeAt(0)?e:e.slice(1))(e),i=new(t.download?f:c)(t)):!0===e.readable&&U(e.read)&&U(e.on)?i=new p(t):(n.File&&e instanceof File||e instanceof Object)&&(i=new l(t)),i.stream(e);(i=(()=>{var e;return!!v.WORKERS_SUPPORTED&&(e=(()=>{var e=n.URL||n.webkitURL||null,t=r.toString();return v.BLOB_URL||(v.BLOB_URL=e.createObjectURL(new Blob([\"var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; \",\"(\",t,\")();\"],{type:\"text/javascript\"})))})(),(e=new n.Worker(e)).onmessage=g,e.id=h++,o[e.id]=e)})()).userStep=t.step,i.userChunk=t.chunk,i.userComplete=t.complete,i.userError=t.error,t.step=U(t.step),t.chunk=U(t.chunk),t.complete=U(t.complete),t.error=U(t.error),delete t.worker,i.postMessage({input:e,config:t,workerId:i.id})},v.unparse=function(e,t){var n=!1,_=!0,m=\",\",y=\"\\r\\n\",s='\"',a=s+s,i=!1,r=null,o=!1,h=((()=>{if(\"object\"==typeof t){if(\"string\"!=typeof t.delimiter||v.BAD_DELIMITERS.filter(function(e){return-1!==t.delimiter.indexOf(e)}).length||(m=t.delimiter),\"boolean\"!=typeof t.quotes&&\"function\"!=typeof t.quotes&&!Array.isArray(t.quotes)||(n=t.quotes),\"boolean\"!=typeof t.skipEmptyLines&&\"string\"!=typeof t.skipEmptyLines||(i=t.skipEmptyLines),\"string\"==typeof t.newline&&(y=t.newline),\"string\"==typeof t.quoteChar&&(s=t.quoteChar),\"boolean\"==typeof t.header&&(_=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error(\"Option columns is empty\");r=t.columns}void 0!==t.escapeChar&&(a=t.escapeChar+s),t.escapeFormulae instanceof RegExp?o=t.escapeFormulae:\"boolean\"==typeof t.escapeFormulae&&t.escapeFormulae&&(o=/^[=+\\-@\\t\\r].*$/)}})(),new RegExp(P(s),\"g\"));\"string\"==typeof e&&(e=JSON.parse(e));if(Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return u(null,e,i);if(\"object\"==typeof e[0])return u(r||Object.keys(e[0]),e,i)}else if(\"object\"==typeof e)return\"string\"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||r),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:\"object\"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||\"object\"==typeof e.data[0]||(e.data=[e.data])),u(e.fields||[],e.data||[],i);throw new Error(\"Unable to serialize unrecognized input\");function u(e,t,i){var r=\"\",n=(\"string\"==typeof e&&(e=JSON.parse(e)),\"string\"==typeof t&&(t=JSON.parse(t)),Array.isArray(e)&&0<e.length),s=!Array.isArray(t[0]);if(n&&_){for(var a=0;a<e.length;a++)0<a&&(r+=m),r+=k(e[a],a);0<t.length&&(r+=y)}for(var o=0;o<t.length;o++){var h=(n?e:t[o]).length,u=!1,d=n?0===Object.keys(t[o]).length:0===t[o].length;if(i&&!n&&(u=\"greedy\"===i?\"\"===t[o].join(\"\").trim():1===t[o].length&&0===t[o][0].length),\"greedy\"===i&&n){for(var f=[],l=0;l<h;l++){var c=s?e[l]:l;f.push(t[o][c])}u=\"\"===f.join(\"\").trim()}if(!u){for(var p=0;p<h;p++){0<p&&!d&&(r+=m);var g=n&&s?e[p]:p;r+=k(t[o][g],p)}o<t.length-1&&(!i||0<h&&!d)&&(r+=y)}}return r}function k(e,t){var i,r;return null==e?\"\":e.constructor===Date?JSON.stringify(e).slice(1,25):(r=!1,o&&\"string\"==typeof e&&o.test(e)&&(e=\"'\"+e,r=!0),i=e.toString().replace(h,a),(r=r||!0===n||\"function\"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||((e,t)=>{for(var i=0;i<t.length;i++)if(-1<e.indexOf(t[i]))return!0;return!1})(i,v.BAD_DELIMITERS)||-1<i.indexOf(m)||\" \"===i.charAt(0)||\" \"===i.charAt(i.length-1))?s+i+s:i)}},v.RECORD_SEP=String.fromCharCode(30),v.UNIT_SEP=String.fromCharCode(31),v.BYTE_ORDER_MARK=\"\\ufeff\",v.BAD_DELIMITERS=[\"\\r\",\"\\n\",'\"',v.BYTE_ORDER_MARK],v.WORKERS_SUPPORTED=!s&&!!n.Worker,v.NODE_STREAM_INPUT=1,v.LocalChunkSize=10485760,v.RemoteChunkSize=5242880,v.DefaultDelimiter=\",\",v.Parser=E,v.ParserHandle=i,v.NetworkStreamer=f,v.FileStreamer=l,v.StringStreamer=c,v.ReadableStreamStreamer=p,n.jQuery&&((d=n.jQuery).fn.parse=function(o){var i=o.config||{},h=[];return this.each(function(e){if(!(\"INPUT\"===d(this).prop(\"tagName\").toUpperCase()&&\"file\"===d(this).attr(\"type\").toLowerCase()&&n.FileReader)||!this.files||0===this.files.length)return!0;for(var t=0;t<this.files.length;t++)h.push({file:this.files[t],inputElem:this,instanceConfig:d.extend({},i)})}),e(),this;function e(){if(0===h.length)U(o.complete)&&o.complete();else{var e,t,i,r,n=h[0];if(U(o.before)){var s=o.before(n.file,n.inputElem);if(\"object\"==typeof s){if(\"abort\"===s.action)return e=\"AbortError\",t=n.file,i=n.inputElem,r=s.reason,void(U(o.error)&&o.error({name:e},t,i,r));if(\"skip\"===s.action)return void u();\"object\"==typeof s.config&&(n.instanceConfig=d.extend(n.instanceConfig,s.config))}else if(\"skip\"===s)return void u()}var a=n.instanceConfig.complete;n.instanceConfig.complete=function(e){U(a)&&a(e,n.file,n.inputElem),u()},v.parse(n.file,n.instanceConfig)}}function u(){h.splice(0,1),e()}}),a&&(n.onmessage=function(e){e=e.data;void 0===v.WORKER_ID&&e&&(v.WORKER_ID=e.workerId);\"string\"==typeof e.input?n.postMessage({workerId:v.WORKER_ID,results:v.parse(e.input,e.config),finished:!0}):(n.File&&e.input instanceof File||e.input instanceof Object)&&(e=v.parse(e.input,e.config))&&n.postMessage({workerId:v.WORKER_ID,results:e,finished:!0})}),(f.prototype=Object.create(u.prototype)).constructor=f,(l.prototype=Object.create(u.prototype)).constructor=l,(c.prototype=Object.create(c.prototype)).constructor=c,(p.prototype=Object.create(u.prototype)).constructor=p,v});","/**\r\n * WordPress dependencies\r\n */\r\nimport { useDispatch } from \"@wordpress/data\";\r\nimport { store as noticesStore } from \"@wordpress/notices\";\r\nimport { Button } from \"@wordpress/components\";\r\nimport { useCopyToClipboard } from '@wordpress/compose';\r\n\r\n/**\r\n * Displays a copy link.\r\n */\r\nexport const CopyAction = ( { value, onClick = () => {}, as = Button, ...props } ) => {\r\n\r\n    const { createInfoNotice } = useDispatch( noticesStore );\r\n\r\n    const ref = useCopyToClipboard(\r\n        value,\r\n        () => {\r\n            createInfoNotice(\r\n                'Copied to clipboard.',\r\n                {\r\n                    type: 'snackbar',\r\n                }\r\n            );\r\n            onClick?.();\r\n        }\r\n    );\r\n\r\n    const Component = as || Button;\r\n\r\n    return (\r\n        <Component label=\"Click to copy\" ref={ ref } showTooltip { ...props } />\r\n    );\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport React, { useState } from \"react\";\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n    Button,\r\n    Modal,\r\n} from \"@wordpress/components\";\r\nimport { trash } from \"@wordpress/icons\";\r\n\r\n/**\r\n * Local dependencies\r\n */\r\nimport { DeleteModal } from \"../routes/view-record/overview/action-buttons/delete\";\r\n\r\n/**\r\n * Displays a delete action.\r\n */\r\nexport const DeleteAction = ( { as = Button, onClick = () => {}, ...props } ) => {\r\n\r\n    // Prepare the state.\r\n    const [ isModalOpen, setIsModalOpen ] = useState( false );\r\n\r\n    const Component = as || Button;\r\n    const onClose = () => {\r\n        setIsModalOpen( false );\r\n        onClick?.();\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Component isDestructive onClick={ () => setIsModalOpen( true ) } icon={ trash } { ...props } />\r\n            { isModalOpen && (\r\n                <Modal\r\n                    title={ props.label || props.text }\r\n                    onRequestClose={ onClose }\r\n                >\r\n                    <DeleteModal\r\n                        { ...props }\r\n                        closeModal={ onClose }\r\n                    />\r\n                </Modal>\r\n            ) }\r\n        </>\r\n    );\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport React, { useCallback } from \"react\";\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\nimport {\r\n    Button,\r\n    Spinner,\r\n} from \"@wordpress/components\";\r\n\r\n/**\r\n * HizzleWP dependencies\r\n */\r\nimport { store as hizzleStore } from '@hizzlewp/store';\r\n\r\n/**\r\n * Displays a remote action link.\r\n *\r\n * @param {Object} props\r\n */\r\nexport const RemoteAction = ( { children = null, actionName, as = Button, namespace, collection, id, onClick, ...props } ) => {\r\n\r\n    // Prepare the state.\r\n    const { doRemoteCollectionRecordAction } = useDispatch( hizzleStore );\r\n    const { createSuccessNotice, createErrorNotice } = useDispatch( noticesStore );\r\n\r\n    const isDoingRemoteAction = useSelect(\r\n        ( select ) => {\r\n\r\n            return select( hizzleStore ).isDoingRemoteCollectionRecordAction(\r\n                namespace,\r\n                collection,\r\n                id,\r\n                actionName,\r\n            );\r\n        },\r\n        [ namespace, collection, actionName, id ]\r\n    );\r\n\r\n    // A function to do a remote action.\r\n    const onDoAction = useCallback( ( e ) => {\r\n\r\n        e?.preventDefault();\r\n\r\n        // Do once.\r\n        if ( isDoingRemoteAction ) {\r\n            return;\r\n        }\r\n\r\n        doRemoteCollectionRecordAction( namespace, collection, id, actionName )\r\n            .then( ( res ) => {\r\n                createSuccessNotice(\r\n                    res?.message,\r\n                    {\r\n                        type: 'snackbar',\r\n                    }\r\n                );\r\n                onClick?.();\r\n            } )\r\n            .catch( ( error ) => {\r\n                createErrorNotice(\r\n                    error.message,\r\n                    {\r\n                        isDismissible: true,\r\n                        type: 'default',\r\n                    }\r\n                );\r\n\r\n                // Scroll to the top of the page after saving\r\n                const mainContent = document.getElementById( 'hizzlewp-collection__main-content' );\r\n                if ( mainContent ) {\r\n                    mainContent.parentElement?.scrollTo( {\r\n                        top: 0,\r\n                        behavior: 'smooth'\r\n                    } );\r\n                }\r\n            } );\r\n    }, [ doRemoteCollectionRecordAction, createSuccessNotice, createErrorNotice, namespace, collection, actionName, id ] );\r\n\r\n    const Component = as || Button;\r\n    return (\r\n        <Component onClick={ onDoAction } { ...props }>\r\n            { children }\r\n            { isDoingRemoteAction && <Spinner /> }\r\n        </Component>\r\n    )\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport React, { useMemo } from \"react\";\r\n\r\n/**\r\n * HizzleWP dependencies.\r\n */\r\nimport { ErrorBoundary } from '@hizzlewp/components';\r\nimport { Router } from '@hizzlewp/history';\r\n\r\n/**\r\n * Internal dependencies.\r\n */\r\nimport { Main } from \"./routes/main\";\r\nimport { RecordsTable } from \"./routes/records-table\";\r\nimport { CreateRecord } from \"./routes/create-record\";\r\nimport { ViewRecord, RecordOverview, TabContent } from \"./routes/view-record\";\r\nimport { Import } from \"./routes/import\";\r\n\r\n/**\r\n * Displays a single collection.\r\n *\r\n * @param {Object} props\r\n * @param {string} props.defaultNamespace The default namespace.\r\n * @param {string} props.defaultCollection The default collection.\r\n */\r\nexport const Collection = ( { defaultNamespace, defaultCollection }: { defaultNamespace: string, defaultCollection: string } ) => {\r\n\r\n\t// Define routes\r\n\tconst routes = useMemo( () => {\r\n\t\treturn [\r\n\t\t\t{\r\n\t\t\t\tpath: '/:namespace/:collection',\r\n\t\t\t\telement: (\r\n\t\t\t\t\t<ErrorBoundary>\r\n\t\t\t\t\t\t<Main defaultNamespace={ defaultNamespace } defaultCollection={ defaultCollection } />\r\n\t\t\t\t\t</ErrorBoundary>\r\n\t\t\t\t),\r\n\t\t\t\tindex: (\r\n\t\t\t\t\t<ErrorBoundary>\r\n\t\t\t\t\t\t<RecordsTable />\r\n\t\t\t\t\t</ErrorBoundary>\r\n\t\t\t\t),\r\n\t\t\t\tchildren: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpath: '/:namespace/:collection/add',\r\n\t\t\t\t\t\telement: (\r\n\t\t\t\t\t\t\t<ErrorBoundary>\r\n\t\t\t\t\t\t\t\t<CreateRecord />\r\n\t\t\t\t\t\t\t</ErrorBoundary>\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpath: '/:namespace/:collection/import',\r\n\t\t\t\t\t\telement: (\r\n\t\t\t\t\t\t\t<ErrorBoundary>\r\n\t\t\t\t\t\t\t\t<Import />\r\n\t\t\t\t\t\t\t</ErrorBoundary>\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpath: '/:namespace/:collection/:recordId',\r\n\t\t\t\t\t\telement: (\r\n\t\t\t\t\t\t\t<ErrorBoundary>\r\n\t\t\t\t\t\t\t\t<ViewRecord />\r\n\t\t\t\t\t\t\t</ErrorBoundary>\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tindex: (\r\n\t\t\t\t\t\t\t<ErrorBoundary>\r\n\t\t\t\t\t\t\t\t<RecordOverview />\r\n\t\t\t\t\t\t\t</ErrorBoundary>\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\tchildren: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tpath: '/:namespace/:collection/:recordId/:tab',\r\n\t\t\t\t\t\t\t\telement: (\r\n\t\t\t\t\t\t\t\t\t<ErrorBoundary>\r\n\t\t\t\t\t\t\t\t\t\t<TabContent />\r\n\t\t\t\t\t\t\t\t\t</ErrorBoundary>\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t];\r\n\t}, [ defaultNamespace, defaultCollection ] );\r\n\r\n\treturn (\r\n\t\t<ErrorBoundary>\r\n\t\t\t<Router basePath={ `/${ defaultNamespace }/${ defaultCollection }` } routes={ routes } />\r\n\t\t</ErrorBoundary>\r\n\t);\r\n};\r\n","/**\r\n * External dependencies\r\n */\r\nimport React, { useMemo } from \"react\";\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tSpinner,\r\n\tTip,\r\n\tAnimate,\r\n\tSlot,\r\n\tButton,\r\n\t__experimentalVStack as VStack,\r\n} from \"@wordpress/components\";\r\nimport { __ } from \"@wordpress/i18n\";\r\nimport {\r\n\tuseShortcut,\r\n} from '@wordpress/keyboard-shortcuts';\r\n\r\n/**\r\n * HizzleWP dependencies\r\n */\r\nimport { Setting, ErrorBoundary } from '@hizzlewp/components';\r\nimport type { RecordProp } from '@hizzlewp/store/build-types/types';\r\nimport { prepareField } from \"./routes/records-table/filters\";\r\n\r\nconst MaybeAnimate = ( { children, loading }: { children: React.ReactNode, loading: boolean } ) => {\r\n\r\n\tif ( loading ) {\r\n\t\treturn (\r\n\t\t\t<Animate type=\"loading\">{\r\n\t\t\t\t( { className } ) => (\r\n\t\t\t\t\t<div className={ className } style={ { cursor: 'wait' } }>\r\n\t\t\t\t\t\t{ children }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t)\r\n\t\t\t}</Animate>\r\n\t\t);\r\n\t}\r\n\r\n\treturn children;\r\n};\r\n\r\ntype EditRecordFormProps = {\r\n\trecord: Record<string, any>;\r\n\tonChange: ( value: any ) => void;\r\n\tschema: RecordProp[];\r\n\thidden: string[];\r\n\tignore: string[];\r\n\tonSubmit: ( e?: React.FormEvent<HTMLFormElement> | React.MouseEvent<HTMLButtonElement> | React.MouseEvent<HTMLAnchorElement> ) => void;\r\n\tloading: boolean;\r\n\tslotName: string;\r\n\tsubmitText: string;\r\n\textraSettings?: Record<string, any>;\r\n};\r\n\r\nexport const EditRecordForm = ( { record, onChange, schema, hidden, ignore, onSubmit, loading, slotName, submitText, extraSettings }: EditRecordFormProps ) => {\r\n\r\n\t// Prepare form fields.\r\n\tconst fields = useMemo( () => {\r\n\t\tlet prepared = prepareEditableRecordFields( schema, hidden, ignore );\r\n\r\n\t\tif ( extraSettings ) {\r\n\t\t\tObject.entries( extraSettings ).forEach( ( [ key, { prop_pos, ...setting } ] ) => {\r\n\t\t\t\tsetting.name = key;\r\n\r\n\t\t\t\tif ( ! prop_pos || ! prepared.find( field => field.name === prop_pos ) ) {\r\n\t\t\t\t\tprepared.push( setting );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst index = prepared.findIndex( field => field.name === prop_pos );\r\n\t\t\t\t\tprepared.splice( index + 1, 0, setting );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\treturn prepared;\r\n\t}, [ schema, hidden, ignore, extraSettings ] );\r\n\r\n\t// Handle the save shortcut.\r\n\tuseShortcut( 'hizzlewp/save-record', ( e: React.KeyboardEvent<HTMLFormElement> ) => {\r\n\t\te?.preventDefault();\r\n\t\tonSubmit();\r\n\t} );\r\n\r\n\treturn (\r\n\t\t<MaybeAnimate loading={ loading }>\r\n\t\t\t<VStack as=\"form\" spacing={ 6 } style={ { pointerEvents: loading ? 'none' : 'auto' } } onSubmit={ onSubmit }>\r\n\r\n\t\t\t\t{ fields.map( ( field ) => (\r\n\t\t\t\t\t<ErrorBoundary key={ field.name }>\r\n\t\t\t\t\t\t<Setting\r\n\t\t\t\t\t\t\tsettingKey={ field.name }\r\n\t\t\t\t\t\t\tsaved={ record }\r\n\t\t\t\t\t\t\tsetAttributes={ onChange }\r\n\t\t\t\t\t\t\tsetting={ field }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</ErrorBoundary>\r\n\t\t\t\t) ) }\r\n\r\n\t\t\t\t{ slotName && (\r\n\t\t\t\t\t<Slot name={ slotName }>\r\n\t\t\t\t\t\t{ ( fills ) => (\r\n\t\t\t\t\t\t\tArray.isArray( fills ) ?\r\n\t\t\t\t\t\t\t\tfills.map( ( fill, index ) => (\r\n\t\t\t\t\t\t\t\t\t<Tip key={ index }>{ fill }</Tip>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t) : fills\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t</Slot>\r\n\t\t\t\t) }\r\n\r\n\t\t\t\t<Button className=\"hizzlewp-block-button\" variant=\"primary\" onClick={ onSubmit } isBusy={ loading }>\r\n\t\t\t\t\t{ loading ? <Spinner /> : submitText }\r\n\t\t\t\t</Button>\r\n\t\t\t</VStack>\r\n\t\t</MaybeAnimate>\r\n\t);\r\n}\r\n\r\nexport const prepareEditableRecordFields = ( schema: RecordProp[], hidden: string[], ignore: string[] ) => (\r\n\tschema.map( ( field ) => {\r\n\r\n\t\t// Abort for readonly and dynamic fields.\r\n\t\tif ( field.readonly || field.is_dynamic || 'metadata' === field.name ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t// Abort for hidden fields...\r\n\t\tif ( Array.isArray( hidden ) && hidden.includes( field.name ) ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\t// ... and fields to ignore.\r\n\t\tif ( Array.isArray( ignore ) && ignore.includes( field.name ) ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\treturn prepareField( field );\r\n\t} ).filter( item => !!item )\r\n);\r\n","/**\r\n * External dependencies\r\n */\r\nimport React, { useMemo } from 'react';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from '@wordpress/i18n';\r\nimport { __experimentalVStack as VStack } from '@wordpress/components';\r\nimport { addQueryArgs } from '@wordpress/url';\r\n\r\n/**\r\n * HizzleWP dependencies.\r\n */\r\nimport { Interface, Header } from '@hizzlewp/interface';\r\nimport { ErrorBoundary } from '@hizzlewp/components';\r\nimport { usePath, getHistory } from '@hizzlewp/history';\r\n\r\n/**\r\n * Local dependancies.\r\n */\r\nimport { EditorNotices, EditorSnackbars } from './notices';\r\nimport { Collection } from './collection';\r\n\r\n/**\r\n * Highlights the corresponding WordPress admin menu item\r\n * @param {string} href The URL to navigate to\r\n */\r\nconst highlightAdminMenuItem = ( href ) => {\r\n\t// Extract the page parameter from the URL\r\n\tconst urlParams = new URLSearchParams( href.split( '?' )[ 1 ] || '' );\r\n\tconst page = urlParams.get( 'page' );\r\n\r\n\tif ( !page ) return;\r\n\r\n\t// Find and highlight the corresponding admin menu item\r\n\tsetTimeout( () => {\r\n\t\tconst adminMenuItems = document.querySelectorAll( '#adminmenu a' );\r\n\t\tadminMenuItems.forEach( ( menuItem ) => {\r\n\t\t\tconst menuItemHref = menuItem.getAttribute( 'href' );\r\n\t\t\tif ( menuItemHref && menuItemHref.includes( `page=${ page }` ) ) {\r\n\t\t\t\t// Remove current class from all items\r\n\t\t\t\tdocument.querySelectorAll( '#adminmenu .current' ).forEach( el =>\r\n\t\t\t\t\tel.classList.remove( 'current' ) );\r\n\r\n\t\t\t\t// Find parent li and add appropriate classes\r\n\t\t\t\tconst parentLi = menuItem.closest( 'li' );\r\n\t\t\t\tif ( parentLi ) {\r\n\t\t\t\t\tparentLi.classList.add( 'current' );\r\n\r\n\t\t\t\t\t// If it's a submenu item, highlight parent too\r\n\t\t\t\t\tconst topLevelParent = parentLi.closest( '.wp-has-submenu' );\r\n\t\t\t\t\tif ( topLevelParent ) {\r\n\t\t\t\t\t\ttopLevelParent.classList.add( 'wp-has-current-submenu' );\r\n\t\t\t\t\t\ttopLevelParent.classList.add( 'wp-menu-open' );\r\n\t\t\t\t\t\ttopLevelParent.classList.remove( 'wp-not-current-submenu' );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Add current class to the link\r\n\t\t\t\tmenuItem.classList.add( 'current' );\r\n\t\t\t\tmenuItem.setAttribute( 'aria-current', 'page' );\r\n\t\t\t}\r\n\t\t} );\r\n\t}, 0 );\r\n};\r\n\r\nconst TheHeader = ( props ) => {\r\n\r\n\tconst path = usePath();\r\n\tconst brand = useMemo( () => {\r\n\r\n\t\tif ( !props.brand?.menu ) {\r\n\t\t\treturn props.brand;\r\n\t\t}\r\n\r\n\t\tconst currentPath = props.brand.menu.find( ( item ) => item.updatePath && path && path.startsWith( item.updatePath ) );\r\n\r\n\t\treturn {\r\n\t\t\t...props.brand,\r\n\t\t\tmenu: props.brand.menu.map( ( { updatePath, href, ...item } ) => (\r\n\t\t\t\t{\r\n\t\t\t\t\t...item,\r\n\t\t\t\t\thref: updatePath ? undefined : href,\r\n\t\t\t\t\tonClick: updatePath ? () => {\r\n\t\t\t\t\t\t// Navigate to the URL\r\n\t\t\t\t\t\tgetHistory().push( addQueryArgs( href, { hizzlewp_path: updatePath } ) );\r\n\r\n\t\t\t\t\t\t// Highlight the corresponding WordPress admin menu item\r\n\t\t\t\t\t\thighlightAdminMenuItem( href );\r\n\t\t\t\t\t} : undefined,\r\n\t\t\t\t\tisPressed: currentPath ? currentPath.updatePath === updatePath : item.isPressed,\r\n\t\t\t\t}\r\n\t\t\t) ),\r\n\t\t}\r\n\t}, [ props.brand, path ] );\r\n\r\n\treturn (\r\n\t\t<ErrorBoundary>\r\n\t\t\t<Header { ...props } brand={ brand } />\r\n\t\t</ErrorBoundary>\r\n\t);\r\n}\r\n\r\nexport default function Layout( { defaultNamespace, defaultCollection, ...props } ): React.ReactNode {\r\n\r\n\tconst theContent = useMemo( () => {\r\n\t\treturn (\r\n\t\t\t<VStack id=\"hizzlewp-collection__main-content\" spacing={ 4 } style={ { padding: 20 } }>\r\n\t\t\t\t<ErrorBoundary>\r\n\t\t\t\t\t<EditorSnackbars />\r\n\t\t\t\t</ErrorBoundary>\r\n\t\t\t\t<ErrorBoundary>\r\n\t\t\t\t\t<EditorNotices />\r\n\t\t\t\t</ErrorBoundary>\r\n\t\t\t\t<ErrorBoundary>\r\n\t\t\t\t\t<Collection defaultNamespace={ defaultNamespace } defaultCollection={ defaultCollection } />\r\n\t\t\t\t</ErrorBoundary>\r\n\t\t\t</VStack>\r\n\t\t);\r\n\t}, [ defaultNamespace, defaultCollection ] );\r\n\r\n\treturn (\r\n\t\t<Interface\r\n\t\t\tclassName=\"hizzlewp-settings__interface\"\r\n\t\t\theader={ <TheHeader { ...props } /> }\r\n\t\t\tcontent={ theContent }\r\n\t\t/>\r\n\t);\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport React from 'react';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { NoticeList, SnackbarList } from '@wordpress/components';\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\n\r\nexport function EditorNotices() {\r\n\tconst { notices } = useSelect(\r\n\t\t( select ) => ( {\r\n\t\t\tnotices: select( noticesStore ).getNotices(),\r\n\t\t} ),\r\n\t\t[]\r\n\t);\r\n\tconst { removeNotice } = useDispatch( noticesStore );\r\n\tconst dismissibleNotices = notices.filter(\r\n\t\t( { isDismissible, type } ) => isDismissible && type === 'default'\r\n\t);\r\n\tconst nonDismissibleNotices = notices.filter(\r\n\t\t( { isDismissible, type } ) => ! isDismissible && type === 'default'\r\n\t);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<NoticeList\r\n\t\t\t\tnotices={ nonDismissibleNotices }\r\n\t\t\t\tclassName=\"components-editor-notices__pinned\"\r\n\t\t\t/>\r\n\t\t\t<NoticeList\r\n\t\t\t\tnotices={ dismissibleNotices }\r\n\t\t\t\tclassName=\"components-editor-notices__dismissible\"\r\n\t\t\t\tonRemove={ removeNotice }\r\n\t\t\t>\r\n\t\t\t</NoticeList>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\n// Last three notices. Slices from the tail end of the list.\r\nconst MAX_VISIBLE_NOTICES = -3;\r\nexport function EditorSnackbars() {\r\n\tconst notices = useSelect(\r\n\t\t( select ) => select( noticesStore ).getNotices(),\r\n\t\t[]\r\n\t);\r\n\tconst { removeNotice } = useDispatch( noticesStore );\r\n\tconst snackbarNotices = notices\r\n\t\t.filter( ( { type } ) => type === 'snackbar' )\r\n\t\t.slice( MAX_VISIBLE_NOTICES );\r\n\r\n\treturn (\r\n\t\t<SnackbarList\r\n\t\t\tnotices={ snackbarNotices }\r\n\t\t\tclassName=\"components-editor-notices__snackbar\"\r\n\t\t\tonRemove={ removeNotice }\r\n\t\t/>\r\n\t);\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport React, { useState, useCallback, useMemo } from \"react\";\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tFill,\r\n\tFlexItem,\r\n\tSlot,\r\n\tCardBody,\r\n\t__experimentalHStack as HStack,\r\n\t__experimentalHeading as Heading,\r\n} from \"@wordpress/components\";\r\nimport { __ } from \"@wordpress/i18n\";\r\nimport { useDispatch } from \"@wordpress/data\";\r\nimport { store as noticesStore } from '@wordpress/notices';\r\n\r\n/**\r\n * HizzleWP dependencies\r\n */\r\nimport { ErrorBoundary } from '@hizzlewp/components';\r\nimport { updatePath } from '@hizzlewp/history';\r\nimport { store as hizzleStore, useProvidedCollectionConfig } from '@hizzlewp/store';\r\n\r\n/**\r\n * Local dependancies.\r\n */\r\nimport { EditRecordForm } from \"../edit-record-form\";\r\n\r\n/**\r\n * Displays the record creation form.\r\n *\r\n */\r\nconst CreateRecordForm: React.FC = () => {\r\n\r\n\t// Prepare the state.\r\n\tconst { config: { namespace, collection, props, hidden, ignore, defaultProps, labels, settings } } = useProvidedCollectionConfig() || {};\r\n\tconst { saveCollectionRecord } = useDispatch( hizzleStore );\r\n\tconst [ loading, setLoading ] = useState( false );\r\n\tconst [ record, setRecord ] = useState( {} );\r\n\tconst newIgnore = useMemo( () => [ ...ignore, ...Object.keys( defaultProps || {} ) ], [ ignore, defaultProps ] );\r\n\tconst { createErrorNotice, createSuccessNotice, removeAllNotices } = useDispatch( noticesStore );\r\n\r\n\t// A function to create a new record.\r\n\tconst handleSubmit = useCallback( ( e?: React.FormEvent<HTMLFormElement> | React.MouseEvent<HTMLButtonElement> | React.MouseEvent<HTMLAnchorElement> ) => {\r\n\r\n\t\te?.preventDefault();\r\n\r\n\t\t// Save once.\r\n\t\tif ( loading ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tremoveAllNotices();\r\n\t\tsetLoading( true );\r\n\r\n\t\tsaveCollectionRecord( namespace, collection, { ...record, ...defaultProps }, { throwOnError: true } )\r\n\t\t\t.then( ( { id } ) => {\r\n\t\t\t\tcreateSuccessNotice(\r\n\t\t\t\t\t__( 'Record saved successfully.', 'newsletter-optin-box' ),\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tisDismissible: true,\r\n\t\t\t\t\t\ttype: 'snackbar',\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\r\n\t\t\t\tupdatePath( `/${ namespace }/${ collection }/${ id }` );\r\n\t\t\t} )\r\n\t\t\t.catch( ( error ) => {\r\n\t\t\t\tcreateErrorNotice(\r\n\t\t\t\t\terror.message,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tisDismissible: true,\r\n\t\t\t\t\t\ttype: 'default',\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// Scroll to the top of the page after saving\r\n\t\t\t\tconst mainContent = document.getElementById( 'hizzlewp-collection__main-content' );\r\n\t\t\t\tif ( mainContent ) {\r\n\t\t\t\t\tmainContent.parentElement?.scrollTo( {\r\n\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\tbehavior: 'smooth'\r\n\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\t\t\t} )\r\n\t\t\t.finally( () => {\r\n\t\t\t\tsetLoading( false );\r\n\t\t\t} );\r\n\t}, [ record, defaultProps, namespace, collection, saveCollectionRecord, createErrorNotice, createSuccessNotice, removeAllNotices ] );\r\n\r\n\t// Display the add record form.\r\n\treturn (\r\n\t\t<EditRecordForm\r\n\t\t\trecord={ record }\r\n\t\t\tonChange={ ( newProps ) => setRecord( { ...record, ...newProps } ) }\r\n\t\t\tonSubmit={ handleSubmit }\r\n\t\t\tsubmitText={ labels?.save_item || 'Save' }\r\n\t\t\tschema={ props }\r\n\t\t\thidden={ hidden }\r\n\t\t\tignore={ newIgnore }\r\n\t\t\tloading={ loading }\r\n\t\t\tslotName={ `${ namespace }_${ collection }_record_create_below` }\r\n\t\t\textraSettings={ settings }\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport const SectionWithErrorBoundary: React.FC<{ children: React.ReactNode }> = ( { children } ) => {\r\n\treturn (\r\n\t\t<FlexItem style={ { width: 400, maxWidth: '100%' } }>\r\n\t\t\t<ErrorBoundary>\r\n\t\t\t\t{ children }\r\n\t\t\t</ErrorBoundary>\r\n\t\t</FlexItem>\r\n\t);\r\n};\r\n\r\n/**\r\n * Allows the user to create new records.\r\n *\r\n */\r\nexport const CreateRecord: React.FC = () => {\r\n\r\n\tconst { config: { namespace, collection, labels } } = useProvidedCollectionConfig() || {};\r\n\r\n\t// Display the add record form.\r\n\treturn (\r\n\t\t<CardBody>\r\n\t\t\t<HStack alignment=\"flex-start\" justify=\"space-between\" wrap>\r\n\t\t\t\t<Fill name={ `/${ namespace }/${ collection }/title` }>\r\n\t\t\t\t\t<Heading level={ 1 } size={ 16 } truncate>\r\n\t\t\t\t\t\t{ labels?.add_new_item || 'Add New Item' }\r\n\t\t\t\t\t</Heading>\r\n\t\t\t\t</Fill>\r\n\t\t\t\t<SectionWithErrorBoundary>\r\n\t\t\t\t\t<CreateRecordForm />\r\n\t\t\t\t</SectionWithErrorBoundary>\r\n\r\n\t\t\t\t<Slot name={ `${ namespace }_${ collection }_record_create_upsell` }>\r\n\t\t\t\t\t{ ( fills ) => (\r\n\t\t\t\t\t\tfills ? (\r\n\t\t\t\t\t\t\t<SectionWithErrorBoundary>\r\n\t\t\t\t\t\t\t\t{ fills }\r\n\t\t\t\t\t\t\t</SectionWithErrorBoundary>\r\n\t\t\t\t\t\t) : null\r\n\t\t\t\t\t) }\r\n\t\t\t\t</Slot>\r\n\t\t\t</HStack>\r\n\t\t</CardBody>\r\n\t);\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport React, { useState } from 'react';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { MapHeaders, MappedHeaders } from './map-headers';\r\nimport { Progress } from './progress';\r\n\r\nexport const ImportFile = ( { file, back }: { file: File, back: () => void } ) => {\r\n    const [ mappedHeaders, setMappedHeaders ] = useState<MappedHeaders>();\r\n    const [ updateRecords, setUpdateRecords ] = useState( false );\r\n\r\n    // If we have no headers, map them.\r\n    if ( !mappedHeaders ) {\r\n        return (\r\n            <MapHeaders\r\n                file={ file }\r\n                back={ back }\r\n                onContinue={ ( headers, update ) => {\r\n                    setMappedHeaders( headers );\r\n                    setUpdateRecords( update );\r\n\r\n                    // Scroll to the top.\r\n                    window.scrollTo( { top: 0, behavior: 'smooth' } );\r\n                } }\r\n            />\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Progress\r\n            file={ file }\r\n            headers={ mappedHeaders }\r\n            back={ back }\r\n            updateRecords={ updateRecords }\r\n        />\r\n    );\r\n};\r\n","/**\r\n * External dependencies\r\n */\r\nimport React, { useState } from \"react\";\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n    Fill,\r\n    CardBody,\r\n    __experimentalHStack as HStack,\r\n    __experimentalHeading as Heading,\r\n} from \"@wordpress/components\";\r\nimport { __ } from \"@wordpress/i18n\";\r\n\r\n/**\r\n * HizzleWP dependencies\r\n */\r\nimport { useProvidedCollectionConfig } from '@hizzlewp/store';\r\nimport { ErrorBoundary } from \"@hizzlewp/components\";\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { SelectFile } from \"./select-file\";\r\nimport { ImportFile } from \"./import-file\";\r\n\r\n/**\r\n * Allows the user to import new records.\r\n *\r\n */\r\nexport const Import: React.FC = () => {\r\n\r\n    const { config: { namespace, collection, labels } } = useProvidedCollectionConfig() || {};\r\n\r\n    const [ file, setFile ] = useState<File | null>( null );\r\n\r\n    // Display the add record form.\r\n    return (\r\n        <CardBody>\r\n            <Fill name={ `/${ namespace }/${ collection }/title` }>\r\n                <Heading level={ 1 } size={ 16 } truncate>\r\n                    { labels?.import || 'Import' }\r\n                </Heading>\r\n            </Fill>\r\n            <ErrorBoundary>\r\n                { file ? (\r\n                    <ImportFile file={ file } back={ () => setFile( null ) } />\r\n                ) : (\r\n                    <SelectFile onUpload={ setFile } />\r\n                ) }\r\n            </ErrorBoundary>\r\n        </CardBody>\r\n    );\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport Papa from 'papaparse';\r\nimport React, { useState, useEffect, useMemo } from \"react\";\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from \"@wordpress/i18n\";\r\nimport {\r\n\tNotice,\r\n\tTip,\r\n\tTextControl,\r\n\tToggleControl,\r\n\tSelectControl,\r\n\tButton,\r\n\tSlot,\r\n\t__experimentalHStack as HStack,\r\n\t__experimentalVStack as VStack,\r\n} from \"@wordpress/components\";\r\n\r\n/**\r\n * HizzleWP dependencies\r\n */\r\nimport { useProvidedCollectionConfig } from '@hizzlewp/store';\r\nimport { useOptions } from '@hizzlewp/components';\r\n\r\n/**\r\n * Normalizes a string to make it possible to guess the header.\r\n *\r\n * @param {string} string The string to normalize.\r\n * @returns {string} The normalized string.\r\n */\r\nconst normalizeString = ( string ) => {\r\n\r\n\t// Strip all non-alphanumeric characters.\r\n\tstring = string.replace( /[^a-zA-Z0-9]/g, '' );\r\n\r\n\t// Convert to lowercase.\r\n\tstring = string.toLowerCase();\r\n\r\n\t// If begins with cf_ or meta_, remove it.\r\n\tif ( string.startsWith( 'cf' ) ) {\r\n\t\tstring = string.slice( 2 );\r\n\t}\r\n\r\n\tif ( string.startsWith( 'meta' ) ) {\r\n\t\tstring = string.slice( 4 );\r\n\t}\r\n\r\n\treturn string;\r\n}\r\n\r\n/**\r\n * Allows the user to map a single header.\r\n *\r\n * @param {Object} props\r\n * @param {Array} props.options The available options.\r\n * @param {Object} props.field The field.\r\n * @param {string} props.value The current value.\r\n * @param {Function} props.setValue The function to set the value.\r\n * @param {string} props.customValue The current custom value.\r\n * @param {Function} props.setCustomValue The function to set the custom value.\r\n */\r\nconst MapHeader = ( { options, fieldOptions, fieldLabel, value, setValue, customValue, setCustomValue } ) => {\r\n\r\n\tconst preparedOptions = useOptions( fieldOptions );\r\n\r\n\treturn (\r\n\t\t<HStack spacing={ 4 } justify=\"flex-start\" wrap >\r\n\r\n\t\t\t<SelectControl\r\n\t\t\t\tlabel={ fieldLabel }\r\n\t\t\t\tvalue={ value }\r\n\t\t\t\tonChange={ setValue }\r\n\t\t\t\toptions={ options }\r\n\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\tstyle={ { width: '320px', maxWidth: '100%' } }\r\n\t\t\t/>\r\n\r\n\t\t\t{ '-1' === value && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t{ preparedOptions.length > 0 ? (\r\n\t\t\t\t\t\t<SelectControl\r\n\t\t\t\t\t\t\tlabel={ __( 'Select value', 'newsletter-optin-box' ) }\r\n\t\t\t\t\t\t\tvalue={ customValue }\r\n\t\t\t\t\t\t\tonChange={ setCustomValue }\r\n\t\t\t\t\t\t\toptions={ [\r\n\t\t\t\t\t\t\t\t{ value: '', label: __( 'Select value', 'newsletter-optin-box' ), disabled: true },\r\n\t\t\t\t\t\t\t\t...preparedOptions ]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\t\tstyle={ { width: '320px', maxWidth: '100%' } }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<TextControl\r\n\t\t\t\t\t\t\tlabel={ __( 'Enter value', 'newsletter-optin-box' ) }\r\n\t\t\t\t\t\t\tplaceholder={ __( 'Enter a value to assign all imported records', 'newsletter-optin-box' ) }\r\n\t\t\t\t\t\t\tvalue={ customValue }\r\n\t\t\t\t\t\t\tonChange={ setCustomValue }\r\n\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t\t\t\t\tstyle={ { width: '320px', maxWidth: '100%' } }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</>\r\n\t\t\t) }\r\n\r\n\t\t</HStack>\r\n\t);\r\n}\r\n\r\nexport interface MappedHeaders {\r\n\t[ key: string ]: {\r\n\t\t/**\r\n\t\t * The value of the header.\r\n\t\t */\r\n\t\tvalue: string;\r\n\r\n\t\t/**\r\n\t\t * Whether the header is mapped.\r\n\t\t */\r\n\t\tmapped: boolean;\r\n\r\n\t\t/**\r\n\t\t * The custom value of the header.\r\n\t\t */\r\n\t\tcustomValue?: any;\r\n\r\n\t\t/**\r\n\t\t * Whether the header is a boolean.\r\n\t\t */\r\n\t\tis_boolean?: boolean;\r\n\t};\r\n}\r\n\r\n/**\r\n * Allows the user to map CSV headers to fields.\r\n *\r\n * @param {Object} props\r\n * @param {Object} props.file The file to import.\r\n * @param {Object} props.schema The schema of the collection.\r\n * @param {Array} props.ignore The fields to ignore.\r\n * @param {Array} props.hidden The fields to hide.\r\n * @param {Function} props.back The callback to call when clicking on the back button.\r\n * @param {Function} props.onContinue A callback to call when the headers are set.\r\n */\r\nexport const MapHeaders = ( { file, back, onContinue } ) => {\r\n\r\n\tconst { config: { namespace, collection, ignore, props } } = useProvidedCollectionConfig() || {};\r\n\r\n\t// Prepare state.\r\n\tconst [ fileHeaders, setFileHeaders ] = useState( [] );\r\n\tconst [ mappedHeaders, setMappedHeaders ] = useState<MappedHeaders>( {} );\r\n\tconst [ updateRecords, setUpdateRecords ] = useState( false );\r\n\tconst [ error, setError ] = useState<Error | null>( null );\r\n\r\n\t// Parse the first few lines of the file to get the headers.\r\n\tuseEffect( () => {\r\n\t\tPapa.parse( file, {\r\n\t\t\theader: true,\r\n\t\t\tskipEmptyLines: 'greedy',\r\n\t\t\tpreview: 5,\r\n\t\t\tcomplete: ( results ) => {\r\n\t\t\t\tsetFileHeaders( results.meta.fields );\r\n\t\t\t},\r\n\t\t\terror( error ) {\r\n\t\t\t\tsetError( error );\r\n\t\t\t},\r\n\t\t} );\r\n\t}, [ file ] );\r\n\r\n\t// Try guessing the headers.\r\n\tuseEffect( () => {\r\n\t\tif ( !fileHeaders.length ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst guessedHeaders = {};\r\n\r\n\t\t// Loop through the headers.\r\n\t\tfileHeaders.forEach( ( header ) => {\r\n\r\n\t\t\tconst normalizedHeader = normalizeString( header );\r\n\t\t\tlet partialMatch = false;\r\n\r\n\t\t\t// Loop through the fields.\r\n\t\t\tlet match = props.find( ( field ) => {\r\n\r\n\t\t\t\t// If the field is hidden or ignored, don't show it.\r\n\t\t\t\tif ( 'date_created' !== field.name && ( field.readonly || [ ...ignore, 'id' ].includes( field.name ) ) ) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst normalizedKey = normalizeString( field.name );\r\n\t\t\t\tconst normalizedLabel = normalizeString( field.label );\r\n\r\n\t\t\t\treturn normalizedHeader === normalizedKey || normalizedHeader === normalizedLabel;\r\n\t\t\t} );\r\n\r\n\t\t\t// If no match, check for a partial match.\r\n\t\t\tif ( !match ) {\r\n\t\t\t\tmatch = props.find( ( field ) => {\r\n\r\n\t\t\t\t\t// If the field is hidden or ignored, don't show it.\r\n\t\t\t\t\tif ( 'date_created' !== field.name && ( field.readonly || [ ...ignore, 'id' ].includes( field.name ) ) ) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst normalizedKey = normalizeString( field.name );\r\n\t\t\t\t\tconst normalizedLabel = normalizeString( field.label );\r\n\r\n\t\t\t\t\treturn normalizedHeader.includes( normalizedKey ) || normalizedHeader.includes( normalizedLabel ) || normalizedKey.includes( normalizedHeader ) || normalizedLabel.includes( normalizedHeader );\r\n\t\t\t\t} );\r\n\r\n\t\t\t\tpartialMatch = true;\r\n\t\t\t}\r\n\r\n\t\t\tif ( match && ( !partialMatch || !guessedHeaders[ match.name ] ) ) {\r\n\t\t\t\tguessedHeaders[ match.name ] = {\r\n\t\t\t\t\tmapped: true,\r\n\t\t\t\t\tvalue: header,\r\n\t\t\t\t\tis_boolean: match.is_boolean,\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t\tsetMappedHeaders( guessedHeaders );\r\n\r\n\t}, [ fileHeaders, props ] );\r\n\r\n\t// Prepare the select values.\r\n\tconst selectValues = useMemo( () => {\r\n\r\n\t\tconst values = [\r\n\t\t\t{\r\n\t\t\t\tvalue: '',\r\n\t\t\t\tlabel: __( 'Ignore Field', 'newsletter-optin-box' ),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tvalue: '-1',\r\n\t\t\t\tlabel: __( 'Manually enter value', 'newsletter-optin-box' ),\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tvalue: '-2',\r\n\t\t\t\tlabel: __( 'Map Field', 'newsletter-optin-box' ),\r\n\t\t\t\tdisabled: true,\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\tfileHeaders.forEach( header => {\r\n\t\t\tvalues.push( {\r\n\t\t\t\tvalue: header,\r\n\t\t\t\tlabel: header,\r\n\t\t\t} )\r\n\t\t} );\r\n\r\n\t\treturn values;\r\n\t}, [ fileHeaders ] );\r\n\r\n\t// If we have an error, display it.\r\n\tif ( error ) {\r\n\r\n\t\treturn (\r\n\t\t\t<Notice status=\"error\" isDismissible={ false }>\r\n\t\t\t\t<p>{ error.message }</p>\r\n\t\t\t\t<Button variant=\"link\" onClick={ back }>\r\n\t\t\t\t\t{ __( 'Try again', 'newsletter-optin-box' ) }\r\n\t\t\t\t</Button>\r\n\t\t\t</Notice>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<VStack spacing={ 4 }>\r\n\t\t\t<Tip>\r\n\t\t\t\t{ __( 'Map the headers of your CSV file to record fields.', 'newsletter-optin-box' ) }\r\n\t\t\t</Tip>\r\n\r\n\t\t\t{ props.map( ( field ) => {\r\n\t\t\t\t// If the field is hidden or ignored, don't show it.\r\n\t\t\t\tif ( 'date_created' !== field.name && ( field.readonly || [ ...ignore, 'id' ].includes( field.name ) ) ) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst header = mappedHeaders[ field.name ] || { is_boolean: field.is_boolean };\r\n\t\t\t\tconst value = header.value || '';\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<MapHeader\r\n\t\t\t\t\t\tkey={ field.name }\r\n\t\t\t\t\t\toptions={ selectValues }\r\n\t\t\t\t\t\tfieldLabel={ field.label }\r\n\t\t\t\t\t\tfieldOptions={ field.enum }\r\n\t\t\t\t\t\tvalue={ value }\r\n\t\t\t\t\t\tsetValue={ ( newValue ) => {\r\n\t\t\t\t\t\t\tsetMappedHeaders( {\r\n\t\t\t\t\t\t\t\t...mappedHeaders,\r\n\t\t\t\t\t\t\t\t[ field.name ]: {\r\n\t\t\t\t\t\t\t\t\t...header,\r\n\t\t\t\t\t\t\t\t\tmapped: !( [ '', '-1', '-2' ].includes( newValue ) ),\r\n\t\t\t\t\t\t\t\t\tvalue: newValue,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t\tcustomValue={ header.customValue || '' }\r\n\t\t\t\t\t\tsetCustomValue={ ( newValue ) => {\r\n\t\t\t\t\t\t\tsetMappedHeaders( {\r\n\t\t\t\t\t\t\t\t...mappedHeaders,\r\n\t\t\t\t\t\t\t\t[ field.name ]: {\r\n\t\t\t\t\t\t\t\t\t...header,\r\n\t\t\t\t\t\t\t\t\tcustomValue: newValue,\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t} }\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t} ) }\r\n\r\n\t\t\t<ToggleControl\r\n\t\t\t\tlabel={ __( 'Update existing records', 'newsletter-optin-box' ) }\r\n\t\t\t\tchecked={ updateRecords }\r\n\t\t\t\tonChange={ ( newValue ) => setUpdateRecords( newValue ) }\r\n\t\t\t\t__nextHasNoMarginBottom\r\n\t\t\t/>\r\n\r\n\t\t\t<Slot name={ `${ namespace }_${ collection }_import_records_below` }>\r\n\t\t\t\t{ ( fills ) => (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t{ Array.isArray( fills ) && fills.map( ( fill, index ) => (\r\n\t\t\t\t\t\t\t<Tip key={ index }>{ fill }</Tip>\r\n\t\t\t\t\t\t) ) }\r\n\t\t\t\t\t</>\r\n\t\t\t\t) }\r\n\t\t\t</Slot>\r\n\r\n\t\t\t<HStack justify=\"flex-start\" wrap>\r\n\t\t\t\t<Button variant=\"primary\" onClick={ () => onContinue( mappedHeaders, updateRecords ) }>\r\n\t\t\t\t\t{ __( 'Import', 'newsletter-optin-box' ) }\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button variant=\"secondary\" onClick={ back }>\r\n\t\t\t\t\t{ __( 'Import a different file', 'newsletter-optin-box' ) }\r\n\t\t\t\t</Button>\r\n\t\t\t</HStack>\r\n\t\t</VStack>\r\n\t);\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport React, { useCallback, useEffect } from \"react\";\r\nimport Papa from 'papaparse';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useDispatch } from \"@wordpress/data\";\r\nimport { __, sprintf } from \"@wordpress/i18n\";\r\nimport { store as noticesStore } from '@wordpress/notices';\r\nimport {\r\n\tSpinner,\r\n\tButton,\r\n\tFlexItem,\r\n\tNotice,\r\n\tProgressBar,\r\n\t__experimentalHeading as Heading,\r\n\t__experimentalHStack as HStack,\r\n\t__experimentalVStack as VStack,\r\n} from \"@wordpress/components\";\r\n\r\n/**\r\n * HizzleWP dependencies\r\n */\r\nimport { useProvidedCollectionConfig, store as hizzlewpStore } from '@hizzlewp/store';\r\nimport { updatePath } from \"@hizzlewp/history\";\r\nimport { AnimatedNumber } from \"@hizzlewp/components\";\r\n\r\n/**\r\n * Internal dependancies.\r\n */\r\nimport { StatCard } from \"../view-record/overview/stats\";\r\nimport { MappedHeaders } from './map-headers';\r\nimport { useImportReducer } from './reducer';\r\n\r\nconst MIN_CHUNK_SIZE = 1;\r\nconst MAX_CHUNK_SIZE = 99;\r\nconst IDEAL_DURATION = 20000; // 20 seconds\r\n\r\nconst calculateChunkSize = ( lastDurationInMilliseconds: number, lastChunkSize: number ) => {\r\n\r\n\tif ( lastDurationInMilliseconds <= 0 || lastChunkSize <= 0 ) {\r\n\t\treturn MIN_CHUNK_SIZE;\r\n\t}\r\n\r\n\tconst ratePerMillisecond = lastChunkSize / lastDurationInMilliseconds;\r\n\r\n\t// Ensure we don't go past the maximum chunk size.\r\n\treturn Math.min(\r\n\t\tMath.max(\r\n\t\t\t// Ensure we don't go past the minimum chunk size.\r\n\t\t\tMIN_CHUNK_SIZE,\r\n\t\t\tMath.floor( ratePerMillisecond * IDEAL_DURATION )\r\n\t\t),\r\n\t\tMAX_CHUNK_SIZE\r\n\t);\r\n};\r\n\r\n/**\r\n * parses a CSV file.\r\n *\r\n * @param {Object} file The file to parse.\r\n * @param {Function} cb The callback to call when done.\r\n */\r\nconst parseCSV = ( file, onComplete, onError ) => {\r\n\r\n\tPapa.parse( file, {\r\n\t\theader: true,\r\n\t\tskipEmptyLines: 'greedy',\r\n\t\tcomplete( results ) {\r\n\t\t\tonComplete( results );\r\n\t\t},\r\n\t\terror( error ) {\r\n\t\t\tonError( error );\r\n\t\t},\r\n\t} );\r\n}\r\n\r\n/**\r\n * Parses a record.\r\n *\r\n * @param {Object} record The raw record.\r\n * @returns {Object} The parsed record.\r\n */\r\nconst useParseRecord = ( headers: MappedHeaders ) => useCallback( ( record: Record<string, any> ) => {\r\n\tconst parsed: Record<string, any> = {};\r\n\r\n\tObject.keys( headers ).forEach( ( key ) => {\r\n\r\n\t\t// Abort if the header is not mapped.\r\n\t\tif ( '' === headers[ key ].value ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Are we mapping the field?\r\n\t\tif ( headers[ key ].mapped ) {\r\n\t\t\tparsed[ key ] = record[ headers[ key ].value ];\r\n\t\t} else if ( undefined !== headers[ key ].customValue ) {\r\n\t\t\tparsed[ key ] = headers[ key ].customValue;\r\n\t\t}\r\n\r\n\t\t// If the field is a boolean, convert it.\r\n\t\tif ( headers[ key ].is_boolean ) {\r\n\t\t\tparsed[ key ] = [ '0', '', 'false', 'FALSE', 'no' ].includes( parsed[ key ] ) ? false : true;\r\n\t\t}\r\n\r\n\t} );\r\n\r\n\treturn parsed;\r\n}, [ headers ] );\r\n\r\n/**\r\n * The props for the Progress component.\r\n */\r\ninterface ProgressProps {\r\n\t/**\r\n\t * The file to import.\r\n\t */\r\n\tfile: File;\r\n\r\n\t/**\r\n\t * Known fields to file headers mapping.\r\n\t */\r\n\theaders: MappedHeaders;\r\n\r\n\t/**\r\n\t * The callback to call when clicking on the back button.\r\n\t */\r\n\tback: () => void;\r\n\r\n\t/**\r\n\t * Whether to update existing records.\r\n\t */\r\n\tupdateRecords: boolean;\r\n}\r\n\r\n/**\r\n * Imports the file and displays the progress.\r\n *\r\n * @param {Object} props\r\n * @param {Object} props.file The file to import.\r\n * @param {Object} props.headers Known fields to file headers mapping.\r\n * @param {Function} props.back The callback to call when clicking on the back button.\r\n */\r\nexport const Progress = ( { file, headers, back, updateRecords }: ProgressProps ) => {\r\n\r\n\tconst { config: { namespace, collection, labels } } = useProvidedCollectionConfig() || {};\r\n\tconst [ {\r\n\t\tpaused,\r\n\t\tdone,\r\n\t\tlastDuration,\r\n\t\tparsed,\r\n\t\ttotal,\r\n\t\tprocessed,\r\n\t\tstats,\r\n\t\tpreviousStats,\r\n\t\tchunks,\r\n\t}, dispatch ] = useImportReducer();\r\n\r\n\t// Dispatch.\r\n\tconst { doBatchCollectionAction } = useDispatch( hizzlewpStore );\r\n\tconst { createErrorNotice, removeAllNotices } = useDispatch( noticesStore );\r\n\tconst setErrors = useCallback( ( errors: Error[] ) => {\r\n\t\tremoveAllNotices( 'default', 'hizzlewp-import-progress' );\r\n\t\terrors.forEach( ( error ) => {\r\n\t\t\tcreateErrorNotice(\r\n\t\t\t\terror.message,\r\n\t\t\t\t{\r\n\t\t\t\t\tisDismissible: true,\r\n\t\t\t\t\ttype: 'default',\r\n\t\t\t\t\tcontext: 'hizzlewp-import-progress',\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t} );\r\n\t}, [ createErrorNotice, removeAllNotices ] );\r\n\r\n\t/**\r\n\t * Parses a record.\r\n\t */\r\n\tconst parseRecord = useParseRecord( headers );\r\n\r\n\t// Import chunks.\r\n\tuseEffect( () => {\r\n\r\n\t\t// Abort if paused.\r\n\t\tif ( paused ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst startTime = new Date().getTime();\r\n\t\tconst newChunks = [ ...chunks ];\r\n\r\n\t\t// Get the next chunk.\r\n\t\tconst chunk: Record<string, any>[] | undefined = newChunks.shift();\r\n\r\n\t\t// If there's no chunk, we're done.\r\n\t\tif ( !chunk ) {\r\n\r\n\t\t\tif ( false === done ) {\r\n\t\t\t\tdispatch( { type: 'UPDATE', done: true } );\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// If we're done, set the done flag to false.\r\n\t\tif ( true === done ) {\r\n\t\t\tdispatch( { type: 'UPDATE', done: false } );\r\n\t\t}\r\n\r\n\t\t// Import the chunk.\r\n\t\tdoBatchCollectionAction( namespace, collection, { import: chunk, update: updateRecords } )\r\n\t\t\t.then( ( result ) => {\r\n\t\t\t\tlet chunkStats = { ...stats };\r\n\t\t\t\tlet errors: Error[] = [];\r\n\r\n\t\t\t\t// Process the chunk results.\r\n\t\t\t\tresult?.import?.forEach( ( record ) => {\r\n\t\t\t\t\tif ( record.is_error ) {\r\n\t\t\t\t\t\tchunkStats.failed++;\r\n\t\t\t\t\t\terrors.push( record.data as Error );\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tObject.keys( chunkStats ).forEach( ( key ) => {\r\n\t\t\t\t\t\tif ( record.data?.[ key ] ) {\r\n\t\t\t\t\t\t\tchunkStats[ key ]++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} );\r\n\t\t\t\t} );\r\n\r\n\t\t\t\tdispatch( { type: 'UPDATE_STATS', ...chunkStats } );\r\n\t\t\t\tsetErrors( errors );\r\n\t\t\t} ).catch( ( error ) => {\r\n\t\t\t\tdispatch( { type: 'UPDATE_STATS', ...stats, failed: stats.failed + chunk.length } );\r\n\t\t\t\tsetErrors( [ error ] );\r\n\t\t\t} ).finally( () => {\r\n\r\n\t\t\t\t// Calculate the time (in milliseconds) taken to process the chunk.\r\n\t\t\t\tconst diff = Math.min( 2000, new Date().getTime() - startTime );\r\n\r\n\t\t\t\t// Check if we've processed everything.\r\n\t\t\t\tif ( newChunks.length === 0 ) {\r\n\t\t\t\t\tdispatch( {\r\n\t\t\t\t\t\ttype: 'UPDATE',\r\n\t\t\t\t\t\tprocessed: processed + chunk.length,\r\n\t\t\t\t\t\tchunks: newChunks,\r\n\t\t\t\t\t\tlastDuration: Math.ceil( diff )\r\n\t\t\t\t\t} );\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Adjust the number of records per chunk,\r\n\t\t\t\t// so that we speed up or slow down the import\r\n\t\t\t\t// based on server performance.\r\n\t\t\t\tconst newChunkSize = calculateChunkSize( diff, chunk.length );\r\n\r\n\t\t\t\tconst recalculatedChunks: Record<string, any>[][] = [];\r\n\r\n\t\t\t\t// Flatten the old chunks.\r\n\t\t\t\tconst oldChunks = newChunks.flat();\r\n\r\n\t\t\t\t// Create new chunks.\r\n\t\t\t\tfor ( let i = 0; i < oldChunks.length; i += newChunkSize ) {\r\n\t\t\t\t\tconst records = oldChunks.slice( i, i + newChunkSize );\r\n\t\t\t\t\trecalculatedChunks.push( records );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Update the chunks.\r\n\t\t\t\tdispatch( {\r\n\t\t\t\t\ttype: 'UPDATE',\r\n\t\t\t\t\tprocessed: processed + chunk.length,\r\n\t\t\t\t\tchunks: recalculatedChunks,\r\n\t\t\t\t\tlastDuration: Math.ceil( diff )\r\n\t\t\t\t} );\r\n\t\t\t} );\r\n\t}, [ chunks, paused, dispatch, doBatchCollectionAction, setErrors ] );\r\n\r\n\t// Parse the file.\r\n\tuseEffect( () => {\r\n\r\n\t\t// Parse the file.\r\n\t\tparseCSV(\r\n\t\t\tfile,\r\n\t\t\t( results ) => {\r\n\r\n\t\t\t\t// Create chunks of 10 records per chunk.\r\n\t\t\t\tconst batchSize = 10;\r\n\t\t\t\tconst newChunks: Record<string, any>[][] = [];\r\n\t\t\t\tfor ( let i = 0; i < results.data.length; i += batchSize ) {\r\n\t\t\t\t\tconst records: Record<string, any>[] = results.data.slice( i, i + batchSize );\r\n\t\t\t\t\tnewChunks.push( records.map( ( record ) => parseRecord( record ) ) );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Update the state.\r\n\t\t\t\tdispatch( {\r\n\t\t\t\t\ttype: 'UPDATE',\r\n\t\t\t\t\tparsed: true,\r\n\t\t\t\t\ttotal: results.data.length,\r\n\t\t\t\t\tchunks: newChunks,\r\n\t\t\t\t\tpaused: false\r\n\t\t\t\t} );\r\n\t\t\t},\r\n\t\t\t( error ) => setErrors( [ error ] ),\r\n\t\t);\r\n\t}, [ file, headers ] );\r\n\r\n\t// Abort if the file is not parsed.\r\n\tif ( !parsed ) {\r\n\t\treturn (\r\n\t\t\t<Heading level={ 3 } size={ 20 }>\r\n\t\t\t\t{ __( 'Parsing', 'newsletter-optin-box' ) }\r\n\t\t\t\t<code>{ file.name }</code>...\r\n\t\t\t\t&nbsp;\r\n\t\t\t\t<Spinner />\r\n\t\t\t</Heading>\r\n\t\t)\r\n\t}\r\n\r\n\t// Abort if total == 0.\r\n\tif ( 0 === total ) {\r\n\t\treturn (\r\n\t\t\t<Notice isDismissible={ false } status=\"error\">\r\n\t\t\t\t{ sprintf(\r\n\t\t\t\t\t// translators: %s: file name.\r\n\t\t\t\t\t__( 'No records found in %s.', 'newsletter-optin-box' ),\r\n\t\t\t\t\tfile.name\r\n\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t</Notice>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<VStack className=\"hizzlewp-import-progress\" spacing={ 4 }>\r\n\r\n\t\t\t{ !done && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Heading level={ 3 } size={ 20 }>\r\n\t\t\t\t\t\t{ __( 'Importing', 'newsletter-optin-box' ) }\r\n\t\t\t\t\t\t<code>{ file.name }</code>...\r\n\t\t\t\t\t\t&nbsp;\r\n\t\t\t\t\t\t{ !paused && <Spinner /> }\r\n\r\n\t\t\t\t\t\t&nbsp;\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"link\"\r\n\t\t\t\t\t\t\tonClick={ () => dispatch( {\r\n\t\t\t\t\t\t\t\ttype: 'UPDATE',\r\n\t\t\t\t\t\t\t\tpaused: !paused\r\n\t\t\t\t\t\t\t} ) }\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ paused ? __( 'Resume', 'newsletter-optin-box' ) : __( 'Pause', 'newsletter-optin-box' ) }\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Heading>\r\n\r\n\t\t\t\t\t{ !paused && (\r\n\t\t\t\t\t\t<ProgressBar\r\n\t\t\t\t\t\t\tvalue={ !processed ? 0 : Math.floor( ( processed / total ) * 100 ) }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</>\r\n\t\t\t) }\r\n\r\n\t\t\t{ done && (\r\n\t\t\t\t<Heading level={ 3 } size={ 20 }>\r\n\t\t\t\t\t{ __( 'Processed', 'newsletter-optin-box' ) }\r\n\t\t\t\t\t<code>{ file.name }</code>\r\n\t\t\t\t</Heading>\r\n\t\t\t) }\r\n\r\n\t\t\t<HStack spacing={ 4 } justify=\"flex-start\" wrap>\r\n\r\n\t\t\t\t<FlexItem>\r\n\t\t\t\t\t<StatCard\r\n\t\t\t\t\t\tvalue={ <AnimatedNumber to={ total } duration={ 3000 } /> }\r\n\t\t\t\t\t\tlabel={ __( 'Records Found', 'newsletter-optin-box' ) }\r\n\t\t\t\t\t\tstatus=\"light\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</FlexItem>\r\n\r\n\t\t\t\t{ stats.created > 0 && (\r\n\t\t\t\t\t<FlexItem>\r\n\t\t\t\t\t\t<StatCard\r\n\t\t\t\t\t\t\tvalue={\r\n\t\t\t\t\t\t\t\t<AnimatedNumber\r\n\t\t\t\t\t\t\t\t\tfrom={ previousStats.created || 0 }\r\n\t\t\t\t\t\t\t\t\tto={ stats.created }\r\n\t\t\t\t\t\t\t\t\tduration={ ( done || paused ) ? 300 : lastDuration }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlabel={ __( 'Records Created', 'newsletter-optin-box' ) }\r\n\t\t\t\t\t\t\tstatus=\"success\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</FlexItem>\r\n\t\t\t\t) }\r\n\r\n\t\t\t\t{ stats.updated > 0 && (\r\n\t\t\t\t\t<FlexItem>\r\n\t\t\t\t\t\t<StatCard\r\n\t\t\t\t\t\t\tvalue={\r\n\t\t\t\t\t\t\t\t<AnimatedNumber\r\n\t\t\t\t\t\t\t\t\tfrom={ previousStats.updated || 0 }\r\n\t\t\t\t\t\t\t\t\tto={ stats.updated }\r\n\t\t\t\t\t\t\t\t\tduration={ ( done || paused ) ? 300 : lastDuration }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlabel={ __( 'Records Updated', 'newsletter-optin-box' ) }\r\n\t\t\t\t\t\t\tstatus=\"success\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</FlexItem>\r\n\t\t\t\t) }\r\n\r\n\t\t\t\t{ stats.failed > 0 && (\r\n\t\t\t\t\t<FlexItem>\r\n\t\t\t\t\t\t<StatCard\r\n\t\t\t\t\t\t\tvalue={\r\n\t\t\t\t\t\t\t\t<AnimatedNumber\r\n\t\t\t\t\t\t\t\t\tfrom={ previousStats.failed || 0 }\r\n\t\t\t\t\t\t\t\t\tto={ stats.failed }\r\n\t\t\t\t\t\t\t\t\tduration={ ( done || paused ) ? 300 : lastDuration }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlabel={ __( 'Records Failed', 'newsletter-optin-box' ) }\r\n\t\t\t\t\t\t\tstatus=\"error\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</FlexItem>\r\n\t\t\t\t) }\r\n\r\n\t\t\t\t{ stats.skipped > 0 && (\r\n\t\t\t\t\t<FlexItem>\r\n\t\t\t\t\t\t<StatCard\r\n\t\t\t\t\t\t\tvalue={\r\n\t\t\t\t\t\t\t\t<AnimatedNumber\r\n\t\t\t\t\t\t\t\t\tfrom={ previousStats.skipped || 0 }\r\n\t\t\t\t\t\t\t\t\tto={ stats.skipped }\r\n\t\t\t\t\t\t\t\t\tduration={ ( done || paused ) ? 300 : lastDuration }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlabel={ __( 'Records Skipped', 'newsletter-optin-box' ) }\r\n\t\t\t\t\t\t\tstatus=\"info\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</FlexItem>\r\n\t\t\t\t) }\r\n\t\t\t</HStack>\r\n\r\n\t\t\t{ done && (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\ttext={ labels.view_items || 'View Records' }\r\n\t\t\t\t\t\tonClick={ () => updatePath( `/${ namespace }/${ collection }` ) }\r\n\t\t\t\t\t\tstyle={ { maxWidth: 200 } }\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t) }\r\n\r\n\t\t</VStack>\r\n\t);\r\n}\r\n","import { useReducer } from 'react';\r\n\r\n/**\r\n * The state of the import.\r\n */\r\nexport interface ImportState {\r\n\r\n    /**\r\n     * Whether the import is done.\r\n     */\r\n    done: boolean;\r\n\r\n    /**\r\n     * The last duration of the import.\r\n     */\r\n    lastDuration: number;\r\n\r\n    /**\r\n     * Whether the import is paused.\r\n     */\r\n    paused: boolean;\r\n\r\n    /**\r\n     * Whether the file has been parsed.\r\n     */\r\n    parsed: boolean;\r\n\r\n    /**\r\n     * The total number of records.\r\n     */\r\n    total: number;\r\n\r\n    /**\r\n     * The number of records processed.\r\n     */\r\n    processed: number;\r\n\r\n    /**\r\n     * The stats of the import.\r\n     */\r\n    stats: {\r\n\r\n        /**\r\n         * The number of records updated.\r\n         */\r\n        updated: number;\r\n\r\n        /**\r\n         * The number of records created.\r\n         */\r\n        created: number;\r\n\r\n        /**\r\n         * The number of records failed.\r\n         */\r\n        failed: number;\r\n\r\n        /**\r\n         * The number of records skipped.\r\n         */\r\n        skipped: number;\r\n    };\r\n\r\n    /**\r\n     * The previous stats of the import.\r\n     */\r\n    previousStats: {\r\n        /**\r\n         * The number of records updated.\r\n         */\r\n        updated: number;\r\n\r\n        /**\r\n         * The number of records created.\r\n         */\r\n        created: number;\r\n\r\n        /**\r\n         * The number of records failed.\r\n         */\r\n        failed: number;\r\n\r\n        /**\r\n         * The number of records skipped.\r\n         */\r\n        skipped: number;\r\n    };\r\n\r\n    /**\r\n     * The chunks of records to import.\r\n     */\r\n    chunks: Record<string, any>[][];\r\n}\r\n\r\n/**\r\n * The action of the import.\r\n */\r\ninterface UpdateStatsAction {\r\n    type: 'UPDATE_STATS';\r\n    updated: number;\r\n    created: number;\r\n    failed: number;\r\n    skipped: number;\r\n}\r\n\r\ninterface UpdateKeyAction extends Partial<ImportState> {\r\n    type: 'UPDATE';\r\n}\r\n\r\nexport const importReducer = ( state: ImportState, { type, ...payload }: UpdateKeyAction | UpdateStatsAction ): ImportState => {\r\n    switch ( type ) {\r\n        case 'UPDATE_STATS':\r\n            return {\r\n                ...state,\r\n                stats: { ...state.stats, ...payload },\r\n                previousStats: { ...state.stats }\r\n            };\r\n        case 'UPDATE':\r\n            return { ...state, ...payload };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const useImportReducer = () => {\r\n    return useReducer( importReducer, {\r\n        done: false,\r\n        lastDuration: 5000,\r\n        paused: false,\r\n        parsed: false,\r\n        total: 0,\r\n        processed: 0,\r\n        stats: {\r\n            updated: 0,\r\n            created: 0,\r\n            failed: 0,\r\n            skipped: 0,\r\n        },\r\n        previousStats: {\r\n            updated: 0,\r\n            created: 0,\r\n            failed: 0,\r\n            skipped: 0,\r\n        },\r\n        chunks: [],\r\n    } );\r\n};\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from \"@wordpress/i18n\";\r\nimport {\r\n    FormFileUpload,\r\n    Icon,\r\n    Tip,\r\n    Button,\r\n    __experimentalText as Text,\r\n    __experimentalVStack as VStack,\r\n} from \"@wordpress/components\";\r\n\r\n/**\r\n * Displays the file input.\r\n *\r\n * @param {Object} props\r\n */\r\nexport const SelectFile = ( { onUpload } ) => {\r\n\r\n    return (\r\n        <VStack spacing={ 5 } style={ { maxWidth: 500 } }>\r\n\r\n            <Text weight={ 600 } as=\"h3\">\r\n                { __( 'This tool allows you to import existing records from a CSV file.', 'newsletter-optin-box' ) }\r\n            </Text>\r\n\r\n            <FormFileUpload\r\n                accept=\"text/csv\"\r\n                onChange={ ( event ) => onUpload( event?.currentTarget?.files?.[ 0 ] ) }\r\n                className=\"hizzlewp-block-button is-primary\"\r\n            >\r\n                <Icon icon=\"cloud-upload\" />\r\n                { __( 'Select a CSV file', 'newsletter-optin-box' ) }\r\n            </FormFileUpload>\r\n\r\n            <Tip>\r\n                { __( 'The first row of the CSV file should contain the field names/headers.', 'newsletter-optin-box' ) }\r\n                <br />\r\n                { __( ' Have a different file type?', 'newsletter-optin-box' ) }&nbsp;\r\n                <Button\r\n                    variant=\"link\"\r\n                    href=\"https://convertio.co/csv-converter/\"\r\n                    target=\"_blank\"\r\n                    text={ __( 'Convert it to CSV', 'newsletter-optin-box' ) }\r\n                />\r\n            </Tip>\r\n        </VStack>\r\n    );\r\n}\r\n","/**\r\n * External dependencies.\r\n */\r\nimport React, { useMemo, useCallback } from 'react';\r\n\r\n/**\r\n * WordPress dependencies.\r\n */\r\nimport {\r\n\tSpinner,\r\n\tNotice,\r\n\tFill,\r\n\tSlot,\r\n\tButton,\r\n\t__experimentalHStack as HStack,\r\n\t__experimentalHeading as Heading,\r\n\tNavigableMenu,\r\n\tCard,\r\n} from '@wordpress/components';\r\nimport type { ButtonProps } from '@wordpress/components/build-types/button/types';\r\nimport { __ } from \"@wordpress/i18n\";\r\nimport { arrowLeft, rotateRight } from \"@wordpress/icons\";\r\nimport { useDispatch } from '@wordpress/data';\r\n\r\n/**\r\n * HizzleWP dependencies.\r\n */\r\nimport { ErrorBoundary } from '@hizzlewp/components';\r\nimport { Outlet, useRoute, updatePath } from '@hizzlewp/history';\r\nimport { CollectionProvider, useProvidedCollectionConfig, store as hizzleStore } from '@hizzlewp/store';\r\n\r\n/**\r\n * Internal dependencies.\r\n */\r\nimport { UpsellCard } from \"../upsell\";\r\nimport { usePreparedQuery } from './records-table';\r\n\r\n/**\r\n * Refreshes the records.\r\n */\r\nconst RefreshRecords = ( { namespace, collection } ) => {\r\n\tconst query = usePreparedQuery( namespace, collection );\r\n\tconst { invalidateResolution } = useDispatch( hizzleStore );\r\n\tconst onRefresh = () => invalidateResolution( 'getCollectionRecords', [ namespace, collection, query ] );\r\n\r\n\treturn (\r\n\t\t<Button\r\n\t\t\ticon={ rotateRight }\r\n\t\t\tonClick={ onRefresh }\r\n\t\t\tvariant=\"tertiary\"\r\n\t\t\tlabel=\"Refresh\"\r\n\t\t\tshowTooltip\r\n\t\t/>\r\n\t)\r\n};\r\n\r\n/**\r\n * Displays main layout.\r\n *\r\n * @param {Object} props\r\n */\r\nconst Layout = (): React.ReactNode => {\r\n\tconst { config: { namespace, collection, labels, routes, fills } } = useProvidedCollectionConfig();\r\n\tconst { path } = useRoute();\r\n\r\n\tconst basePath = `/${ namespace }/${ collection }`;\r\n\r\n\tconst actions = useMemo( () => {\r\n\t\tconst actions: ButtonProps[] = [];\r\n\r\n\t\tif ( basePath !== path ) {\r\n\t\t\treturn actions;\r\n\t\t}\r\n\r\n\t\t// Show button to add new item.\r\n\t\tactions.push( {\r\n\t\t\ttext: labels?.add_new_item || 'Add New',\r\n\t\t\tonClick: () => updatePath( `${ basePath }/add` ),\r\n\t\t\tvariant: 'primary',\r\n\t\t} );\r\n\r\n\t\tif ( routes ) {\r\n\t\t\tObject.entries( routes ).forEach( ( [ route, { title, ...extra } ] ) => {\r\n\t\t\t\tactions.push( {\r\n\t\t\t\t\ttext: title,\r\n\t\t\t\t\tonClick: !extra.href ? () => updatePath( route ) : undefined,\r\n\t\t\t\t\tvariant: 'secondary',\r\n\t\t\t\t\t...extra,\r\n\t\t\t\t} );\r\n\t\t\t} );\r\n\t\t}\r\n\r\n\t\treturn actions;\r\n\t}, [ labels, routes, path ] );\r\n\r\n\t/**\r\n\t * Goes to the collection index.\r\n\t */\r\n\tconst goToCollectionIndex = useCallback( () => {\r\n\t\tupdatePath( `${ namespace }/${ collection }` );\r\n\t}, [ namespace, collection ] );\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<HStack wrap>\r\n\r\n\t\t\t\t<ErrorBoundary>\r\n\t\t\t\t\t<HStack expanded={ false } spacing={ 2 } justify=\"flex-start\" wrap>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tbasePath !== path ? (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\tonClick={ goToCollectionIndex }\r\n\t\t\t\t\t\t\t\t\t\ticon={ arrowLeft }\r\n\t\t\t\t\t\t\t\t\t\tlabel={ labels?.view_items || 'View Items' }\r\n\t\t\t\t\t\t\t\t\t\tshowTooltip\r\n\t\t\t\t\t\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t\t\t<Slot name={ `${ basePath }/title` } />\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<Heading level={ 1 } size={ 16 } truncate>\r\n\t\t\t\t\t\t\t\t\t\t{ labels?.name || 'Items' }\r\n\t\t\t\t\t\t\t\t\t</Heading>\r\n\t\t\t\t\t\t\t\t\t<RefreshRecords namespace={ namespace } collection={ collection } />\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</HStack>\r\n\t\t\t\t</ErrorBoundary>\r\n\t\t\t\t<ErrorBoundary>\r\n\t\t\t\t\t{ actions.length > 0 ? (\r\n\t\t\t\t\t\t<HStack\r\n\t\t\t\t\t\t\tas={ NavigableMenu }\r\n\t\t\t\t\t\t\torientation=\"horizontal\"\r\n\t\t\t\t\t\t\tclassName=\"hizzle-store-ui__header-menu\"\r\n\t\t\t\t\t\t\texpanded={ false }\r\n\t\t\t\t\t\t\tspacing={ 0 }\r\n\t\t\t\t\t\t\talignment=\"stretch\"\r\n\t\t\t\t\t\t\twrap\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{ actions.map( ( action ) => (\r\n\t\t\t\t\t\t\t\t<ErrorBoundary key={ action.text }>\r\n\t\t\t\t\t\t\t\t\t<Button __next40pxDefaultSize { ...action } />\r\n\t\t\t\t\t\t\t\t</ErrorBoundary>\r\n\t\t\t\t\t\t\t) ) }\r\n\t\t\t\t\t\t</HStack>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<Slot name={ `${ basePath }/actions` } />\r\n\t\t\t\t\t) }\r\n\t\t\t\t</ErrorBoundary>\r\n\t\t\t</HStack>\r\n\t\t\t<Card isRounded={ false }>\r\n\r\n\t\t\t\t<ErrorBoundary>\r\n\t\t\t\t\t<Outlet path=\"/:namespace/:collection\" />\r\n\t\t\t\t</ErrorBoundary>\r\n\r\n\t\t\t\t{ fills && fills.map( ( fill ) => (\r\n\t\t\t\t\t<Fill key={ fill.name } name={ `${ fill.name }` }>\r\n\t\t\t\t\t\t<ErrorBoundary>\r\n\t\t\t\t\t\t\t{ fill.content && <span dangerouslySetInnerHTML={ { __html: fill.content } } /> }\r\n\t\t\t\t\t\t\t{ fill.upsell && <UpsellCard upsell={ fill.upsell } /> }\r\n\t\t\t\t\t\t</ErrorBoundary>\r\n\t\t\t\t\t</Fill>\r\n\t\t\t\t) ) }\r\n\t\t\t</Card>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\n/**\r\n * Ensure that the collection config is loaded before rendering the page.\r\n *\r\n * @param {Object} props\r\n */\r\nexport const CheckConfig = ( { children } ) => {\r\n\tconst { config, isResolving, hasResolved, error } = useProvidedCollectionConfig();\r\n\r\n\t// Show loading indicator if still resolving.\r\n\tif ( isResolving || !hasResolved ) {\r\n\t\treturn <Spinner />;\r\n\t}\r\n\r\n\t// Show error if any.\r\n\tif ( error || !config ) {\r\n\t\treturn (\r\n\t\t\t<Notice status=\"error\" isDismissible={ false }>\r\n\t\t\t\t{ error?.message || 'An unknown error occurred.' }\r\n\t\t\t</Notice>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<ErrorBoundary>\r\n\t\t\t{ children }\r\n\t\t</ErrorBoundary>\r\n\t);\r\n}\r\n\r\n/**\r\n * Displays the main layout.\r\n *\r\n * @param {Object} props\r\n */\r\nexport const Main = ( { defaultNamespace, defaultCollection }: { defaultNamespace: string, defaultCollection: string } ) => {\r\n\r\n\tconst { params } = useRoute();\r\n\tconst namespace = params?.get( 'namespace' ) || defaultNamespace;\r\n\tconst collection = params?.get( 'collection' ) || defaultCollection;\r\n\tconst id = params?.get( 'recordId' );\r\n\r\n\t// Render the rest of the page.\r\n\treturn (\r\n\t\t<CollectionProvider namespace={ namespace } collection={ collection } recordId={ id ? Number( id ) : id }>\r\n\t\t\t<ErrorBoundary>\r\n\t\t\t\t<CheckConfig>\r\n\t\t\t\t\t<Layout />\r\n\t\t\t\t</CheckConfig>\r\n\t\t\t</ErrorBoundary>\r\n\t\t</CollectionProvider>\r\n\t);\r\n};\r\n","/**\r\n * External dependencies.\r\n */\r\nimport React, { useMemo, useState, useCallback } from \"react\";\r\n\r\n/**\r\n * WordPress dependencies.\r\n */\r\nimport {\r\n\tFlex,\r\n\tFlexItem,\r\n\tButton,\r\n\tIcon,\r\n\t__experimentalHStack as HStack,\r\n} from \"@wordpress/components\";\r\nimport { dateI18n, getSettings } from \"@wordpress/date\";\r\nimport { getQueryArg, addQueryArgs } from \"@wordpress/url\";\r\nimport { __ } from \"@wordpress/i18n\";\r\n\r\n/**\r\n * HizzleWP dependencies.\r\n */\r\nimport { getRawValue } from \"@hizzlewp/store\";\r\nimport type { RecordProp } from \"@hizzlewp/store/build-types/types\";\r\nimport { updatePath, updateQueryString } from '@hizzlewp/history';\r\n\r\n/**\r\n * Local dependencies.\r\n */\r\nimport getEnumBadge from \"./enum-colors\";\r\n\r\n/**\r\n * Displays a badge.\r\n */\r\nconst Badge: React.FC<React.HTMLAttributes<HTMLSpanElement>> = ( props ) => {\r\n\r\n\tconst { className, ...rest } = props;\r\n\r\n\treturn <span className={ `hizzlewp-badge ${ className || '' }` } { ...rest } />;\r\n}\r\n\r\n/**\r\n * Checks if a value is an object.\r\n */\r\nconst isObject = ( obj ) => obj && typeof obj === 'object' && obj.constructor === Object;\r\n\r\n/**\r\n * Takes an avatar URL then generates consistent colors for the avatar.\r\n *\r\n * @param {string} avatarUrl The avatar URL.\r\n * @return {Object} The generated background and text colors.\r\n */\r\nexport const normalizeAvatarColors = ( avatarUrl, fallbackText, isGrid = false ) => {\r\n\r\n\tif ( !avatarUrl ) {\r\n\t\treturn avatarUrl;\r\n\t}\r\n\r\n\t// If this is a grid view, replace s=64 with s=360.\r\n\tif ( isGrid ) {\r\n\t\tavatarUrl = addQueryArgs( avatarUrl, { s: 360 } );\r\n\t}\r\n\r\n\tconst fallback = getQueryArg( avatarUrl, 'd' ) as string | undefined;\r\n\r\n\t// Abort if we're not falling back to ui-avatar.\r\n\tif ( !fallback || !fallback.includes( 'ui-avatars.com' ) ) {\r\n\t\treturn avatarUrl;\r\n\t}\r\n\r\n\tconst match = fallback.match( /\\/api\\/(.*?)\\/64\\// );\r\n\tconst text = ( match && match.length > 1 ) ? match[ 1 ] : fallback;\r\n\r\n\t// Generate unique color for the string.\r\n\tconst color = getEnumBadge( fallbackText || text );\r\n\r\n\t// Replace the colors in the URL.\r\n\tconst index = fallback.indexOf( '/64/' );\r\n\r\n\tif ( index !== -1 ) {\r\n\t\tavatarUrl = addQueryArgs( avatarUrl, {\r\n\t\t\td: `${ fallback.substring( 0, index + 4 ) }/${ color.backgroundColor.replace( '#', '' ) }/${ color.color.replace( '#', '' ) }`,\r\n\t\t} );\r\n\t}\r\n\r\n\t// Replace the size in the URL.\r\n\tif ( avatarUrl.includes( '%2F64%2F%' ) ) {\r\n\t\tavatarUrl = avatarUrl.replace( '%2F64%2F%', '%2F360%2F%' );\r\n\t}\r\n\r\n\treturn avatarUrl;\r\n}\r\n\r\nexport function hasCollectionNavigationLink( htmlString ) {\r\n\tif ( typeof htmlString !== 'string' ) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tconst parser = new DOMParser();\r\n\tconst doc = parser.parseFromString( htmlString, 'text/html' );\r\n\treturn !!doc.querySelector( 'a[data-navigate-collection]' );\r\n}\r\n\r\ntype PrimaryColumnProps = {\r\n\trecord: Record<string, any>;\r\n\tname: string;\r\n\tbasePath?: string;\r\n\tviewType?: 'table' | 'grid';\r\n\tpath?: string;\r\n\trawValue?: string;\r\n\tvalue: string;\r\n\theader?: RecordProp;\r\n\thandleClick?: ( e: React.MouseEvent ) => void;\r\n\tisHtml?: boolean;\r\n}\r\n\r\n/**\r\n * Displays the primary column.\r\n * @param {Object} props\r\n * @param {Object} props.record The record object.\r\n * @param {string} props.name  The name of the column.\r\n * @param {string} props.label The label of the column.\r\n * @param {string} props.description The description of the column.\r\n */\r\nconst PrimaryColumn: React.FC<PrimaryColumnProps> = ( { record, value, rawValue, name, viewType, path, handleClick, isHtml } ) => {\r\n\r\n\tconst avatar_url = viewType !== 'table' ? '' : normalizeAvatarColors( record.avatar_url, rawValue );\r\n\r\n\tlet theValue: React.ReactNode = value;\r\n\tif ( isHtml ) {\r\n\t\tif ( hasCollectionNavigationLink( value ) ) {\r\n\t\t\t// replace all instances of data-navigate-collection with href=\"#\" data-navigate-collection in the value.\r\n\t\t\tconst theContent = value.replace( /data-navigate-collection/g, 'href=\"#\" data-navigate-collection' );\r\n\t\t\treturn <div dangerouslySetInnerHTML={ { __html: theContent } } onClick={ handleClick } />;\r\n\t\t}\r\n\r\n\t\ttheValue = <div dangerouslySetInnerHTML={ { __html: value } } />;\r\n\t}\r\n\r\n\tconst clickableProps = useMemo( () => {\r\n\r\n\t\tif ( !path ) {\r\n\t\t\treturn {\r\n\t\t\t\tclassName: 'hizzlewp-records-title-field',\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tclassName: 'hizzlewp-records-title-field hizzlewp-records-title-field--clickable',\r\n\t\t\trole: 'button',\r\n\t\t\ttabIndex: 0,\r\n\t\t\tonClick: ( event: React.MouseEvent ) => {\r\n\t\t\t\t// Prevents onChangeSelection from triggering.\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t\tupdatePath( path );\r\n\t\t\t},\r\n\t\t\tonKeyDown: ( event: React.KeyboardEvent ) => {\r\n\t\t\t\tif (\r\n\t\t\t\t\tevent.key === 'Enter' ||\r\n\t\t\t\t\tevent.key === '' ||\r\n\t\t\t\t\tevent.key === ' '\r\n\t\t\t\t) {\r\n\t\t\t\t\t// Prevents onChangeSelection from triggering.\r\n\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\tupdatePath( path );\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t};\r\n\t}, [ path ] );\r\n\r\n\treturn (\r\n\t\t<HStack spacing={ 3 } justify=\"flex-start\">\r\n\t\t\t{ avatar_url && (\r\n\t\t\t\t<div className=\"hizzlewp-records-view-table-column-primary__media\">\r\n\t\t\t\t\t<img className=\"hizzlewp-avatar\" src={ avatar_url } alt={ rawValue } />\r\n\t\t\t\t</div>\r\n\t\t\t) }\r\n\t\t\t<div { ...clickableProps }>\r\n\t\t\t\t{ theValue }\r\n\t\t\t</div>\r\n\t\t</HStack>\r\n\t);\r\n}\r\n\r\n/**\r\n * Displays badge list.\r\n *\r\n * @param {Object} props\r\n * @param {Array} props.value The value.\r\n * @param {Object} props.enums The enums.\r\n * @returns {JSX.Element}\r\n */\r\nconst BadgeList = ( { value, enums = {} } ) => {\r\n\r\n\tconst [ isOpen, setIsOpen ] = useState( false );\r\n\tconst toShow = isOpen ? value : value.slice( 0, 2 );\r\n\tconst showToggle = value.length > 2;\r\n\r\n\t// Display the list.\r\n\treturn (\r\n\t\t<Flex gap={ 2 } justify=\"flex-start\" wrap>\r\n\t\t\t{ toShow.map( ( val ) => (\r\n\t\t\t\t<FlexItem key={ val }>\r\n\t\t\t\t\t<Badge style={ getEnumBadge( val ) }>{ enums[ val ] || val }</Badge>\r\n\t\t\t\t</FlexItem>\r\n\t\t\t) ) }\r\n\r\n\t\t\t{ showToggle && (\r\n\t\t\t\t<FlexItem>\r\n\t\t\t\t\t<Button variant=\"link\" onClick={ () => setIsOpen( !isOpen ) }>\r\n\t\t\t\t\t\t{ isOpen ? __( 'Hide', 'newsletter-optin-box' ) : __( 'Show all', 'newsletter-optin-box' ) }\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</FlexItem>\r\n\t\t\t) }\r\n\t\t</Flex>\r\n\t);\r\n}\r\n\r\ntype CellProps = {\r\n\trow: Record<string, any>;\r\n\theader: RecordProp;\r\n\tviewType?: 'table' | 'grid';\r\n\tisBadge?: boolean;\r\n\tpath?: string;\r\n\tnamespace: string;\r\n\tcollection: string;\r\n}\r\n\r\n/**\r\n * Displays a single cell in the records table.\r\n * @param {Object} props\r\n * @param {Object} props.row The record object.\r\n */\r\nexport const DisplayCell: React.FC<CellProps> = ( { row, header, viewType = 'table', isBadge = false, namespace, collection } ) => {\r\n\r\n\tconst value = row[ header.name ] && row[ header.name ].rendered !== undefined\r\n\t\t? row[ header.name ].rendered\r\n\t\t: row[ header.name ];\r\n\tconst rawValue = getRawValue( row[ header.name ] );\r\n\tconst path = `${ namespace }/${ collection }`;\r\n\tconst isHtml = header.js_props?.isHtml || row[ header.name ]?.rendered;\r\n\r\n\tconst handleClick = useCallback( ( e ) => {\r\n\t\tconst link = e?.target?.closest?.( 'a[data-navigate-collection]' );\r\n\t\tif ( link ) {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t\tconst newPath = link.getAttribute( 'data-navigate-collection' );\r\n\t\t\t// Check if path starts with a slash, if not, add it.\r\n\t\t\tif ( !newPath.startsWith( '/' ) ) {\r\n\t\t\t\tupdatePath( `${ path }/${ newPath }` );\r\n\t\t\t} else {\r\n\t\t\t\tupdateQueryString( {}, newPath, {} );\r\n\t\t\t}\r\n\t\t}\r\n\t}, [ path ] );\r\n\r\n\t// Nulls and undefined values are displayed as a dash.\r\n\tif ( rawValue === null || rawValue === undefined || rawValue === '' || ( Array.isArray( value ) && value.length === 0 ) ) {\r\n\t\treturn <span className=\"hizzlewp-view-table__cell--null\">&ndash;</span>;\r\n\t}\r\n\r\n\tif ( header.is_primary && typeof value === 'string' ) {\r\n\t\treturn (\r\n\t\t\t<PrimaryColumn\r\n\t\t\t\trecord={ row }\r\n\t\t\t\tname={ header.name }\r\n\t\t\t\tviewType={ viewType }\r\n\t\t\t\tpath={ `${ path }/${ getRawValue( row.id ) }` }\r\n\t\t\t\trawValue={ rawValue }\r\n\t\t\t\tvalue={ value }\r\n\t\t\t\theader={ header }\r\n\t\t\t\thandleClick={ handleClick }\r\n\t\t\t\tisHtml={ isHtml }\r\n\t\t\t/>\r\n\t\t);\r\n\t}\r\n\r\n\t// Avatar URLs are displayed as an avatar.\r\n\tif ( 'avatar_url' === header.name ) {\r\n\t\tconst avatar_url = normalizeAvatarColors( row.avatar_url, value, viewType !== 'table' );\r\n\r\n\t\tif ( !avatar_url ) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tif ( viewType !== 'table' ) {\r\n\t\t\treturn <img src={ avatar_url } alt={ value } />\r\n\t\t}\r\n\r\n\t\treturn avatar_url ? <img className=\"hizzlewp-avatar\" src={ avatar_url } alt={ value } /> : null;\r\n\t}\r\n\r\n\t// Boolean values are displayed as a toggle.\r\n\tif ( header.is_boolean ) {\r\n\r\n\t\tconst icon = value ? 'yes' : 'no';\r\n\t\tconst color = value ? '#3a9001' : '#880000';\r\n\t\treturn <Icon size={ 24 } style={ { color } } icon={ icon } />;\r\n\t}\r\n\r\n\t// Dates are formatted as a date.\r\n\tif ( header.is_date && value ) {\r\n\t\tconst settings = getSettings();\r\n\t\t// If value contains 10 chars, format as date, otherwise format as datetime.\r\n\t\tif ( value.length === 10 ) {\r\n\t\t\treturn dateI18n( settings.formats.date, value );\r\n\t\t}\r\n\r\n\t\treturn dateI18n( settings.formats.datetime, value );\r\n\t}\r\n\r\n\t// Tokens.\r\n\tif ( header.is_tokens && Array.isArray( value ) ) {\r\n\t\treturn <BadgeList value={ value } />;\r\n\t}\r\n\r\n\t// Array with enum values are displayed as a badge.\r\n\tif ( header.enum && Array.isArray( value ) ) {\r\n\t\treturn <BadgeList value={ value } enums={ header.enum } />;\r\n\t}\r\n\r\n\t// Strings, numbers, and floats are displayed as is.\r\n\tif ( header.is_numeric || header.is_float || typeof value === 'string' ) {\r\n\r\n\t\t// If we have an enum, display the label.\r\n\t\tif ( header.enum && isObject( header.enum ) ) {\r\n\t\t\treturn <Badge style={ getEnumBadge( value ) }>{ header.enum?.[ value ] || value }</Badge>;\r\n\t\t}\r\n\r\n\t\tif ( isHtml ) {\r\n\t\t\tif ( hasCollectionNavigationLink( value ) ) {\r\n\t\t\t\t// replace all instances of data-navigate-collection with href=\"#\" data-navigate-collection in the value.\r\n\t\t\t\tconst theContent = value.replace( /data-navigate-collection/g, 'href=\"#\" data-navigate-collection' );\r\n\t\t\t\treturn <div dangerouslySetInnerHTML={ { __html: theContent } } onClick={ handleClick } />;\r\n\t\t\t}\r\n\t\t\treturn <div dangerouslySetInnerHTML={ { __html: value } } />;\r\n\t\t}\r\n\r\n\t\treturn value;\r\n\t}\r\n\r\n\treturn JSON.stringify( value );\r\n}\r\n","/**\r\n * HizzleWP dependencies.\r\n */\r\nimport { stringToColor } from '@hizzlewp/components';\r\n\r\n/**\r\n * Generates a badge color based on the given string.\r\n *\r\n * @param {string} str The string to generate a color for.\r\n * @return {Object} The generated background and text colors.\r\n */\r\nexport default function getEnumBadge( str ) {\r\n\r\n\t// Try to guess the color from the string.\r\n\tif ( [ 'subscribed', 'subscribe', 'active', 'yes', 'true', '1', 'complete' ].includes( str ) ) {\r\n\t\treturn {\r\n\t\t\tbackgroundColor: '#78c67a',\r\n\t\t\tcolor: '#111111',\r\n\t\t}\r\n\t}\r\n\r\n\tif ( [ 'unsubscribed', 'unsubscribe', 'inactive', 'no', 'false', '0', 'canceled' ].includes( str ) ) {\r\n\t\treturn {\r\n\t\t\tbackgroundColor: '#fbcfbd',\r\n\t\t\tcolor: '#241c15',\r\n\t\t}\r\n\t}\r\n\r\n\tif ( [ 'pending', 'waiting', 'maybe', '2' ].includes( str ) ) {\r\n\t\treturn {\r\n\t\t\tbackgroundColor: '#fbeeca',\r\n\t\t\tcolor: '#241c15',\r\n\t\t}\r\n\t}\r\n\r\n\t// Generate unique color for the string.\r\n\tconst color = stringToColor( str, {\r\n\t\tsaturation: [ 60, 100 ],\r\n\t\tlightness: [ 30, 45 ],\r\n\t} );\r\n\r\n\treturn {\r\n\t\tbackgroundColor: color.color,\r\n\t\tcolor: color.isLight ? '#111111' : '#ffffff',\r\n\t}\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport React, { useState, useMemo, Fragment } from \"react\";\r\nimport { Button, Modal, __experimentalHStack as HStack } from \"@wordpress/components\";\r\nimport { __, _x, sprintf } from \"@wordpress/i18n\";\r\n\r\n/**\r\n * HizzleWP dependencies\r\n */\r\nimport { Setting } from '@hizzlewp/components';\r\nimport type { ISetting } from '@hizzlewp/components';\r\nimport { useProvidedCollectionConfig } from \"@hizzlewp/store\";\r\nimport { useQuery, updateQueryString } from '@hizzlewp/history';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { SavedFiltersDropdown } from './saved-filters';\r\n\r\ninterface ColumnFilter {\r\n\tid: string\r\n\tvalue: {\r\n\t\tsuffix: '' | '_not' | '_min' | '_max' | '_before' | '_after',\r\n\t\tvalue: string\r\n\t}[]\r\n}\r\n\r\n// Convert flat filters object to ColumnFilter[] format\r\nexport const flatFiltersToColumnFilters = ( filters: Record<string, string> ): ColumnFilter[] => {\r\n\tconst columnFilters: Record<string, ColumnFilter> = {};\r\n\r\n\tObject.entries( filters ).forEach( ( [ key, value ] ) => {\r\n\t\tif ( !value ) return;\r\n\r\n\t\t// Check if this is a field with a suffix\r\n\t\tconst suffixMatch = key.match( /(.*?)(_not|_min|_max|_before|_after)$/ );\r\n\t\tconst fieldName = suffixMatch ? suffixMatch[ 1 ] : key;\r\n\t\tconst suffix = suffixMatch ?\r\n\t\t\t( suffixMatch[ 2 ] as '' | '_not' | '_min' | '_max' | '_before' | '_after' ) :\r\n\t\t\t( '' );\r\n\r\n\t\t// Create the column filter if it doesn't exist\r\n\t\tif ( !columnFilters[ fieldName ] ) {\r\n\t\t\tcolumnFilters[ fieldName ] = {\r\n\t\t\t\tid: fieldName,\r\n\t\t\t\tvalue: []\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\t// Add the value\r\n\t\tcolumnFilters[ fieldName ].value.push( {\r\n\t\t\tsuffix,\r\n\t\t\tvalue\r\n\t\t} );\r\n\t} );\r\n\r\n\treturn Object.values( columnFilters );\r\n};\r\n\r\n// Convert ColumnFilter[] format to flat filters object\r\nexport const columnFiltersToFlatFilters = ( columnFilters: ColumnFilter[] ): Record<string, string> => {\r\n\tconst flatFilters: Record<string, string> = {};\r\n\r\n\tcolumnFilters.forEach( filter => {\r\n\t\tfilter.value.forEach( value => {\r\n\t\t\tflatFilters[ filter.id + value.suffix ] = value.value;\r\n\t\t} );\r\n\t} );\r\n\r\n\treturn flatFilters;\r\n};\r\n\r\n/**\r\n * Displays the bulk edit form.\r\n */\r\nconst EditForm = ( { fields, onApplyFilters, filters, setAttributes } ) => {\r\n\r\n\t// Display the edit records form.\r\n\treturn (\r\n\t\t<form onSubmit={ onApplyFilters }>\r\n\r\n\t\t\t{ fields.map( ( field ) => {\r\n\r\n\t\t\t\t// If field.is_numeric || field.is_float, show _min and _max fields.\r\n\t\t\t\t// If field.is_date, show _before and _after fields.\r\n\t\t\t\tconst mainSetting = {\r\n\t\t\t\t\tname: field.name,\r\n\t\t\t\t\t...prepareField( field ),\r\n\t\t\t\t\tdefault: '',\r\n\t\t\t\t\tplaceholder: __( 'Any', 'newsletter-optin-box' ),\r\n\t\t\t\t\tcanSelectPlaceholder: true,\r\n\t\t\t\t};\r\n\r\n\t\t\t\tlet secondarySetting: typeof mainSetting | null = null;\r\n\r\n\t\t\t\tif ( field.is_boolean ) {\r\n\t\t\t\t\tmainSetting.el = 'select';\r\n\t\t\t\t\tmainSetting.options = {\r\n\t\t\t\t\t\t'1': __( 'Yes', 'newsletter-optin-box' ),\r\n\t\t\t\t\t\t'0': __( 'No', 'newsletter-optin-box' ),\r\n\t\t\t\t\t};\r\n\t\t\t\t} else if ( field.is_numeric || field.is_float ) {\r\n\t\t\t\t\tmainSetting.name = `${ field.name }_min`;\r\n\t\t\t\t\tmainSetting.label = sprintf(\r\n\t\t\t\t\t\t// translators: %s: Field label.\r\n\t\t\t\t\t\t_x( '%s - Min', 'Number', 'newsletter-optin-box' ),\r\n\t\t\t\t\t\tfield.label\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tsecondarySetting = {\r\n\t\t\t\t\t\t...mainSetting,\r\n\t\t\t\t\t\tname: `${ field.name }_max`,\r\n\t\t\t\t\t\tlabel: sprintf(\r\n\t\t\t\t\t\t\t// translators: %s: Field label.\r\n\t\t\t\t\t\t\t_x( '%s - Max', 'Number', 'newsletter-optin-box' ),\r\n\t\t\t\t\t\t\tfield.label\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if ( field.is_date ) {\r\n\t\t\t\t\tmainSetting.name = `${ field.name }_after`;\r\n\t\t\t\t\tmainSetting.label = sprintf(\r\n\t\t\t\t\t\t// translators: %s: Date field label.\r\n\t\t\t\t\t\t_x( '%s - After', 'Date', 'newsletter-optin-box' ),\r\n\t\t\t\t\t\tfield.label\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tsecondarySetting = {\r\n\t\t\t\t\t\t...mainSetting,\r\n\t\t\t\t\t\tname: `${ field.name }_before`,\r\n\t\t\t\t\t\tlabel: sprintf(\r\n\t\t\t\t\t\t\t// translators: %s: Date field label.\r\n\t\t\t\t\t\t\t_x( '%s - Before', 'Date', 'newsletter-optin-box' ),\r\n\t\t\t\t\t\t\tfield.label\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if ( field.is_primary ) {\r\n\t\t\t\t\tmainSetting.el = 'textarea'\r\n\t\t\t\t\tmainSetting.description = __( 'Separate multiple values with a comma.', 'newsletter-optin-box' );\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tsecondarySetting = {\r\n\t\t\t\t\t\t...mainSetting,\r\n\t\t\t\t\t\tname: `${ field.name }_not`,\r\n\t\t\t\t\t\tlabel: sprintf(\r\n\t\t\t\t\t\t\t// translators: %s: Field label.\r\n\t\t\t\t\t\t\t__( '%s - Exclude', 'newsletter-optin-box' ),\r\n\t\t\t\t\t\t\tfield.label\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Fragment key={ field.name }>\r\n\t\t\t\t\t\t<div style={ { marginBottom: '1.6rem' } }>\r\n\t\t\t\t\t\t\t<Setting\r\n\t\t\t\t\t\t\t\tsettingKey={ mainSetting.name }\r\n\t\t\t\t\t\t\t\tsaved={ filters }\r\n\t\t\t\t\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t\t\t\t\t\tsetting={ mainSetting }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{ secondarySetting && (\r\n\t\t\t\t\t\t\t<div style={ { marginBottom: '1.6rem' } }>\r\n\t\t\t\t\t\t\t\t<Setting\r\n\t\t\t\t\t\t\t\t\tsettingKey={ secondarySetting.name }\r\n\t\t\t\t\t\t\t\t\tsaved={ filters }\r\n\t\t\t\t\t\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t\t\t\t\t\t\tsetting={ secondarySetting }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t</Fragment>\r\n\t\t\t\t);\r\n\t\t\t} ) }\r\n\t\t</form>\r\n\t);\r\n\r\n}\r\n\r\n/**\r\n * Displays the bulk edit modal.\r\n */\r\nconst TheModal = ( { currentFilters, fields, setOpen } ) => {\r\n\tconst [ filters, setFilters ] = useState( { ...currentFilters } );\r\n\r\n\t// A function to apply the filters.\r\n\tconst onApplyFilters = ( e ) => {\r\n\t\te?.preventDefault();\r\n\r\n\t\t// If there are no filters, don't set the query param\r\n\t\tif ( filters && Object.keys( filters ).length === 0 ) {\r\n\t\t\tupdateQueryString( { hizzlewp_filters: '', paged: '1' } );\r\n\t\t} else {\r\n\t\t\tupdateQueryString( { hizzlewp_filters: JSON.stringify( filters ), paged: '1' } );\r\n\t\t}\r\n\r\n\t\tsetOpen( false );\r\n\t}\r\n\r\n\t// Sets edited attributes.\r\n\tconst setAttributes = ( atts ) => {\r\n\t\tsetFilters( { ...filters, ...atts } );\r\n\t}\r\n\r\n\t// Display the edit records modal.\r\n\treturn (\r\n\t\t<>\r\n\r\n\t\t\t<EditForm\r\n\t\t\t\tfields={ fields }\r\n\t\t\t\tfilters={ filters }\r\n\t\t\t\tonApplyFilters={ onApplyFilters }\r\n\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t/>\r\n\r\n\t\t\t<Button className=\"hizzlewp-block-button\" variant=\"primary\" onClick={ onApplyFilters } text={ __( 'Apply Filters', 'newsletter-optin-box' ) } />\r\n\t\t</>\r\n\t);\r\n}\r\n\r\n/**\r\n * Returns a list of filterable fields.\r\n */\r\nexport const useFilterableFields = ( { isBulkEditing = false } ) => {\r\n\tconst { config: data } = useProvidedCollectionConfig();\r\n\r\n\treturn useMemo( () => {\r\n\r\n\t\tif ( !data.schema ) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\r\n\t\treturn data.schema.filter( ( field ) => {\r\n\r\n\t\t\t// Remove readonly fields.\r\n\t\t\tif ( ( field.readonly && isBulkEditing ) || field.is_dynamic ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// Remove ignorable fields.\r\n\t\t\tif ( Array.isArray( data.ignore ) && data.ignore.includes( field.name ) ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// Remove hidden fields.\r\n\t\t\tif ( Array.isArray( data.hidden ) && data.hidden.includes( field.name ) ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// Allow tokens.\r\n\t\t\tif ( field.is_tokens ) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\t// If we're not bulk editing, include numbers and dates.\r\n\t\t\tif ( !isBulkEditing && ( field.is_numeric || field.is_float || field.is_date || field.is_primary ) ) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\t// Remove non-selectable fields.\r\n\t\t\tif ( !field.enum || Array.isArray( field.enum ) ) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t} );\r\n\t}, [ data, isBulkEditing ] );\r\n}\r\n\r\n/**\r\n * Prepares a field for use in a setting.\r\n */\r\nexport const prepareField = ( field ) => {\r\n\r\n\tconst prepared: ISetting = {\r\n\t\tdefault: field.default,\r\n\t\tlabel: field.label,\r\n\t\tel: 'input',\r\n\t\ttype: 'text',\r\n\t\tname: field.name,\r\n\t\tisInputToChange: true,\r\n\t};\r\n\r\n\t// Custom attributes.\r\n\tif ( field.js_props?.setting ) {\r\n\t\tprepared.customAttributes = field.js_props.setting;\r\n\t}\r\n\r\n\t// Conditions.\r\n\tif ( field.js_props?.conditions ) {\r\n\t\tprepared.conditions = field.js_props?.conditions;\r\n\t}\r\n\r\n\t// Tokens.\r\n\tif ( field.is_tokens ) {\r\n\t\tprepared.el = 'form_token';\r\n\t\tprepared.suggestions = field.suggestions;\r\n\t} else if ( field.enum && !Array.isArray( field.enum ) ) {\r\n\t\tprepared.el = 'select';\r\n\t\tprepared.options = field.enum;\r\n\r\n\t\tif ( field.multiple ) {\r\n\t\t\tprepared.multiple = true;\r\n\t\t}\r\n\t} else if ( field.is_textarea ) {\r\n\t\tprepared.el = 'textarea';\r\n\t}\r\n\r\n\tif ( field.is_numeric || field.is_float ) {\r\n\t\tprepared.type = 'number';\r\n\t}\r\n\r\n\tif ( field.is_date ) {\r\n\t\tprepared.type = 'datetime-local';\r\n\t\tprepared.placeholder = 'YYYY-MM-DDTHH:MM:SS+ZZ:ZZ';\r\n\t}\r\n\r\n\tif ( field.is_boolean ) {\r\n\t\tprepared.type = 'toggle';\r\n\t}\r\n\r\n\tif ( field.description && field.description !== field.label ) {\r\n\t\tprepared.description = field.description;\r\n\t}\r\n\r\n\treturn prepared;\r\n}\r\n\r\n/**\r\n * Returns the filters and the fields.\r\n */\r\nexport const useFilters = () => {\r\n\tconst query = useQuery();\r\n\tconst fields = useFilterableFields( { isBulkEditing: false } );\r\n\r\n\treturn useMemo( () => {\r\n\t\tconst filters: ColumnFilter[] = [];\r\n\t\tconst filtersString = query?.hizzlewp_filters;\r\n\r\n\t\t// Return empty state if no filters query parameter exists\r\n\t\tif ( !filtersString || typeof filtersString !== 'string' ) {\r\n\t\t\treturn { fields, filters: [], preparedFilters: {} };\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\t// Parse the JSON string from the query parameter\r\n\t\t\tconst parsedFilters = JSON.parse( filtersString as string );\r\n\r\n\t\t\t// Validate the parsed filters structure\r\n\t\t\tif ( !parsedFilters || 'object' !== typeof parsedFilters ) {\r\n\t\t\t\treturn { fields, filters: [], preparedFilters: {} };\r\n\t\t\t}\r\n\r\n\t\t\t// Convert flat filters object to ColumnFilter format\r\n\t\t\tconst columnFilters = flatFiltersToColumnFilters( parsedFilters );\r\n\r\n\t\t\t// Ensure we got a valid array back\r\n\t\t\tif ( !Array.isArray( columnFilters ) ) {\r\n\t\t\t\treturn { fields, filters: [], preparedFilters: {} };\r\n\t\t\t}\r\n\r\n\t\t\tfilters.push( ...columnFilters );\r\n\t\t} catch ( error ) {\r\n\t\t\t// If JSON parsing fails, return empty state\r\n\t\t\treturn { fields, filters: [], preparedFilters: {} };\r\n\t\t}\r\n\r\n\t\t// Filter out invalid filters:\r\n\t\t// - Must have an id\r\n\t\t// - Must correspond to an available field\r\n\t\t// - Must have a non-empty value array\r\n\t\tconst filteredFilters = filters.filter( ( filter ) => {\r\n\t\t\treturn filter.id &&\r\n\t\t\t\tfields.some( ( field ) => field.name === filter.id ) &&\r\n\t\t\t\tArray.isArray( filter.value ) &&\r\n\t\t\t\tfilter.value.length > 0;\r\n\t\t} );\r\n\r\n\t\t// Convert back to flat format for use in components\r\n\t\tconst preparedFilters = columnFiltersToFlatFilters( filteredFilters );\r\n\r\n\t\treturn { fields, filters: filteredFilters, preparedFilters };\r\n\t}, [ query, fields ] );\r\n}\r\n\r\n/**\r\n * Displays a filters edit button.\r\n */\r\nexport const FiltersButton: React.FC = () => {\r\n\r\n\tconst [ isOpen, setOpen ] = useState( false );\r\n\tconst { fields, preparedFilters } = useFilters();\r\n\tconst numFilters = Object.keys( preparedFilters ).length;\r\n\tconst buttonText = numFilters > 0 ? sprintf(\r\n\t\t// translators: %d: number of filters applied.\r\n\t\t__( 'Applied Filters (%d)', 'newsletter-optin-box' ),\r\n\t\tnumFilters\r\n\t) : __( 'Filter Records', 'newsletter-optin-box' );\r\n\r\n\t// Display the button.\r\n\treturn (\r\n\t\t<HStack expanded={ false }>\r\n\r\n\t\t\t<SavedFiltersDropdown />\r\n\r\n\t\t\t{ fields.length > 0 && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tonClick={ () => setOpen( true ) }\r\n\t\t\t\t\t\tvariant={ numFilters > 0 ? 'tertiary' : undefined }\r\n\t\t\t\t\t\ticon=\"filter\"\r\n\t\t\t\t\t\ttext={ buttonText }\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t{ isOpen && (\r\n\t\t\t\t\t\t<Modal title={ __( 'Filter records', 'newsletter-optin-box' ) } onRequestClose={ () => setOpen( false ) }>\r\n\t\t\t\t\t\t\t<TheModal fields={ fields } currentFilters={ preparedFilters } setOpen={ setOpen } />\r\n\t\t\t\t\t\t</Modal>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</>\r\n\t\t\t) }\r\n\t\t</HStack>\r\n\t);\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport React, { useState, useCallback } from \"react\";\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __, sprintf } from \"@wordpress/i18n\";\r\nimport {\r\n\tButton,\r\n\tModal,\r\n\tSpinner,\r\n\t__experimentalVStack as VStack,\r\n\t__experimentalHStack as HStack,\r\n\t__experimentalText as Text,\r\n} from \"@wordpress/components\";\r\nimport { useDispatch } from \"@wordpress/data\";\r\n\r\n/**\r\n * HizzleWP dependencies\r\n */\r\nimport { store as hizzleStore, useProvidedCollection } from '@hizzlewp/store';\r\n\r\n/**\r\n * Displays a delete button.\r\n *\r\n */\r\nexport const BulkDelete = ( { query, isAllSelected, recordsCount } ) => {\r\n\r\n\t// If we're here, the namespace and collection are provided.\r\n\tconst { namespace, collection } = useProvidedCollection() || {};\r\n\r\n\t// Whether the modal is open.\r\n\tconst [ isOpen, setOpen ] = useState( false );\r\n\r\n\t// Deleting state.\r\n\tconst [ error, setError ] = useState<Error | null>( null );\r\n\tconst [ deleting, setDeleting ] = useState( false );\r\n\r\n\t// Title.\r\n\tconst title = isAllSelected ? __( 'Delete', 'newsletter-optin-box' ) : __( 'Delete Selected', 'newsletter-optin-box' );\r\n\r\n\tconst { bulkDeleteCollectionRecords } = useDispatch( hizzleStore );\r\n\r\n\t// A function to delete records.\r\n\tconst onDeleteRecords = useCallback( ( e ) => {\r\n\r\n\t\te?.preventDefault();\r\n\r\n\t\t// Delete once.\r\n\t\tif ( deleting ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetDeleting( true );\r\n\r\n\t\tbulkDeleteCollectionRecords( namespace as string, collection as string, query )\r\n\t\t\t.then( ( res ) => {\r\n\t\t\t\tsetOpen( false );\r\n\t\t\t} )\r\n\t\t\t.catch( ( error ) => {\r\n\t\t\t\tsetError( error );\r\n\t\t\t} )\r\n\t\t\t.finally( () => {\r\n\t\t\t\tsetDeleting( false );\r\n\t\t\t} );\r\n\t}, [ deleting, namespace, collection, query ] );\r\n\r\n\tconst warningText = error?.message || ( isAllSelected ? sprintf(\r\n\t\t// translators: %d: Number of records being deleted.\r\n\t\t__( 'Are you sure you want to delete %d matching records?', 'newsletter-optin-box' ),\r\n\t\trecordsCount\r\n\t) : sprintf(\r\n\t\t// translators: %d: Number of records being deleted.\r\n\t\t__( 'Are you sure you want to delete %d selected records?', 'newsletter-optin-box' ),\r\n\t\trecordsCount\r\n\t) );\r\n\r\n\treturn (\r\n\t\t<>\r\n\r\n\t\t\t<Button\r\n\t\t\t\tonClick={ () => setOpen( true ) }\r\n\t\t\t\tvariant=\"tertiary\"\r\n\t\t\t\ttext={ title }\r\n\t\t\t\tlabel={ !isAllSelected ? __( 'Delete Selected', 'newsletter-optin-box' ) : __( 'Delete all matching records', 'newsletter-optin-box' ) }\r\n\t\t\t\tshowTooltip\r\n\t\t\t\tisDestructive\r\n\t\t\t/>\r\n\r\n\t\t\t{ isOpen && (\r\n\t\t\t\t<Modal title={ title } onRequestClose={ () => setOpen( false ) }>\r\n\t\t\t\t\t<VStack>\r\n\t\t\t\t\t\t{ deleting ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Spinner />\r\n\t\t\t\t\t\t\t\t{ __( 'Deleting...', 'newsletter-optin-box' ) }\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Text isDestructive>\r\n\t\t\t\t\t\t\t\t\t{ warningText }\r\n\t\t\t\t\t\t\t\t</Text>\r\n\r\n\t\t\t\t\t\t\t\t<HStack wrap>\r\n\t\t\t\t\t\t\t\t\t<Button className=\"hizzlewp-block-button\" isDestructive variant=\"primary\" onClick={ onDeleteRecords }>\r\n\t\t\t\t\t\t\t\t\t\t{ __( 'Yes, Delete!', 'newsletter-optin-box' ) }\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t\t\t\t\t<Button className=\"hizzlewp-block-button\" onClick={ () => setOpen( false ) } variant=\"secondary\">\r\n\t\t\t\t\t\t\t\t\t\t{ __( 'Cancel', 'newsletter-optin-box' ) }\r\n\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t</HStack>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t</VStack>\r\n\t\t\t\t</Modal>\r\n\t\t\t) }\r\n\r\n\t\t</>\r\n\t);\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport { useDispatch } from \"@wordpress/data\";\r\nimport { useState, Fragment } from \"@wordpress/element\";\r\nimport { Button, Modal, Notice, Spinner, Icon } from \"@wordpress/components\";\r\nimport { __, sprintf } from \"@wordpress/i18n\";\r\n\r\n/**\r\n * HizzleWP dependencies\r\n */\r\nimport { Setting } from '@hizzlewp/components';\r\nimport { store as hizzleStore, useProvidedCollection } from '@hizzlewp/store';\r\n\r\n/**\r\n * Local dependancies.\r\n */\r\nimport { useFilterableFields, prepareField } from \"../filters\";\r\n\r\n/**\r\n * Displays the bulk edit form.\r\n */\r\nconst EditForm = ( { editableFields, onSave, changes, setAttributes } ) => {\r\n\r\n\t// Display the edit records form.\r\n\treturn (\r\n\t\t<form onSubmit={ onSave }>\r\n\r\n\t\t\t{ editableFields.map( ( field ) => {\r\n\r\n\t\t\t\tconst preparedSetting = {\r\n\t\t\t\t\tname: field.name,\r\n\t\t\t\t\t...prepareField( field ),\r\n\t\t\t\t\tdefault: '',\r\n\t\t\t\t\tplaceholder: __( 'Do not update', 'newsletter-optin-box' ),\r\n\t\t\t\t};\r\n\r\n\t\t\t\tlet toRemoveSetting: typeof preparedSetting | null = null;\r\n\r\n\t\t\t\tif ( field.multiple ) {\r\n\t\t\t\t\tpreparedSetting.label = sprintf(\r\n\t\t\t\t\t\t// translators: %s: Field label, e.g. \"Tags\".\r\n\t\t\t\t\t\t__( '%s - To Add', 'newsletter-optin-box' ),\r\n\t\t\t\t\t\tfield.label\r\n\t\t\t\t\t);\r\n\t\t\t\t\tpreparedSetting.name = `${ field.name }::add`;\r\n\r\n\t\t\t\t\ttoRemoveSetting = {\r\n\t\t\t\t\t\t...preparedSetting,\r\n\t\t\t\t\t\tname: `${ field.name }::remove`,\r\n\t\t\t\t\t\tlabel: sprintf(\r\n\t\t\t\t\t\t\t// translators: %s: Field label, e.g. \"Tags\".\r\n\t\t\t\t\t\t\t__( '%s - To Remove', 'newsletter-optin-box' ),\r\n\t\t\t\t\t\t\tfield.label\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Fragment key={ field.name }>\r\n\t\t\t\t\t\t<div style={ { marginBottom: '1.6rem' } }>\r\n\t\t\t\t\t\t\t<Setting\r\n\t\t\t\t\t\t\t\tsettingKey={ preparedSetting.name }\r\n\t\t\t\t\t\t\t\tsaved={ changes }\r\n\t\t\t\t\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t\t\t\t\t\tsetting={ preparedSetting }\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t{ toRemoveSetting && (\r\n\t\t\t\t\t\t\t<div style={ { marginBottom: '1.6rem' } }>\r\n\t\t\t\t\t\t\t\t<Setting\r\n\t\t\t\t\t\t\t\t\tsettingKey={ toRemoveSetting.name }\r\n\t\t\t\t\t\t\t\t\tsaved={ changes }\r\n\t\t\t\t\t\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t\t\t\t\t\t\tsetting={ toRemoveSetting }\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t) }\r\n\t\t\t\t\t</Fragment>\r\n\t\t\t\t);\r\n\t\t\t} ) }\r\n\t\t</form>\r\n\t);\r\n\r\n}\r\n\r\n/**\r\n * Displays a bulk edit button.\r\n *\r\n */\r\nexport const BulkEdit = ( { isBulkEditing = true, query, isAllSelected, recordsCount } ) => {\r\n\r\n\t// If we're here, the namespace and collection are provided.\r\n\tconst { namespace, collection } = useProvidedCollection() || {};\r\n\r\n\t// Whether the modal is open.\r\n\tconst [ isOpen, setOpen ] = useState( false );\r\n\r\n\t// Title.\r\n\tconst title = isAllSelected ? __( 'Bulk Edit', 'newsletter-optin-box' ) : __( 'Edit Selected', 'newsletter-optin-box' );\r\n\r\n\t// Saving state.\r\n\tconst [ error, setError ] = useState<Error | null>( null );\r\n\tconst [ saving, setSaving ] = useState( false );\r\n\tconst [ saved, setSaved ] = useState( false );\r\n\r\n\t// Data to update.\r\n\tconst [ changes, setChanges ] = useState( {} );\r\n\tconst hasChanges = Object.keys( changes ).length > 0;\r\n\tconst setAttributes = ( atts ) => {\r\n\t\tsetChanges( { ...changes, ...atts } );\r\n\r\n\t\tif ( error ) {\r\n\t\t\tsetError( null );\r\n\t\t}\r\n\r\n\t\tif ( saved ) {\r\n\t\t\tsetSaved( false );\r\n\t\t}\r\n\t}\r\n\r\n\t// A function to save records.\r\n\tconst { bulkUpdateCollectionRecords } = useDispatch( hizzleStore );\r\n\tconst onSaveRecords = ( e ) => {\r\n\r\n\t\te?.preventDefault();\r\n\r\n\t\t// Save once.\r\n\t\tif ( saving ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetSaving( true );\r\n\r\n\t\tbulkUpdateCollectionRecords( namespace || '', collection || '', query, changes )\r\n\t\t\t.then( () => {\r\n\t\t\t\tsetSaved( true );\r\n\t\t\t\tsetChanges( {} );\r\n\t\t\t} )\r\n\t\t\t.catch( ( error ) => {\r\n\t\t\t\tsetError( error );\r\n\t\t\t} )\r\n\t\t\t.finally( () => {\r\n\t\t\t\tsetSaving( false );\r\n\t\t\t} );\r\n\t}\r\n\r\n\t// Get the bulk editable fields.\r\n\tconst editableFields = useFilterableFields( { isBulkEditing } );\r\n\r\n\t// Whether we should display the button.\r\n\tif ( editableFields.length === 0 ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\t// Display the button.\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Button\r\n\t\t\t\tonClick={ () => setOpen( true ) }\r\n\t\t\t\tvariant=\"tertiary\"\r\n\t\t\t\ttext={ title }\r\n\t\t\t\tlabel={ !isAllSelected ? __( 'Edit Selected', 'newsletter-optin-box' ) : __( 'Edit all matching records', 'newsletter-optin-box' ) }\r\n\t\t\t\tshowTooltip\r\n\t\t\t/>\r\n\r\n\t\t\t{ isOpen && (\r\n\t\t\t\t<Modal title={ title } onRequestClose={ () => setOpen( false ) }>\r\n\t\t\t\t\t<EditForm\r\n\t\t\t\t\t\teditableFields={ editableFields }\r\n\t\t\t\t\t\tchanges={ changes }\r\n\t\t\t\t\t\tonSave={ onSaveRecords }\r\n\t\t\t\t\t\tsetAttributes={ setAttributes }\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t{ hasChanges && (\r\n\t\t\t\t\t\t<Button className=\"hizzlewp-block-button\" variant=\"primary\" onClick={ onSaveRecords } isBusy={ saving }>\r\n\t\t\t\t\t\t\t{ !saving && <Icon icon=\"cloud-saved\" /> }&nbsp;\r\n\t\t\t\t\t\t\t{ sprintf(\r\n\t\t\t\t\t\t\t\tsaving ?\r\n\t\t\t\t\t\t\t\t\t// translators: %d: Number of records being saved.\r\n\t\t\t\t\t\t\t\t\t__( 'Updating %d records...', 'newsletter-optin-box' ) :\r\n\t\t\t\t\t\t\t\t\t// translators: %d: Number of records being edited.\r\n\t\t\t\t\t\t\t\t\t__( 'Update %d records', 'newsletter-optin-box' ),\r\n\t\t\t\t\t\t\t\trecordsCount\r\n\t\t\t\t\t\t\t) }\r\n\t\t\t\t\t\t\t{ saving && <Spinner /> }\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t) }\r\n\t\t\t\t\t{ error && !hasChanges && (\r\n\t\t\t\t\t\t<Notice status=\"error\" isDismissible={ true }>\r\n\t\t\t\t\t\t\t{ error.message }\r\n\t\t\t\t\t\t</Notice>\r\n\t\t\t\t\t) }\r\n\r\n\t\t\t\t\t{ saved && !hasChanges && (\r\n\t\t\t\t\t\t<Notice status=\"success\" isDismissible={ true }>\r\n\t\t\t\t\t\t\t{ __( 'Records updated successfully.', 'newsletter-optin-box' ) }\r\n\t\t\t\t\t\t</Notice>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</Modal>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n}\r\n","/**\r\n * External dependencies.\r\n */\r\nimport React, { useMemo } from 'react';\r\nimport Papa from 'papaparse';\r\nimport { saveAs } from 'file-saver';\r\n\r\n/**\r\n * WordPress dependencies.\r\n */\r\nimport { Button, Notice, __experimentalText as Text, Spinner } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * HizzleWP dependencies.\r\n */\r\nimport { useCollectionRecords, useProvidedCollectionConfig } from '@hizzlewp/store';\r\n\r\n/**\r\n * Fetches records from the API and converts them to CSV.\r\n *\r\n * @param {Object} args\r\n * @param {Array} args.fields The fields to export.\r\n * @param {Function} args.back The callback to call when clicking on the back button.\r\n * @param {Array} args.schema The schema of the collection.\r\n */\r\nexport const Download = ( { fields, back, query } ) => {\r\n\r\n    const { config: { namespace, collection, props } } = useProvidedCollectionConfig();\r\n\r\n    // Fetch the records.\r\n    const exportArgs = {\r\n        ...query,\r\n        __fields: fields.join( ',' ),\r\n        per_page: -1,\r\n        context: 'edit',\r\n    }\r\n\r\n    const records = useCollectionRecords( namespace, collection, exportArgs );\r\n\r\n    // Loop through columns and and try to replace the column name with the label where possible.\r\n    const columns = useMemo( () => {\r\n\r\n        if ( !records.records?.length ) {\r\n            return [];\r\n        }\r\n\r\n        // Pluck name and label from the schema.\r\n        const knownFields = props.reduce( ( acc, field ) => {\r\n            acc[ field.name ] = field.js_props?.table_label || field.label;\r\n            return acc;\r\n        }, {} );\r\n\r\n        // Map the known fields to record fields.\r\n        return Object.keys( records.records[ 0 ] ).map( ( column ) => {\r\n            return knownFields[ column ] || column;\r\n        } );\r\n    }, [ props, records.records ] );\r\n\r\n    // Convert to CSV.\r\n    const csv = useMemo( () => {\r\n\r\n        if ( !records.records?.length || !columns.length ) {\r\n            return '';\r\n        }\r\n\r\n        return Papa.unparse(\r\n            {\r\n                fields: columns,\r\n                data: records.records.map( ( record ) => {\r\n                    return Object.values( record );\r\n                } ),\r\n            },\r\n            { escapeFormulae: true }\r\n        ) as string;\r\n    }, [ records.records, columns ] );\r\n\r\n    const backButton = (\r\n        <Button variant=\"link\" onClick={ back }>\r\n            { __( 'Go Back', 'newsletter-optin-box' ) }\r\n        </Button>\r\n    );\r\n\r\n    // Short spinner if loading.\r\n    if ( records.isResolving ) {\r\n        return (\r\n            <Text size={ 16 } as=\"p\">\r\n                <Spinner style={ { marginLeft: 0 } } />\r\n                { __( 'Preparing records...', 'newsletter-optin-box' ) }\r\n            </Text>\r\n        );\r\n    }\r\n\r\n    // Show error if any.\r\n    if ( 'ERROR' === records.status || records.error ) {\r\n\r\n        return (\r\n            <Notice status=\"error\" isDismissible={ false }>\r\n                { records.error?.message || 'An unknown error occurred.' }&nbsp; &nbsp;\r\n                { backButton }\r\n            </Notice>\r\n        )\r\n    }\r\n\r\n    // If no records, nothing to export.\r\n    if ( !records.records?.length ) {\r\n        return (\r\n            <Notice status=\"info\" isDismissible={ false }>\r\n                Found no records to export.&nbsp; &nbsp;\r\n                { backButton }\r\n            </Notice>\r\n        )\r\n    }\r\n\r\n    const filename = `${ namespace }-${ collection }-${ Date.now() }.csv`;\r\n\r\n    // Force download.\r\n    return (\r\n        <Notice status=\"success\" isDismissible={ false }>\r\n            { __( \"Done! Click the button below to download records.\", 'newsletter-optin-box' ) }\r\n            &nbsp; &nbsp;\r\n            <Button\r\n                variant=\"primary\"\r\n                text={ __( 'Download CSV', 'newsletter-optin-box' ) }\r\n                onClick={ () => saveAs(\r\n                    new Blob( [ csv ], { type: \"text/csv;charset=utf-8\" } ),\r\n                    filename\r\n                ) }\r\n            />\r\n        </Notice>\r\n    );\r\n}\r\n","/**\r\n * External dependencies.\r\n */\r\nimport React, { useState } from 'react';\r\n\r\n/**\r\n * WordPress dependencies.\r\n */\r\nimport { __, sprintf } from '@wordpress/i18n';\r\nimport { Button, Modal } from '@wordpress/components';\r\n\r\n/**\r\n * HizzleWP dependencies\r\n */\r\nimport { ErrorBoundary } from '@hizzlewp/components';\r\n\r\n/**\r\n * Internal dependencies.\r\n */\r\nimport { Modal as ExportModal } from './modal';\r\n\r\n/**\r\n * Displays a modal allowing users to export all records matching the current collection.\r\n *\r\n */\r\nexport const ExportButton = ( { query, isAllSelected, recordsCount } ) => {\r\n\r\n    // Whether the modal is open.\r\n    const [ isOpen, setOpen ] = useState( false );\r\n\r\n    // Title.\r\n    const title = isAllSelected ? __( 'Download', 'newsletter-optin-box' ) : __( 'Download Selected', 'newsletter-optin-box' );\r\n\r\n    const modalTitle = isAllSelected ? sprintf(\r\n        /* translators: %s: number of records */\r\n        __( 'Download all %s records', 'newsletter-optin-box' ),\r\n        recordsCount\r\n    ) : sprintf(\r\n        /* translators: %s: number of records */\r\n        __( 'Download %s selected records', 'newsletter-optin-box' ),\r\n        recordsCount\r\n    );\r\n\r\n    return (\r\n        <>\r\n            <Button\r\n                onClick={ () => setOpen( true ) }\r\n                variant=\"tertiary\"\r\n                text={ title }\r\n                label={ !isAllSelected ? __( 'Download Selected', 'newsletter-optin-box' ) : __( 'Download all matching records', 'newsletter-optin-box' ) }\r\n                showTooltip\r\n            />\r\n\r\n            { isOpen && (\r\n                <Modal title={ modalTitle } onRequestClose={ () => setOpen( false ) }>\r\n                    <div className=\"hizzle-records-export-modal__body\">\r\n                        <ErrorBoundary>\r\n                            <ExportModal query={ query } />\r\n                        </ErrorBoundary>\r\n                    </div>\r\n                </Modal>\r\n            ) }\r\n\r\n        </>\r\n    );\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport React, { useState } from \"react\";\r\n\r\n/**\r\n * WordPress dependencies.\r\n */\r\nimport { useProvidedCollectionConfig } from '@hizzlewp/store';\r\n\r\n/**\r\n * Internal dependencies.\r\n */\r\nimport { Download } from './download';\r\nimport { SelectFields } from './select-fields';\r\n\r\n/**\r\n * The modal content.\r\n *\r\n */\r\nexport const Modal = ( { query } ) => {\r\n\r\n    // Prepare state.\r\n    const { config: { hidden, ignore, props } } = useProvidedCollectionConfig();\r\n    const [ fields, setFields ] = useState( ( props\r\n        .map( ( field ) => ( hidden.includes( field.name ) || ignore.includes( field.name ) ) ? null : field.name )\r\n        .filter( Boolean )\r\n    ) );\r\n    const [ step, setStep ] = useState( 'fields' );\r\n\r\n    // If we are showing fields...\r\n    if ( 'fields' === step ) {\r\n        return (\r\n            <SelectFields\r\n                fields={ fields }\r\n                setFields={ setFields }\r\n                next={ () => setStep( 'progress' ) }\r\n            />\r\n        );\r\n    }\r\n\r\n    // If we are showing the download progress...\r\n    return (\r\n        <Download\r\n            fields={ fields }\r\n            query={ query }\r\n            back={ () => setStep( 'fields' ) }\r\n        />\r\n    );\r\n}\r\n","/**\r\n * External dependencies.\r\n */\r\nimport React, { useMemo } from 'react';\r\n/**\r\n * WordPress dependencies.\r\n */\r\nimport { Flex, FlexItem, ToggleControl, Button, Icon } from '@wordpress/components';\r\nimport { __ } from '@wordpress/i18n';\r\n\r\n/**\r\n * HizzleWP dependencies.\r\n */\r\nimport { useProvidedCollectionConfig } from '@hizzlewp/store';\r\n\r\n/**\r\n * Allows the user to select which fields to export.\r\n *\r\n * @param {Object} args\r\n * @param {Array} args.fields The fields to export.\r\n * @param {Function} args.setFields The function to update the fields.\r\n * @param {Object} args.schema The schema of the collection.\r\n * @param {Array} args.schema.schema The schema of the collection.\r\n * @param {Array} args.schema.ignore The fields to ignore.\r\n * @param {Function} args.next The function to go to the next step.\r\n */\r\nexport const SelectFields = ( { fields, setFields, next } ) => {\r\n    const { config: { ignore, props } } = useProvidedCollectionConfig();\r\n    const schema = useMemo( () => props.filter( ( field ) => !ignore.includes( field.name ) ), [ props, ignore ] );\r\n\r\n    return (\r\n        <Flex direction={ 'column' } gap={ 4 }>\r\n\r\n            <FlexItem>\r\n                <p className=\"description\">\r\n                    { __( 'Select the fields to include in your exported file', 'newsletter-optin-box' ) }\r\n                </p>\r\n            </FlexItem>\r\n\r\n            { schema.map( ( field ) => {\r\n                return (\r\n                    <FlexItem key={ field.name }>\r\n                        <ToggleControl\r\n                            label={ field.label === field.description ? field.label : `${ field.label } (${ field.description })` }\r\n                            checked={ fields.includes( field.name ) }\r\n                            onChange={ () => {\r\n                                if ( fields.includes( field.name ) ) {\r\n                                    setFields( fields.filter( ( name ) => name !== field.name ) );\r\n                                } else {\r\n                                    setFields( [ ...fields, field.name ] );\r\n                                }\r\n                            } }\r\n                            __nextHasNoMarginBottom\r\n                        />\r\n                    </FlexItem>\r\n                )\r\n            } ) }\r\n\r\n            <FlexItem>\r\n                <Button className=\"hizzlewp-block-button\" variant=\"primary\" onClick={ next }>\r\n                    <Icon icon=\"download\" />\r\n                    { __( 'Download', 'newsletter-optin-box' ) }\r\n                </Button>\r\n            </FlexItem>\r\n        </Flex>\r\n    );\r\n}\r\n","/**\r\n * External dependencies.\r\n */\r\nimport React from 'react';\r\n\r\n/**\r\n * WordPress dependencies.\r\n */\r\nimport { __ } from \"@wordpress/i18n\";\r\nimport { __experimentalHStack as HStack, FlexItem } from \"@wordpress/components\";\r\nimport { useSelect } from \"@wordpress/data\";\r\n\r\n/**\r\n * HizzleWP dependencies.\r\n */\r\nimport { ErrorBoundary } from '@hizzlewp/components';\r\nimport { useProvidedCollection, store as hizzleStore } from '@hizzlewp/store';\r\n\r\n/**\r\n * Local dependencies.\r\n */\r\nimport { ExportButton } from \"./export\";\r\nimport { BulkDelete } from \"./delete\";\r\nimport { BulkEdit } from \"./edit\";\r\n\r\n/**\r\n * Get the bulk action arguments.\r\n *\r\n * @param {Record<string, any>} query The query.\r\n * @returns The bulk action arguments.\r\n */\r\nexport const useBulkActionArgs = ( query: Record<string, any> ) => {\r\n\r\n\t// If we're here, the namespace and collection are provided.\r\n\tconst { namespace, collection } = useProvidedCollection() || {};\r\n\r\n\t// Get the selected records.\r\n\tconst records = useSelect(\r\n\t\t( select ) => ( {\r\n\t\t\tselected: select( hizzleStore ).getSelectedCollectionRecords( namespace as string, collection as string, query ),\r\n\t\t\tisAllSelected: select( hizzleStore ).getIsAllCollectionRecordsSelected( namespace as string, collection as string, query ),\r\n\t\t\tmatchingRecordsCount: select( hizzleStore ).getCollectionRecordsTotalItems( namespace as string, collection as string, query ),\r\n\t\t} ),\r\n\t\t[ namespace, collection, query ]\r\n\t);\r\n\r\n\t// Get the selected records.\r\n\tconst selected = Object.values( records.selected ).filter( Boolean );\r\n\r\n\t// Use the query if we're selecting all records or if there are no selected records.\r\n\tconst isAllSelected = records.isAllSelected || !selected.length;\r\n\r\n\tconst toIgnore = [ 'order', 'orderby', 'paged', 'per_page' ];\r\n\tconst filteredQuery = Object.fromEntries(\r\n\t\tObject.entries( query ).filter( ( [ key ] ) => !toIgnore.includes( key ) )\r\n\t);\r\n\r\n\treturn {\r\n\t\tisAllSelected,\r\n\t\tquery: isAllSelected ? filteredQuery : {\r\n\t\t\tinclude: Object.keys( records.selected ).filter( key => records.selected[ key ] ),\r\n\t\t},\r\n\t\trecordsCount: isAllSelected ? records.matchingRecordsCount : selected.length,\r\n\t}\r\n}\r\n\r\n/**\r\n * Action item.\r\n *\r\n * @param {React.ReactNode} children The children.\r\n * @returns The action item.\r\n */\r\nconst ActionItem: React.FC<{ children: React.ReactNode }> = ( { children } ) => {\r\n\treturn (\r\n\r\n\t\t<FlexItem>\r\n\t\t\t<ErrorBoundary>\r\n\t\t\t\t{ children }\r\n\t\t\t</ErrorBoundary>\r\n\t\t</FlexItem>\r\n\t);\r\n}\r\n\r\n/**\r\n * Header.\r\n *\r\n * @param {Record<string, any>} query The query.\r\n * @returns The header.\r\n */\r\nexport const Header: React.FC<{ query: Record<string, any> }> = ( { query } ) => {\r\n\tconst args = useBulkActionArgs( query );\r\n\r\n\treturn (\r\n\t\t<HStack>\r\n\t\t\t<ActionItem>\r\n\t\t\t\t<BulkEdit { ...args } isBulkEditing />\r\n\t\t\t</ActionItem>\r\n\t\t\t<ActionItem>\r\n\t\t\t\t<ExportButton { ...args } />\r\n\t\t\t</ActionItem>\r\n\t\t\t<ActionItem>\r\n\t\t\t\t<BulkDelete { ...args } />\r\n\t\t\t</ActionItem>\r\n\t\t</HStack>\r\n\t);\r\n};\r\n","/**\r\n * External dependencies\r\n */\r\nimport React, { useMemo, useCallback } from \"react\";\r\n\r\n/**\r\n * WordPress dependencies.\r\n */\r\nimport {\r\n\tNotice,\r\n\tFill,\r\n} from \"@wordpress/components\";\r\nimport { useDispatch } from '@wordpress/data';\r\n\r\n/**\r\n * HizzleWP dependencies.\r\n */\r\nimport { ErrorBoundary } from '@hizzlewp/components';\r\nimport { useCollectionRecords, useProvidedCollectionConfig, store as hizzleStore, getRawValue } from '@hizzlewp/store';\r\nimport { useQuery, updateQueryString } from '@hizzlewp/history';\r\nimport { Records, PER_PAGE_OPTIONS } from '@hizzlewp/records';\r\nimport type { TableProviderProps } from '@hizzlewp/records/build-types/components/table/context';\r\nimport { usePreferences } from '@hizzlewp/interface';\r\n\r\n/**\r\n * Local dependencies.\r\n */\r\nimport { DisplayCell } from './display-cell';\r\nimport { Header } from './header';\r\nimport { FiltersButton, useFilters, columnFiltersToFlatFilters } from './filters';\r\nimport { ItemActions } from \"./item-actions\";\r\nimport { SavedFiltersManager } from './saved-filters';\r\n\r\n/**\r\n * Returns a prepared query.\r\n *\r\n * @returns {Record<string, any>} The prepared query.\r\n */\r\nexport const usePreparedQuery = ( namespace: string, collection: string ): Record<string, any> => {\r\n\r\n\t// Prepare the state saved in preferences.\r\n\tconst { preferences } = usePreferences( 'recordsTablePreferences', `${ namespace }/${ collection }` );\r\n\r\n\t// Current query.\r\n\tconst query = useQuery();\r\n\r\n\t// Current filters.\r\n\tconst { preparedFilters } = useFilters();\r\n\r\n\treturn useMemo( () => {\r\n\t\tconst preparedQuery: Record<string, any> = { ...query, ...preparedFilters };\r\n\r\n\t\tif ( !query.orderby && preferences?.sorting?.[ 0 ]?.id ) {\r\n\t\t\tpreparedQuery.orderby = preferences.sorting[ 0 ].id;\r\n\t\t\tpreparedQuery.order = preferences.sorting[ 0 ].desc ? 'desc' : 'asc';\r\n\t\t}\r\n\r\n\t\tif ( !query.per_page && preferences?.pagination?.pageSize ) {\r\n\t\t\tpreparedQuery.per_page = preferences.pagination.pageSize;\r\n\t\t}\r\n\r\n\t\t// If per_page is set but not in PER_PAGE_OPTIONS, default to -1 (show all)\r\n\t\tif ( preparedQuery.per_page && !PER_PAGE_OPTIONS.includes( Number( preparedQuery.per_page ) ) ) {\r\n\t\t\tpreparedQuery.per_page = -1;\r\n\t\t}\r\n\r\n\t\t// Remove page and hizzlewp_filters from the query.\r\n\t\tdelete preparedQuery.page;\r\n\t\tdelete preparedQuery.hizzlewp_filters;\r\n\r\n\t\treturn preparedQuery;\r\n\t}, [ query, preparedFilters, preferences ] );\r\n};\r\n\r\n/**\r\n * Renders a records overview table for the matching path.\r\n *\r\n * @returns The records table.\r\n */\r\nexport const RecordsTable = () => {\r\n\t// If we're here, the config is already resolved and won't return undefined.\r\n\tconst { config: { namespace, collection, props, ignore, hidden, badges, labels } } = useProvidedCollectionConfig() || {};\r\n\r\n\t// Prepare the state saved in preferences.\r\n\tconst { preferences, setPreferences } = usePreferences( 'recordsTablePreferences', `${ namespace }/${ collection }` );\r\n\r\n\t// Backwards compatibility.\r\n\tconst { preferences: viewPreferences } = usePreferences( 'view', `${ namespace }/${ collection }` );\r\n\r\n\t// Current query.\r\n\tconst query = useQuery();\r\n\tconst preparedQuery = usePreparedQuery( namespace, collection );\r\n\r\n\t// Record results for the current query.\r\n\tconst results = useCollectionRecords( namespace, collection, preparedQuery );\r\n\r\n\t// Available columns.\r\n\tconst { columns, primaryColumn } = useMemo( () => {\r\n\t\tconst columns: TableProviderProps<Record<string, any>>[ 'columns' ] = [];\r\n\t\tlet primaryColumn = '';\r\n\r\n\t\tprops.forEach( ( prop ) => {\r\n\t\t\t// Abort if dynamic column.\r\n\t\t\tif ( ( prop.is_textarea && !prop.is_tokens && ( !prop.enum || Array.isArray( prop.enum ) ) ) || ignore.includes( prop.name ) || 'hide' === prop.js_props?.table ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ( prop.is_primary ) {\r\n\t\t\t\tprimaryColumn = prop.name;\r\n\t\t\t}\r\n\r\n\t\t\tcolumns.push( {\r\n\t\t\t\taccessorKey: prop.name,\r\n\t\t\t\theader: prop.js_props?.table_label || prop.label,\r\n\t\t\t\tenableSorting: !prop.is_dynamic && !prop.is_meta,\r\n\t\t\t\tenableColumnFilter: !prop.is_dynamic,\r\n\t\t\t\tenableHiding: !prop.is_primary,\r\n\t\t\t\tcell: ( { row } ) => (\r\n\t\t\t\t\t<DisplayCell\r\n\t\t\t\t\t\trow={ row.original }\r\n\t\t\t\t\t\theader={ prop }\r\n\t\t\t\t\t\tisBadge={ Array.isArray( badges ) && badges.includes( prop.name ) }\r\n\t\t\t\t\t\tnamespace={ namespace }\r\n\t\t\t\t\t\tcollection={ collection }\r\n\t\t\t\t\t/>\r\n\t\t\t\t),\r\n\t\t\t\tmeta: {\r\n\t\t\t\t\tis_primary: prop.is_primary,\r\n\t\t\t\t\toptions: prop.enum,\r\n\t\t\t\t\tmultiple: prop.multiple,\r\n\t\t\t\t\tis_dynamic: prop.is_dynamic,\r\n\t\t\t\t\tis_boolean: prop.is_boolean,\r\n\t\t\t\t\tis_numeric: prop.is_numeric || prop.is_float,\r\n\t\t\t\t\tis_date: prop.is_date,\r\n\t\t\t\t\tis_tokens: prop.is_tokens,\r\n\t\t\t\t\tsuggestions: prop.suggestions,\r\n\t\t\t\t},\r\n\t\t\t} );\r\n\t\t} );\r\n\r\n\t\t// Add actions column.\r\n\t\tcolumns.push( {\r\n\t\t\tid: 'hizzlewp-actions',\r\n\t\t\theader: 'Actions',\r\n\t\t\tenableSorting: false,\r\n\t\t\tenableColumnFilter: false,\r\n\t\t\tenableHiding: false,\r\n\t\t\tenablePinning: false,\r\n\t\t\tcell: ( { row } ) => (\r\n\t\t\t\t<ItemActions\r\n\t\t\t\t\tactions={ row.original.hizzlewp_actions }\r\n\t\t\t\t\tnamespace={ namespace }\r\n\t\t\t\t\tcollection={ collection }\r\n\t\t\t\t\tid={ getRawValue( row.original.id ) }\r\n\t\t\t\t/>\r\n\t\t\t),\r\n\t\t} );\r\n\r\n\t\treturn { columns, primaryColumn };\r\n\t}, [ props, ignore ] );\r\n\r\n\tconst columnVisibility = useMemo( () => {\r\n\t\tconst hiddenColumns = Array.isArray( viewPreferences?.hiddenFields ) ? viewPreferences?.hiddenFields : hidden;\r\n\r\n\t\treturn hiddenColumns.reduce( ( acc, column ) => {\r\n\t\t\tacc[ column ] = false;\r\n\t\t\treturn acc;\r\n\t\t}, {} );\r\n\t}, [ hidden, viewPreferences ] );\r\n\r\n\t// Current filters.\r\n\tconst { filters } = useFilters();\r\n\r\n\t// State.\r\n\tconst state = useMemo( () => {\r\n\t\tconst querySort = query.orderby;\r\n\t\tconst queryOrder = query.order || 'desc';\r\n\t\tconst isShowingAll = preparedQuery.per_page && Number( preparedQuery.per_page ) === -1;\r\n\r\n\t\tconst state = {\r\n\t\t\tcolumnVisibility,\r\n\t\t\tcolumnPinning: {\r\n\t\t\t\tleft: [ 'hizzlewp-selection', primaryColumn ].filter( Boolean ),\r\n\t\t\t\tright: [ 'hizzlewp-actions' ],\r\n\t\t\t},\r\n\t\t\t...preferences,\r\n\t\t\tsorting: querySort ? [ { id: querySort, desc: queryOrder === 'desc' } ] : ( preferences?.sorting || [] ),\r\n\t\t\tpagination: {\r\n\t\t\t\tpageSize: isShowingAll ? results.totalItems : ( query.per_page || preferences?.pagination?.pageSize || 25 ),\r\n\r\n\t\t\t\t// Don't read the current page from preferences, as it's not saved.\r\n\t\t\t\tpageIndex: isShowingAll ? 0 : ( query.paged ? ( Number( query.paged ) - 1 ) : 0 ),\r\n\t\t\t},\r\n\t\t\trowSelection: results.selected,\r\n\t\t\tglobalFilter: query.search || '',\r\n\t\t\tcolumnFilters: filters,\r\n\t\t} as Partial<TableProviderProps<Record<string, any>>[ 'state' ]>;\r\n\r\n\t\treturn state;\r\n\t}, [ results.selected, results.totalItems, query, preferences, filters ] );\r\n\r\n\t// Update state.\r\n\tconst onChange = useCallback( ( state: Partial<TableProviderProps<Record<string, any>>[ 'state' ]> ) => {\r\n\t\tsetPreferences( state );\r\n\r\n\t\tconst isShowingAll = state?.pagination?.pageSize && !PER_PAGE_OPTIONS.includes( Number( state?.pagination?.pageSize ) );\r\n\t\tupdateQueryString( {\r\n\t\t\torderby: state?.sorting?.[ 0 ]?.id || '',\r\n\t\t\torder: state?.sorting?.[ 0 ]?.desc ? 'desc' : 'asc',\r\n\t\t\tper_page: isShowingAll ? '-1' : `${ state?.pagination?.pageSize || 25 }`,\r\n\t\t\tpaged: isShowingAll ? '1' : `${ ( state?.pagination?.pageIndex || 0 ) + 1 }`,\r\n\t\t} );\r\n\t}, [ setPreferences ] );\r\n\r\n\t// Toggle a record's selection.\r\n\tconst { setSelectedCollectionRecords } = useDispatch( hizzleStore );\r\n\r\n\tconst isLoading = results.isResolving || !results.hasResolved;\r\n\r\n\tif ( !isLoading && results.status === 'ERROR' ) {\r\n\t\treturn (\r\n\t\t\t<Notice status=\"error\" isDismissible={ false }>\r\n\t\t\t\t{ results.error?.message || 'An unknown error occurred.' }\r\n\t\t\t</Notice>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<ErrorBoundary>\r\n\t\t\t\t<Fill name={ `end/in/filters/${ namespace }/${ collection }` }>\r\n\t\t\t\t\t<SavedFiltersManager query={ query } />\r\n\t\t\t\t</Fill>\r\n\t\t\t</ErrorBoundary>\r\n\t\t\t<ErrorBoundary>\r\n\t\t\t\t<Records\r\n\t\t\t\t\trowCount={ results.totalItems || 0 }\r\n\t\t\t\t\tdata={ results.records || [] }\r\n\t\t\t\t\tcolumns={ columns }\r\n\t\t\t\t\tisLoading={ isLoading }\r\n\t\t\t\t\tenableSorting\r\n\t\t\t\t\tenablePagination\r\n\t\t\t\t\tstate={ state }\r\n\t\t\t\t\tonChange={ onChange }\r\n\t\t\t\t\tenableRowSelection={ true }\r\n\t\t\t\t\tonRowSelectionChange={\r\n\t\t\t\t\t\t( rowSelection ) => setSelectedCollectionRecords( namespace, collection, preparedQuery, rowSelection( state?.rowSelection || {} ) )\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonColumnPinningChange={\r\n\t\t\t\t\t\t( columnPinning ) => onChange( { ...state, columnPinning: columnPinning( state?.columnPinning || {} ) } )\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonGlobalFilterChange={\r\n\t\t\t\t\t\t( globalFilter ) => {\r\n\t\t\t\t\t\t\tupdateQueryString( { search: globalFilter || '', paged: '1' } );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonColumnFiltersChange={\r\n\t\t\t\t\t\t( columnFilters ) => {\r\n\t\t\t\t\t\t\tconst newValue = Array.isArray( columnFilters ) && columnFilters.length > 0 ? JSON.stringify( columnFiltersToFlatFilters( columnFilters ) ) : '';\r\n\t\t\t\t\t\t\tupdateQueryString( { hizzlewp_filters: newValue, paged: '1' } );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgetRowId={ ( row ) => getRawValue( row.id as string ) }\r\n\t\t\t\t\tsearchLabel={ labels?.search_items || 'Search' }\r\n\t\t\t\t\tbulkActions={ <Header query={ preparedQuery } /> }\r\n\t\t\t\t\tslotName={ `${ namespace }/${ collection }` }\r\n\t\t\t\t\tfiltersButton={\r\n\t\t\t\t\t\t<ErrorBoundary>\r\n\t\t\t\t\t\t\t<FiltersButton />\r\n\t\t\t\t\t\t</ErrorBoundary>\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t</ErrorBoundary>\r\n\t\t</>\r\n\t);\r\n}\r\n","/**\r\n * External dependencies.\r\n */\r\nimport React, { useMemo } from 'react';\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\t__experimentalHStack as HStack,\r\n\tDropdownMenu,\r\n\tMenuItem,\r\n\tButton,\r\n} from '@wordpress/components';\r\nimport { ButtonProps } from '@wordpress/components/build-types/button/types';\r\nimport { __ } from '@wordpress/i18n';\r\nimport { moreVertical } from '@wordpress/icons';\r\n\r\n/**\r\n * HizzleWP dependencies\r\n */\r\nimport { updatePath } from '@hizzlewp/history';\r\n\r\n/**\r\n * Local dependencies\r\n */\r\nimport { DeleteAction, RemoteAction, CopyAction } from '../../actions';\r\n\r\n/**\r\n * Type definitions\r\n */\r\ntype Action = Omit<Partial<ButtonProps>, 'onClick'> & {\r\n\tid: string;\r\n\ttype?: 'delete' | 'remote' | 'copy' | 'edit';\r\n\tisPrimary?: boolean;\r\n\t[ key: string ]: any;\r\n};\r\n\r\ntype ItemActionsProps = {\r\n\tactions?: Action[];\r\n\tisOverview?: boolean;\r\n\tnamespace: string;\r\n\tcollection: string;\r\n\tid: string;\r\n};\r\n\r\nconst EMPTY_ACTIONS: Action[] = [];\r\nexport const ItemActions = ( { actions, isOverview = false, ...props }: ItemActionsProps ) => {\r\n\r\n\tconst { primaryActions, preparedActions } = useMemo(\r\n\t\t() => {\r\n\t\t\tconst preparedActions = [ ...actions || EMPTY_ACTIONS ];\r\n\r\n\t\t\t// Prepend edit action if it doesn't exist.\r\n\t\t\tif ( !isOverview && !preparedActions.find( ( action ) => action.id === 'edit' ) ) {\r\n\t\t\t\tpreparedActions.unshift( {\r\n\t\t\t\t\tid: 'edit',\r\n\t\t\t\t\ttype: 'edit',\r\n\t\t\t\t\ttext: __( 'Edit' ),\r\n\t\t\t\t\ticon: 'edit',\r\n\t\t\t\t\tisPrimary: true,\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\r\n\t\t\t// Append delete action if it doesn't exist.\r\n\t\t\tif ( !preparedActions.find( ( action ) => action.id === 'delete' ) ) {\r\n\t\t\t\tpreparedActions.push( {\r\n\t\t\t\t\tid: 'delete',\r\n\t\t\t\t\ttype: 'delete',\r\n\t\t\t\t\ttext: __( 'Delete' ),\r\n\t\t\t\t\tisPrimary: isOverview,\r\n\t\t\t\t\ticon: 'trash',\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tprimaryActions: preparedActions.filter( ( action ) => action.isPrimary && !!action.icon ),\r\n\t\t\t\tpreparedActions,\r\n\t\t\t};\r\n\t\t},\r\n\t\t[ actions ]\r\n\t);\r\n\r\n\r\n\treturn (\r\n\t\t<HStack\r\n\t\t\tspacing={ 1 }\r\n\t\t\tjustify=\"flex-end\"\r\n\t\t\tclassName=\"hizzlewp-records-item-actions\"\r\n\t\t\tstyle={ {\r\n\t\t\t\tflexShrink: '0',\r\n\t\t\t\twidth: 'auto',\r\n\t\t\t} }\r\n\t\t\tonClick={ ( event: React.MouseEvent ) => {\r\n\t\t\t\t// Prevents onChangeSelection from triggering.\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t} }\r\n\t\t\texpanded={ false }\r\n\t\t>\r\n\t\t\t{ primaryActions.map( ( action ) => (\r\n\t\t\t\t<CompactItemAction\r\n\t\t\t\t\tkey={ action.id }\r\n\t\t\t\t\tas={ Button }\r\n\t\t\t\t\taction={ action }\r\n\t\t\t\t\tonClose={ () => { } }\r\n\t\t\t\t\t{ ...props }\r\n\t\t\t\t/>\r\n\t\t\t) ) }\r\n\t\t\t<CompactItemActions actions={ preparedActions } { ...props } isOverview={ isOverview } />\r\n\t\t</HStack>\r\n\t);\r\n}\r\n\r\ntype CompactItemActionsProps = ItemActionsProps & {\r\n\tactions: Action[];\r\n};\r\n\r\nconst CompactItemActions = ( { actions, isOverview, ...props }: CompactItemActionsProps ) => {\r\n\tlet buttonProps: Record<string, any> = {\r\n\t\tclassName: 'hizzlewp-records-all-actions-button',\r\n\t\tsize: 'compact',\r\n\t}\r\n\r\n\tif ( isOverview ) {\r\n\t\tbuttonProps = {\r\n\t\t\ticonSize: 32,\r\n\t\t\tvariant: 'tertiary',\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<DropdownMenu\r\n\t\t\tlabel={ __( 'Actions' ) }\r\n\t\t\ticon={ moreVertical }\r\n\t\t\ttoggleProps={ {\r\n\t\t\t\t...buttonProps,\r\n\t\t\t\tdisabled: !actions.length,\r\n\t\t\t} }\r\n\t\t\tpopoverProps={ {\r\n\t\t\t\tplacement: 'bottom-end',\r\n\t\t\t} }\r\n\t\t>\r\n\t\t\t{ ( { onClose } ) => (\r\n\t\t\t\t<>\r\n\t\t\t\t\t{ actions.map( ( action ) => <CompactItemAction key={ action.id } action={ action } onClose={ onClose } { ...props } /> ) }\r\n\t\t\t\t</>\r\n\t\t\t) }\r\n\t\t</DropdownMenu>\r\n\t);\r\n}\r\n\r\ntype CompactItemActionProps = Omit<ItemActionsProps, 'isOverview'> & {\r\n\taction: Action;\r\n\tonClose?: () => void;\r\n\tas?: React.ElementType;\r\n};\r\n\r\nconst CompactItemAction = ( { action, onClose, as = undefined, ...props }: CompactItemActionProps ) => {\r\n\r\n\tconst { isPrimary, type, ...actionProps } = action;\r\n\r\n\tif ( 'copy' === type ) {\r\n\t\treturn <RenderAction as={ as } Component={ CopyAction } props={ props } { ...actionProps } onClick={ onClose } />;\r\n\t}\r\n\r\n\tif ( 'delete' === type ) {\r\n\t\treturn <RenderAction as={ as } Component={ DeleteAction } props={ props } { ...actionProps } { ...props } onClick={ onClose } />;\r\n\t}\r\n\r\n\tif ( 'remote' === type ) {\r\n\t\treturn <RenderAction as={ as } Component={ RemoteAction } props={ props } { ...actionProps } { ...props } onClick={ onClose } />;\r\n\t}\r\n\r\n\tconst buttonProps = { ...actionProps };\r\n\r\n\tif ( 'edit' === type ) {\r\n\t\tbuttonProps.onClick = () => {\r\n\t\t\tupdatePath( `/${ props.namespace }/${ props.collection }/${ props.id }` );\r\n\t\t\tonClose?.();\r\n\t\t}\r\n\t}\r\n\r\n\treturn <RenderAction as={ as } props={ props } { ...buttonProps } />;\r\n}\r\n\r\ntype RenderActionProps = {\r\n\tprops: Omit<CompactItemActionProps, 'action' | 'onClose' | 'as'>;\r\n\tComponent?: React.ElementType;\r\n\tas?: React.ElementType;\r\n\tid: string;\r\n\ttext?: string;\r\n\t[ key: string ]: any;\r\n}\r\n\r\nconst RenderAction = ( { props, Component = undefined, as, text, ...extraProps }: RenderActionProps ) => {\r\n\tconst ActionAs = as || MenuItem;\r\n\tconst actionProps: Record<string, any> = { label: text, ...extraProps };\r\n\tconst RenderComponent = Component || ActionAs;\r\n\r\n\tif ( Component ) {\r\n\t\tactionProps.as = ActionAs;\r\n\t}\r\n\r\n\tif ( as ) {\r\n\t\treturn (\r\n\t\t\t<RenderComponent showTooltip { ...actionProps } />\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<RenderComponent { ...actionProps }>\r\n\t\t\t{ text }\r\n\t\t</RenderComponent>\r\n\t)\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport React, { useState, useMemo, useCallback } from \"react\";\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n\tButton,\r\n\tModal,\r\n\tSelectControl,\r\n\tNotice,\r\n\t__experimentalInputControl as InputControl,\r\n\t__experimentalVStack as VStack,\r\n\t__experimentalHStack as HStack,\r\n} from \"@wordpress/components\";\r\nimport { __, sprintf } from \"@wordpress/i18n\";\r\nimport { addQueryArgs, getQueryArgs } from '@wordpress/url';\r\n\r\n/**\r\n * HizzleWP dependencies\r\n */\r\nimport { useProvidedCollectionConfig } from \"@hizzlewp/store\";\r\nimport { usePreferences } from '@hizzlewp/interface';\r\nimport type { SelectOption } from \"@hizzlewp/components\";\r\nimport { updateQueryString, useQuery } from '@hizzlewp/history';\r\n\r\n/**\r\n * A saved filter configuration.\r\n */\r\ntype SavedFilters = { [ query: string ]: string };\r\n\r\n/**\r\n * Hook to manage saved filters using WordPress preferences\r\n */\r\nconst useSavedFilters = ( namespace: string, collection: string ) => {\r\n\tconst { preferences, setPreferences } = usePreferences<SavedFilters>( 'savedFilters', `${ namespace }/${ collection }` );\r\n\tconst savedFilters: SavedFilters = preferences || {};\r\n\r\n\t/**\r\n\t * Saves a new filter configuration.\r\n\t */\r\n\tconst saveFilter = ( name: string, query: string ) => {\r\n\t\tsetPreferences( {\r\n\t\t\t...savedFilters,\r\n\t\t\t[ prepareQueryString( query ) ]: name.trim(),\r\n\t\t} );\r\n\t};\r\n\r\n\t/**\r\n\t * Deletes a saved filter configuration.\r\n\t */\r\n\tconst deleteFilter = ( query: string ) => {\r\n\t\tsetPreferences(\r\n\t\t\tObject.fromEntries(\r\n\t\t\t\tObject.entries( savedFilters ).filter( ( [ key ] ) => key !== prepareQueryString( query ) )\r\n\t\t\t)\r\n\t\t);\r\n\t};\r\n\r\n\treturn {\r\n\t\tsavedFilters: {\r\n\t\t\t...Object\r\n\t\t\t\t.entries( savedFilters )\r\n\t\t\t\t.reduce(\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\tacc,\r\n\t\t\t\t\t\t[ query, name ] ) => ( { ...acc, [ prepareQueryString( query ) ]: name.trim() } ),\r\n\t\t\t\t\t{} as Record<string, string>\r\n\t\t\t\t)\r\n\t\t},\r\n\t\tsaveFilter,\r\n\t\tdeleteFilter,\r\n\t};\r\n};\r\n\r\n/**\r\n * Hook that returns all available filters (default + saved).\r\n */\r\nexport const useAvailableFilters = () => {\r\n\tconst { config: { namespace, collection, defaultFilters } } = useProvidedCollectionConfig();\r\n\tconst savedFilters = useSavedFilters( namespace, collection );\r\n\tconst preparedDefaultFilters: SavedFilters = {\r\n\t\t...Object\r\n\t\t\t.entries( defaultFilters || {} )\r\n\t\t\t.reduce(\r\n\t\t\t\t(\r\n\t\t\t\t\tacc,\r\n\t\t\t\t\t[ query, name ] ) => ( { ...acc, [ prepareQueryString( query ) ]: name.trim() } ),\r\n\t\t\t\t{} as Record<string, string>\r\n\t\t\t),\r\n\t};\r\n\r\n\tconst allFilters = useMemo( () => {\r\n\t\treturn {\r\n\t\t\t...savedFilters.savedFilters,\r\n\t\t\t...preparedDefaultFilters,\r\n\t\t}\r\n\t}, [ savedFilters, preparedDefaultFilters ] );\r\n\r\n\treturn {\r\n\t\t...savedFilters,\r\n\t\tdefaultFilters: preparedDefaultFilters,\r\n\t\tallFilters,\r\n\t\tgetQueryName( query: Record<string, string> ) {\r\n\t\t\treturn allFilters[ prepareQueryString( addQueryArgs( '', query ) ) ];\r\n\t\t},\r\n\t\thasNamedFilter( name: string ) {\r\n\t\t\treturn Boolean( savedFilters.savedFilters[ name.trim() ] );\r\n\t\t},\r\n\t};\r\n};\r\n\r\n/**\r\n * Modal for saving current filters\r\n */\r\nconst SaveFilterModal: React.FC<{\r\n\tonClose: () => void;\r\n\tallFilters: SavedFilters;\r\n\tonSave: ( name: string ) => void;\r\n}> = ( { onClose, allFilters, onSave } ) => {\r\n\tconst [ filterName, setFilterName ] = useState<string | undefined>( '' );\r\n\tconst [ error, setError ] = useState<string>( '' );\r\n\r\n\tconst handleSave = () => {\r\n\t\tif ( !filterName?.trim() ) {\r\n\t\t\tsetError( __( 'Please enter a filter name.', 'hizzlewp' ) );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif ( Object.values( allFilters ).find( savedName => savedName === filterName.trim() ) ) {\r\n\t\t\t// Ask for confirmation to overwrite\r\n\t\t\tif ( !window.confirm(\r\n\t\t\t\tsprintf(\r\n\t\t\t\t\t// translators: %s: filter name\r\n\t\t\t\t\t__( 'A filter named \"%s\" already exists. Do you want to overwrite it?', 'hizzlewp' ),\r\n\t\t\t\t\tfilterName.trim()\r\n\t\t\t\t)\r\n\t\t\t) ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tonSave( filterName.trim() );\r\n\t\thandleClose();\r\n\t};\r\n\r\n\tconst handleClose = () => {\r\n\t\tsetFilterName( '' );\r\n\t\tsetError( '' );\r\n\t\tonClose();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\ttitle={ __( 'Add to saved filters', 'hizzlewp' ) }\r\n\t\t\tonRequestClose={ handleClose }\r\n\t\t>\r\n\t\t\t<VStack>\r\n\t\t\t\t{ error && (\r\n\t\t\t\t\t<Notice status=\"error\" isDismissible={ false }>\r\n\t\t\t\t\t\t{ error }\r\n\t\t\t\t\t</Notice>\r\n\t\t\t\t) }\r\n\r\n\t\t\t\t<InputControl\r\n\t\t\t\t\tlabel={ __( 'Filter Name', 'hizzlewp' ) }\r\n\t\t\t\t\tvalue={ filterName }\r\n\t\t\t\t\tonChange={ setFilterName }\r\n\t\t\t\t\tplaceholder={ __( 'Enter a name for this filter set', 'hizzlewp' ) }\r\n\t\t\t\t\tonKeyDown={ ( e ) => {\r\n\t\t\t\t\t\tif ( e.key === 'Enter' ) {\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\thandleSave();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} }\r\n\t\t\t\t\t__next40pxDefaultSize\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<HStack justify=\"flex-end\" spacing={ 2 }>\r\n\t\t\t\t\t<Button variant=\"tertiary\" onClick={ handleClose }>\r\n\t\t\t\t\t\t{ __( 'Cancel', 'hizzlewp' ) }\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button variant=\"primary\" onClick={ handleSave }>\r\n\t\t\t\t\t\t{ __( 'Save Filter', 'hizzlewp' ) }\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</HStack>\r\n\t\t\t</VStack>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\n/**\r\n * Main component for managing saved filters\r\n */\r\nexport const SavedFiltersManager: React.FC<{ query: Record<string, any> }> = ( { query } ) => {\r\n\tconst preparedQuery = prepareQueryString( addQueryArgs( '', query ) );\r\n\tconst { saveFilter, deleteFilter, allFilters, defaultFilters } = useAvailableFilters();\r\n\tconst isQuerySaved = !!allFilters[ preparedQuery ];\r\n\tconst isDefaultQuery = !!defaultFilters[ preparedQuery ];\r\n\tconst [ isSaveModalOpen, setIsSaveModalOpen ] = useState( false );\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{ ( isQuerySaved && !isDefaultQuery ) && (\r\n\t\t\t\t<Button\r\n\t\t\t\t\tsize=\"compact\"\r\n\t\t\t\t\tvariant=\"tertiary\"\r\n\t\t\t\t\tonClick={ () => deleteFilter( preparedQuery ) }\r\n\t\t\t\t\ticon=\"star-filled\"\r\n\t\t\t\t\tlabel={ __( 'Remove from saved filters', 'hizzlewp' ) }\r\n\t\t\t\t\tisDestructive\r\n\t\t\t\t\tshowTooltip\r\n\t\t\t\t/>\r\n\t\t\t) }\r\n\r\n\t\t\t{ !isQuerySaved && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tsize=\"compact\"\r\n\t\t\t\t\t\tonClick={ () => setIsSaveModalOpen( true ) }\r\n\t\t\t\t\t\ticon=\"star-empty\"\r\n\t\t\t\t\t\tlabel={ __( 'Add to saved filters', 'hizzlewp' ) }\r\n\t\t\t\t\t\tshowTooltip\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t{ isSaveModalOpen && (\r\n\t\t\t\t\t\t<SaveFilterModal\r\n\t\t\t\t\t\t\tonClose={ () => setIsSaveModalOpen( false ) }\r\n\t\t\t\t\t\t\tallFilters={ allFilters }\r\n\t\t\t\t\t\t\tonSave={ ( name ) => saveFilter( name, preparedQuery ) }\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t) }\r\n\t\t\t\t</>\r\n\t\t\t) }\r\n\t\t</>\r\n\t);\r\n};\r\n\r\n/**\r\n * Allows a user to select saved filters / views.\r\n */\r\nexport const SavedFiltersDropdown: React.FC = () => {\r\n\tconst { allFilters } = useAvailableFilters();\r\n\tconst query = addQueryArgs( '', useQuery() );\r\n\r\n\t// Prepare options for the select control.\r\n\tconst options: SelectOption[] = [\r\n\t\t{\r\n\t\t\tlabel: __( 'Select a view...', 'hizzlewp' ),\r\n\t\t\tvalue: '',\r\n\t\t},\r\n\t\t...Object.entries( allFilters ).map( ( [ value, label ] ) => ( { label, value } ) )\r\n\t];\r\n\r\n\tconst onChange = useCallback( ( newQuery: string ) => {\r\n\t\tif ( newQuery ) {\r\n\t\t\tupdateQueryString( { ...getQueryArgs( prepareQueryString( newQuery ) ), paged: '1' } );\r\n\t\t}\r\n\t}, [ updateQueryString ] );\r\n\r\n\t// Abort if no filters available.\r\n\tif ( Object.keys( allFilters ).length === 0 ) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<SelectControl\r\n\t\t\tlabel={ __( 'Select a view...', 'hizzlewp' ) }\r\n\t\t\tvalue={ prepareQueryString( query ) }\r\n\t\t\toptions={ options }\r\n\t\t\tonChange={ onChange }\r\n\t\t\tstyle={ { maxWidth: 200 } }\r\n\t\t\t__nextHasNoMarginBottom\r\n\t\t\thideLabelFromVision\r\n\t\t/>\r\n\t);\r\n};\r\n\r\n/**\r\n * Prepares a query string.\r\n */\r\nexport const prepareQueryString = ( query: string ) => {\r\n\r\n\t// Abort if no query.\r\n\tif ( !query ) {\r\n\t\treturn '';\r\n\t}\r\n\r\n\t// Parse query args.\r\n\tconst { paged, per_page, page, ...queryArgs } = getQueryArgs( query );\r\n\r\n\t// Abort if no query args.\r\n\tif ( Object.keys( queryArgs ).length === 0 ) {\r\n\t\treturn '';\r\n\t}\r\n\r\n\t// Order query args.\r\n\tconst orderedQueryArgs = Object.keys( queryArgs ).sort().reduce( ( obj, key ) => {\r\n\t\tobj[ key ] = queryArgs[ key ];\r\n\t\treturn obj;\r\n\t}, {} as Record<string, unknown> );\r\n\r\n\t// Return ordered query string.\r\n\treturn addQueryArgs( '', orderedQueryArgs );\r\n};\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport { useDispatch } from \"@wordpress/data\";\r\nimport { store as noticesStore } from \"@wordpress/notices\";\r\nimport { Button } from \"@wordpress/components\";\r\nimport { useCopyToClipboard } from '@wordpress/compose';\r\n\r\n/**\r\n * Displays a copy link.\r\n */\r\nexport const CopyButton = ( { value, label } ) => {\r\n\r\n    const { createInfoNotice } = useDispatch( noticesStore );\r\n\r\n    const ref = useCopyToClipboard(\r\n        value,\r\n        () => {\r\n            createInfoNotice(\r\n                'Copied to clipboard.',\r\n                {\r\n                    type: 'snackbar',\r\n                }\r\n            );\r\n        }\r\n    );\r\n\r\n    return (\r\n        <Button label=\"Click to copy\" variant=\"secondary\" ref={ ref } showTooltip>\r\n            { label }\r\n        </Button>\r\n    );\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport React, { useState, useCallback } from \"react\";\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\nimport { __ } from '@wordpress/i18n';\r\nimport {\r\n    __experimentalVStack as VStack,\r\n    __experimentalHStack as HStack,\r\n    __experimentalText as Text,\r\n    Button,\r\n    Modal,\r\n    Notice,\r\n} from \"@wordpress/components\";\r\nimport { trash } from \"@wordpress/icons\";\r\n\r\n/**\r\n * HizzleWP dependencies\r\n */\r\nimport { store as hizzleStore } from '@hizzlewp/store';\r\nimport { updatePath } from '@hizzlewp/history';\r\n\r\n/**\r\n * The props for the delete modal.\r\n */\r\ntype DeleteModalProps = {\r\n    /**\r\n     * The namespace of the collection.\r\n     */\r\n    namespace: string;\r\n\r\n    /**\r\n     * The collection of the record.\r\n     */\r\n    collection: string;\r\n\r\n    /**\r\n     * The ID of the record.\r\n     */\r\n    id: string;\r\n\r\n    /**\r\n     * The confirmation message.\r\n     */\r\n    confirm?: string;\r\n\r\n    /**\r\n     * A function to close the modal.\r\n     */\r\n    closeModal: () => void;\r\n}\r\n\r\n/**\r\n * Displays a delete modal.\r\n */\r\nexport const DeleteModal = ( { confirm = undefined, closeModal, namespace, collection, id }: DeleteModalProps ) => {\r\n\r\n    // Prepare the state.\r\n    const { deleteCollectionRecord } = useDispatch( hizzleStore );\r\n    const { createSuccessNotice, createErrorNotice } = useDispatch( noticesStore );\r\n\r\n    const { isDeleting, deletingError } = useSelect(\r\n        ( select ) => {\r\n\r\n            return {\r\n                isDeleting: select( hizzleStore ).isDeletingCollectionRecord(\r\n                    namespace,\r\n                    collection,\r\n                    id\r\n                ),\r\n                deletingError: select( hizzleStore ).getLastCollectionDeleteError(\r\n                    namespace,\r\n                    collection,\r\n                    id\r\n                ),\r\n            };\r\n        },\r\n        [ namespace, collection, id ]\r\n    );\r\n\r\n    // A function to delete a record.\r\n    const onDeleteRecord = useCallback( ( e ) => {\r\n\r\n        e?.preventDefault();\r\n\r\n        // Delete once.\r\n        if ( isDeleting ) {\r\n            return;\r\n        }\r\n\r\n        deleteCollectionRecord( namespace, collection, id )\r\n            .then( () => {\r\n                createSuccessNotice(\r\n                    __( 'Record deleted successfully.', 'newsletter-optin-box' ),\r\n                    {\r\n                        type: 'snackbar',\r\n                    }\r\n                );\r\n\r\n                updatePath( `/${ namespace }/${ collection }` );\r\n            } )\r\n            .catch( ( error ) => {\r\n                createErrorNotice(\r\n                    error.message,\r\n                    {\r\n                        isDismissible: true,\r\n                        type: 'default',\r\n                    }\r\n                );\r\n\r\n                // Scroll to the top of the page after saving\r\n                const mainContent = document.getElementById( 'hizzlewp-collection__main-content' );\r\n                if ( mainContent ) {\r\n                    mainContent.parentElement?.scrollTo( {\r\n                        top: 0,\r\n                        behavior: 'smooth'\r\n                    } );\r\n                }\r\n            } );\r\n    }, [ deleteCollectionRecord, createSuccessNotice, createErrorNotice, namespace, collection, id ] );\r\n\r\n    return (\r\n        <VStack spacing={ 8 }>\r\n            <Text variant=\"muted\">\r\n                { confirm || __( 'Are you sure you want to delete this item?', 'newsletter-optin-box' ) }\r\n            </Text>\r\n            <HStack justify=\"flex-start\">\r\n                <Button variant=\"primary\" isDestructive onClick={ onDeleteRecord } isBusy={ isDeleting } __next40pxDefaultSize>\r\n                    { isDeleting ? __( 'Deleting...', 'newsletter-optin-box' ) : __( 'Delete', 'newsletter-optin-box' ) }\r\n                </Button>\r\n                <Button variant=\"secondary\" onClick={ closeModal } __next40pxDefaultSize>\r\n                    { __( 'Cancel', 'newsletter-optin-box' ) }\r\n                </Button>\r\n            </HStack>\r\n            { deletingError && <Notice status=\"error\" isDismissible={ false }>{ deletingError?.message }</Notice> }\r\n        </VStack>\r\n    );\r\n}\r\n\r\n/**\r\n * The props for the delete link.\r\n */\r\ntype DeleteLinkProps = Omit<DeleteModalProps, 'closeModal'> & {\r\n    /**\r\n     * The label of the link.\r\n     */\r\n    label: string;\r\n}\r\n\r\n/**\r\n * Displays a delete link.\r\n */\r\nexport const DeleteLink = ( { label, ...extra }: DeleteLinkProps ) => {\r\n\r\n    // Prepare the state.\r\n    const [ isModalOpen, setIsModalOpen ] = useState( false );\r\n\r\n    return (\r\n        <>\r\n            <Button isDestructive onClick={ () => setIsModalOpen( true ) } icon={ trash } variant=\"secondary\">\r\n                { label }\r\n            </Button>\r\n            { isModalOpen && (\r\n                <Modal\r\n                    title={ label }\r\n                    onRequestClose={ () => {\r\n                        setIsModalOpen( false );\r\n                    } }\r\n                >\r\n                    <DeleteModal\r\n                        { ...extra }\r\n                        closeModal={ () => setIsModalOpen( false ) }\r\n                    />\r\n                </Modal>\r\n            ) }\r\n        </>\r\n    );\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport React from \"react\";\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n    Button,\r\n    __experimentalHStack as HStack,\r\n} from \"@wordpress/components\";\r\nimport { __ } from \"@wordpress/i18n\";\r\n\r\n/**\r\n * Local dependencies\r\n */\r\nimport { DeleteLink } from \"./delete\";\r\nimport { RemoteActionLink } from \"./remote-action-link\";\r\nimport { CopyButton } from \"./copy-button\";\r\n\r\ntype ActionButton = {\r\n    label: string;\r\n    value: string;\r\n    action: string;\r\n    hide: boolean;\r\n}\r\n\r\ntype ActionButtonsProps = {\r\n    links: ActionButton[];\r\n    namespace: string;\r\n    collection: string;\r\n    id: string;\r\n}\r\n\r\n/**\r\n * Displays action links.\r\n *\r\n * @param {Object} props\r\n * @param {Array} props.links\r\n */\r\nexport const ActionButtons = ( { links, ...props } : ActionButtonsProps ) => (\r\n    <HStack justify=\"flex-end\" spacing={ 2 } wrap>\r\n        { links.map( ( { label, value, action, hide } ) => {\r\n\r\n            // Hide the link.\r\n            if ( hide ) {\r\n                return <React.Fragment key={ label } />;\r\n            }\r\n\r\n            // Delete record.\r\n            if ( 'delete' === action ) {\r\n                return <DeleteLink key={ label } label={ label } confirm={ value } { ...props } />;\r\n            }\r\n\r\n            // Remote action.\r\n            if ( 'remote' === action ) {\r\n                return <RemoteActionLink key={ label } label={ label } actionName={ value } { ...props } />;\r\n            }\r\n\r\n            // Convert &amp; to &.\r\n            if ( value ) {\r\n                value = value.replace( /&amp;/g, '&' );\r\n            }\r\n\r\n            // Copy a value.\r\n            if ( 'copy' === action ) {\r\n                return <CopyButton key={ label } label={ label } value={ value } { ...props } />;\r\n            }\r\n\r\n            // Default to a link.\r\n            return (\r\n                <Button key={ label } href={ value } variant=\"secondary\" target=\"_blank\">\r\n                    { label }\r\n                </Button>\r\n            );\r\n        } ) }\r\n    </HStack>\r\n);\r\n","/**\r\n * External dependencies\r\n */\r\nimport React, { useCallback } from \"react\";\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { useDispatch, useSelect } from '@wordpress/data';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\nimport { __ } from '@wordpress/i18n';\r\nimport {\r\n    Button,\r\n    Spinner,\r\n} from \"@wordpress/components\";\r\n\r\n/**\r\n * HizzleWP dependencies\r\n */\r\nimport { store as hizzleStore } from '@hizzlewp/store';\r\n\r\n/**\r\n * Displays a remote action link.\r\n *\r\n * @param {Object} props\r\n */\r\nexport const RemoteActionLink = ( { label, actionName, namespace, collection, id } ) => {\r\n\r\n    // Prepare the state.\r\n    const { doRemoteCollectionRecordAction } = useDispatch( hizzleStore );\r\n    const { createSuccessNotice, createErrorNotice } = useDispatch( noticesStore );\r\n\r\n    const isDoingRemoteAction = useSelect(\r\n        ( select ) => {\r\n\r\n            return select( hizzleStore ).isDoingRemoteCollectionRecordAction(\r\n                namespace,\r\n                collection,\r\n                id,\r\n                actionName,\r\n            );\r\n        },\r\n        [ namespace, collection, actionName, id ]\r\n    );\r\n\r\n    // A function to do a remote action.\r\n    const onDoAction = useCallback( ( e ) => {\r\n\r\n        e?.preventDefault();\r\n\r\n        // Do once.\r\n        if ( isDoingRemoteAction ) {\r\n            return;\r\n        }\r\n\r\n        doRemoteCollectionRecordAction( namespace, collection, id, actionName )\r\n            .then( ( res ) => {\r\n                createSuccessNotice(\r\n                    res?.message,\r\n                    {\r\n                        type: 'snackbar',\r\n                    }\r\n                );\r\n            } )\r\n            .catch( ( error ) => {\r\n                createErrorNotice(\r\n                    error.message,\r\n                    {\r\n                        isDismissible: true,\r\n                        type: 'default',\r\n                    }\r\n                );\r\n\r\n                // Scroll to the top of the page after saving\r\n                const mainContent = document.getElementById( 'hizzlewp-collection__main-content' );\r\n                if ( mainContent ) {\r\n                    mainContent.parentElement?.scrollTo( {\r\n                        top: 0,\r\n                        behavior: 'smooth'\r\n                    } );\r\n                }\r\n            } );\r\n    }, [ doRemoteCollectionRecordAction, createSuccessNotice, createErrorNotice, namespace, collection, actionName, id ] );\r\n\r\n    return (\r\n\t\t<Button variant=\"secondary\" onClick={ onDoAction }>\r\n\t\t\t{ label }\r\n\t\t\t{ isDoingRemoteAction && <Spinner /> }\r\n\t\t</Button>\r\n\t)\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n    Card as WPCard,\r\n    CardBody,\r\n    Button,\r\n    __experimentalVStack as VStack,\r\n} from \"@wordpress/components\";\r\nimport { RawHTML } from \"@wordpress/element\";\r\n\r\n/**\r\n * Displays a normal card.\r\n *\r\n * @param {Object} props\r\n * @param {String} props.heading The card heading.\r\n * @param {String} props.buttonText The card button text.\r\n * @param {Object} props.buttonLink The card button link.\r\n */\r\nexport const Card = ( { content, buttonText, buttonLink } ) => (\r\n    <WPCard variant=\"secondary\">\r\n        <CardBody>\r\n            <VStack spacing={ 8 }>\r\n                <RawHTML>\r\n                    { content }\r\n                </RawHTML>\r\n\r\n                { ( buttonText && buttonLink ) && (\r\n                    <div>\r\n                        <Button\r\n                            variant=\"secondary\"\r\n                            href={ buttonLink }\r\n                            text={ buttonText }\r\n                        />\r\n                    </div>\r\n                ) }\r\n            </VStack>\r\n        </CardBody>\r\n    </WPCard>\r\n);\r\n","/**\r\n * External dependencies\r\n */\r\nimport React, { useCallback, useMemo } from \"react\";\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from \"@wordpress/i18n\";\r\nimport { useDispatch } from '@wordpress/data';\r\nimport { store as noticesStore } from '@wordpress/notices';\r\n\r\n/**\r\n * HizzleWP dependencies\r\n */\r\nimport { useCollectionRecord, useProvidedCollectionConfig, useProvidedRecordId } from '@hizzlewp/store';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { EditRecordForm } from \"../../../edit-record-form\";\r\n\r\n/**\r\n * Allows the user to edit records.\r\n */\r\nexport const EditRecord: React.FC = () => {\r\n\r\n\t// Prepare the state.\r\n\t// If we're here, we already have a record ID and the record is already loaded.\r\n\tconst recordId = useProvidedRecordId();\r\n\tconst { config: { namespace, collection, labels, props, hidden, ignore, defaultProps, settings } } = useProvidedCollectionConfig();\r\n\tconst { editedRecord, edit, save, isSaving } = useCollectionRecord( namespace, collection, recordId as number );\r\n\tconst { createErrorNotice, createSuccessNotice, removeAllNotices } = useDispatch( noticesStore );\r\n\tconst newIgnore = useMemo( () => [ ...ignore, ...Object.keys( defaultProps || {} ) ], [ ignore, defaultProps ] );\r\n\r\n\t// A function to save a record.\r\n\tconst onSaveRecord = useCallback( ( e?: React.FormEvent<HTMLFormElement> | React.MouseEvent<HTMLButtonElement> | React.MouseEvent<HTMLAnchorElement> ) => {\r\n\r\n\t\te?.preventDefault();\r\n\r\n\t\t// Save once.\r\n\t\tif ( isSaving ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tremoveAllNotices();\r\n\r\n\t\tsave()\r\n\t\t\t.then( () => {\r\n\t\t\t\tcreateSuccessNotice(\r\n\t\t\t\t\t__( 'Record saved successfully.', 'newsletter-optin-box' ),\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: 'snackbar',\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t} )\r\n\t\t\t.catch( ( error ) => {\r\n\t\t\t\tcreateErrorNotice(\r\n\t\t\t\t\terror.message,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tisDismissible: true,\r\n\t\t\t\t\t\ttype: 'default',\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// Scroll to the top of the page after saving\r\n\t\t\t\tconst mainContent = document.getElementById( 'hizzlewp-collection__main-content' );\r\n\t\t\t\tif ( mainContent ) {\r\n\t\t\t\t\tmainContent.parentElement?.scrollTo( {\r\n\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\tbehavior: 'smooth'\r\n\t\t\t\t\t} );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t}, [ save, isSaving, createErrorNotice, createSuccessNotice, removeAllNotices ] );\r\n\r\n\t// Display the add record form.\r\n\treturn (\r\n\t\t<EditRecordForm\r\n\t\t\trecord={ editedRecord || {} }\r\n\t\t\tonChange={ edit }\r\n\t\t\tonSubmit={ onSaveRecord }\r\n\t\t\tsubmitText={ labels?.save_item || 'Save' }\r\n\t\t\tschema={ props }\r\n\t\t\textraSettings={ settings }\r\n\t\t\thidden={ hidden }\r\n\t\t\tignore={ newIgnore }\r\n\t\t\tloading={ isSaving }\r\n\t\t\tslotName={ `${ namespace }_${ collection }_record_overview_below` }\r\n\t\t/>\r\n\t);\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport React from \"react\";\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __ } from \"@wordpress/i18n\";\r\nimport {\r\n    Slot,\r\n    __experimentalHStack as HStack,\r\n    __experimentalVStack as VStack,\r\n} from \"@wordpress/components\";\r\nimport { CardBody } from \"@wordpress/components\";\r\n\r\n/**\r\n * HizzleWP dependencies\r\n */\r\nimport { useProvidedCollectionConfig, useProvidedRecordId } from '@hizzlewp/store';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { SectionWithErrorBoundary } from '../../create-record';\r\nimport { EditRecord } from \"./edit-record\";\r\nimport { Overview } from \"./overview\";\r\n\r\n/**\r\n * Allows the user to create new records.\r\n */\r\nexport const RecordOverview: React.FC = () => {\r\n\r\n    // Prepare the state.\r\n    // If we're here, we already have a record ID and the record is already loaded.\r\n    const recordId = useProvidedRecordId();\r\n    const { config: { namespace, collection } } = useProvidedCollectionConfig();\r\n\r\n    // Display the add record form.\r\n    return (\r\n        <CardBody>\r\n            <HStack alignment=\"flex-start\" justify=\"space-between\" wrap>\r\n                <SectionWithErrorBoundary>\r\n                    <EditRecord />\r\n                </SectionWithErrorBoundary>\r\n\r\n                <SectionWithErrorBoundary>\r\n                    <VStack spacing={ 5 }>\r\n                        <Slot name={ `${ namespace }_${ collection }_record_overview_upsell` } />\r\n                        <Overview namespace={ namespace } collection={ collection } id={ recordId } />\r\n                    </VStack>\r\n                </SectionWithErrorBoundary>\r\n            </HStack>\r\n        </CardBody>\r\n    );\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport React from \"react\";\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n    __experimentalGrid as Grid,\r\n} from \"@wordpress/components\";\r\nimport { __ } from \"@wordpress/i18n\";\r\n\r\n/**\r\n * HizzleWP dependencies\r\n */\r\nimport { useCollectionRecordTabContent } from '@hizzlewp/store';\r\n\r\n/**\r\n * Internal dependencies\r\n */\r\nimport { ActionButtons } from \"./action-buttons\";\r\nimport { Stats } from \"./stats\";\r\nimport { Card } from \"./card\";\r\n\r\n/**\r\n * Displays a record's overview.\r\n *\r\n */\r\nexport const Overview = ( { namespace, collection, id } ) => {\r\n\r\n    // Prepare the overview.\r\n    const overview = useCollectionRecordTabContent( namespace, collection, id, 'overview' );\r\n\r\n    // In case we don't have an overview yet, display a spinner.\r\n    if ( overview.isResolving ) {\r\n        return (\r\n            <>\r\n                <Grid columns={ 3 }>\r\n                    <div className=\"hizzlewp-overview-loading-placeholder__card\" />\r\n                    <div className=\"hizzlewp-overview-loading-placeholder__card\" />\r\n                    <div className=\"hizzlewp-overview-loading-placeholder__card\" />\r\n                </Grid>\r\n            </>\r\n        );\r\n    }\r\n\r\n    // Abort if we have an error.\r\n    if ( overview.error || !Array.isArray( overview.data ) || !overview.data.length ) {\r\n        return null;\r\n    }\r\n\r\n    // Display the overview.\r\n    return (\r\n        <>\r\n            { overview.data.map( ( data, index ) => {\r\n                switch ( data.type ) {\r\n                    case 'stat_cards':\r\n                        return <Stats key={ index } cards={ data.cards } />;\r\n                    case 'action_links':\r\n                        return <ActionButtons key={ index } links={ data.links } namespace={ namespace } collection={ collection } id={ id } />;\r\n                    case 'card':\r\n                        return <Card key={ index } { ...data } />;\r\n\r\n                    default:\r\n                        return null;\r\n                }\r\n            } ) }\r\n        </>\r\n    );\r\n}\r\n","/**\r\n * WordPress dependencies\r\n */\r\nimport {\r\n    Flex,\r\n    FlexItem,\r\n    __experimentalHStack as HStack,\r\n    __experimentalText as Text,\r\n} from \"@wordpress/components\";\r\nimport React from \"react\";\r\n\r\n/**\r\n * Displays a stat card\r\n *\r\n * @param {Object} props\r\n * @param {React.ReactNode} props.value - The value to display.\r\n * @param {React.ReactNode} props.label - The label to display.\r\n * @param {String} props.status - success, info, warning, error, light\r\n * @return {JSX.Element} The stat card.\r\n */\r\nexport const StatCard = ( { value, label, status = 'default' } ) => {\r\n\r\n    return (\r\n        <div className={ `hizzlewp-stat-card hizzlewp-stat-card__${ status || 'default' }` }>\r\n            <Flex direction=\"column\" justify=\"center\" style={ { minHeight: 100 } }>\r\n\r\n                <FlexItem>\r\n                    <Text size={ 48 } weight={ 600 } as=\"h2\">\r\n                        { value }\r\n                    </Text>\r\n                </FlexItem>\r\n\r\n                <FlexItem>\r\n                    <Text size={ 13 } weight={ 400 } as=\"h3\">\r\n                        { label }\r\n                    </Text>\r\n                </FlexItem>\r\n            </Flex>\r\n        </div>\r\n    );\r\n}\r\n\r\n/**\r\n * Displays stat cards.\r\n *\r\n * @param {Object} props\r\n * @param {Array} props.cards\r\n */\r\nexport const Stats = ( { cards } ) => (\r\n    <HStack spacing={ 2 } justify=\"flex-end\" wrap>\r\n        { cards.map( ( { title, value, status } ) => (\r\n            <FlexItem key={ title }>\r\n                <StatCard\r\n                    status={ status || 'info' }\r\n                    label={ title }\r\n                    value={ <span dangerouslySetInnerHTML={ { __html: value } } /> }\r\n                />\r\n            </FlexItem>\r\n        ) ) }\r\n    </HStack>\r\n);\r\n","/**\r\n * External dependencies\r\n */\r\nimport React, { useMemo } from \"react\";\r\nimport { Slot } from \"@wordpress/components\";\r\nimport { __ } from \"@wordpress/i18n\";\r\n\r\n/**\r\n * HizzleWP dependencies\r\n */\r\nimport { useRoute } from '@hizzlewp/history';\r\nimport { useProvidedCollectionConfig, useProvidedRecordId } from '@hizzlewp/store';\r\n\r\n/**\r\n * Local dependencies.\r\n */\r\nimport { RecordOverview } from \"../overview\";\r\nimport { Table } from \"./table\";\r\n\r\n/**\r\n * Displays a given inner tab.\r\n *\r\n */\r\nexport const TabContent = () => {\r\n\r\n    // Prepare the state.\r\n    const { config: { tabs, namespace, collection } } = useProvidedCollectionConfig();\r\n    const recordId = useProvidedRecordId();\r\n    const { params } = useRoute();\r\n    const currentTab = params?.get( 'tab' ) || 'overview';\r\n\r\n    const args = {\r\n        namespace,\r\n        collection,\r\n        recordId,\r\n        tabName: params?.get( 'tab' ) || 'overview',\r\n    };\r\n\r\n    const content = useMemo( () => {\r\n\r\n        if ( !tabs || Array.isArray( tabs ) || !tabs[ args.tabName ] ) {\r\n            return <RecordOverview />;\r\n        }\r\n\r\n        switch ( tabs[ args.tabName ].type ) {\r\n            case 'table':\r\n                return <Table tab={ tabs[ args.tabName ] } { ...args } />;\r\n            default:\r\n                return (\r\n                    <Slot\r\n                        name={ `${ namespace }-${ collection }-tab-${ args.tabName }` }\r\n                        fillProps={ { tab: tabs[ args.tabName ], ...args } }\r\n                    />\r\n                );\r\n        }\r\n    }, [ tabs, args.tabName, namespace, collection, recordId ] );\r\n\r\n    return (\r\n        <div id={ `tab__${ namespace }-${ collection }__${ currentTab }__content` } className=\"hizzlewp-tab__content\">\r\n            { content }\r\n        </div>\r\n    );\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport React, { useMemo } from \"react\";\r\n\r\n/**\r\n * WordPress dependencies\r\n */\r\nimport { __experimentalVStack as VStack, Icon, Button, Notice, CardBody } from \"@wordpress/components\";\r\nimport { sprintf } from \"@wordpress/i18n\";\r\n\r\n/**\r\n * HizzleWP dependencies\r\n */\r\nimport { useCollectionRecordTabContent } from '@hizzlewp/store';\r\nimport type { CollectionTab } from \"@hizzlewp/store\";\r\nimport type { TableProviderProps } from '@hizzlewp/records/build-types/components/table/context';\r\nimport { ErrorBoundary } from \"@hizzlewp/components\";\r\nimport { Records as RecordsTable } from '@hizzlewp/records';\r\nimport { updateQueryString } from \"@hizzlewp/history\";\r\n\r\n/**\r\n * Local dependencies\r\n */\r\nimport getEnumBadge from \"../../records-table/enum-colors\";\r\nimport { hasCollectionNavigationLink } from \"../../records-table/display-cell\";\r\n\r\nconst prepareSearchValue = ( row: Record<string, any>, header: CollectionTab[ 'headers' ][ number ] ) => {\r\n    const { is_list, item, args, is_boolean, label } = header;\r\n\r\n    const value = row[ header.name ];\r\n\r\n    if ( is_list ) {\r\n        if ( !Array.isArray( value ) || 0 === value.length ) {\r\n            return '';\r\n        }\r\n\r\n        return value.map( ( arrayValue ) => {\r\n            let value = arrayValue;\r\n\r\n            if ( item && args ) {\r\n                return sprintf( item, ...args.map( arg => arrayValue[ arg ] ) );\r\n            }\r\n\r\n            return value;\r\n        } ).join( ' ' );\r\n    }\r\n\r\n    if ( is_boolean ) {\r\n        return value ? label : '';\r\n    }\r\n\r\n    return value;\r\n}\r\n\r\n/**\r\n * Displays a single cell.\r\n *\r\n * @param {Object} props\r\n * @returns The cell.\r\n */\r\nconst DisplayCell = ( { row, header, headerKey }: { row: Record<string, any>, header: CollectionTab[ 'headers' ][ number ], headerKey: string } ) => {\r\n\r\n    const { is_list, item, args, is_primary, url, is_boolean, is_badge } = header;\r\n    const value = row[ headerKey ];\r\n\r\n    // If we're displaying a list of values, display a list.\r\n    // For example, in Noptin, we display a list of links that\r\n    // someone clicked on.\r\n    // In this case, item === %s - %s and args === [ 'link', 'date' ]\r\n    // So we'd display:\r\n    // <ul>\r\n    //     <li>example.com - 2021-01-01</li>\r\n    //     <li>example.com - 2021-01-02</li>\r\n    //     <li>example.com - 2021-01-03</li>\r\n    // </ul>\r\n\r\n    if ( is_list ) {\r\n\r\n        if ( !Array.isArray( value ) || 0 === value.length ) {\r\n            return '';\r\n        }\r\n\r\n        return (\r\n            <VStack as=\"ul\" spacing={ 4 } style={ { margin: 0 } }>\r\n                { value.map( ( arrayValue, index ) => {\r\n                    let value = arrayValue;\r\n\r\n                    if ( item && args ) {\r\n                        const replacements = args.map( arg => arrayValue[ arg ] );\r\n                        value = sprintf( item, ...replacements );\r\n                    }\r\n\r\n                    return <li key={ index } style={ { margin: 0 } } dangerouslySetInnerHTML={ { __html: value } } />\r\n                } ) }\r\n            </VStack>\r\n        );\r\n    }\r\n\r\n    // Primary column with a URL.\r\n    if ( is_primary && url ) {\r\n        const recordUrl = row[ url ];\r\n\r\n        if ( !recordUrl ) {\r\n            return (\r\n                <div className=\"hizzle-records__table-title-field\">\r\n                    { value }\r\n                </div>\r\n            );\r\n        }\r\n\r\n        const btnStyle = {\r\n            width: '100%',\r\n            alignItems: 'start',\r\n            textDecoration: 'none',\r\n        }\r\n\r\n        return (\r\n            <div className=\"hizzle-records__table-title-field\">\r\n                <Button variant=\"link\" style={ btnStyle } href={ recordUrl } target=\"_blank\">\r\n                    { value }\r\n                </Button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if ( is_boolean ) {\r\n        const theIcon = value ? 'yes' : 'no';\r\n        return <Icon icon={ theIcon } />;\r\n    }\r\n\r\n    if ( is_badge && value ) {\r\n        return (\r\n            <span className=\"hizzlewp-badge\" style={ getEnumBadge( value ) }>\r\n                { value }\r\n            </span>\r\n        )\r\n    }\r\n\r\n    if ( 'string' === typeof value && hasCollectionNavigationLink( value ) ) {\r\n        // replace all instances of data-navigate-collection with href=\"#\" data-navigate-collection in the value.\r\n        const theContent = value.replace( /data-navigate-collection/g, 'href=\"#\" data-navigate-collection' );\r\n        return (\r\n            <div\r\n                dangerouslySetInnerHTML={ { __html: theContent } }\r\n                onClick={ ( e ) => {\r\n                    const link = e?.target?.closest?.( 'a[data-navigate-collection]' );\r\n                    if ( link ) {\r\n                        e.preventDefault();\r\n                        e.stopPropagation();\r\n                        const newPath = link.getAttribute( 'data-navigate-collection' );\r\n                        updateQueryString( {}, newPath, {} );\r\n                    }\r\n                } }\r\n            />\r\n        );\r\n    }\r\n\r\n    return <div dangerouslySetInnerHTML={ { __html: value } } />;\r\n}\r\n\r\ntype TableProps = {\r\n    namespace: string;\r\n    collection: string;\r\n    recordId: string;\r\n    tabName: string;\r\n    tab: CollectionTab;\r\n}\r\n\r\n/**\r\n * Displays the table content.\r\n *\r\n * @param {Object} props\r\n * @returns The table content.\r\n */\r\nexport const Table = ( { namespace, collection, recordId, tabName, tab }: TableProps ) => {\r\n\r\n    // Prepare the data.\r\n    const data = useCollectionRecordTabContent( namespace, collection, recordId, tabName );\r\n\r\n    // Available columns.\r\n    const columns: TableProviderProps<Record<string, any>>[ 'columns' ] = useMemo( () => ( tab.headers.map( ( prop ) => ( {\r\n        accessorKey: prop.name,\r\n        accessorFn: ( row ) => prepareSearchValue( row, prop ),\r\n        header: prop.label,\r\n        enableSorting: false,\r\n        enableHiding: !prop.is_primary,\r\n        cell: ( { row } ) => (\r\n            <DisplayCell\r\n                row={ row.original }\r\n                header={ prop }\r\n                headerKey={ prop.name }\r\n            />\r\n        ),\r\n    } ) ) ), [ tab.headers ] );\r\n\r\n    if ( !data.isResolving && data.error ) {\r\n        return (\r\n            <CardBody>\r\n                <Notice status=\"error\" isDismissible={ false }>\r\n                    { data.error?.message }\r\n                </Notice>\r\n            </CardBody>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <ErrorBoundary>\r\n            <RecordsTable\r\n                key={ `${ namespace }-${ collection }-${ recordId }-${ tabName }` }\r\n                rowCount={ data.data?.length || 0 }\r\n                data={ data.data || [] }\r\n                columns={ columns }\r\n                emptyMessage={ tab.emptyMessage }\r\n                isLoading={ data.isResolving }\r\n                searchLabel=\"Search\"\r\n                enableRowSelection={ false }\r\n                enableSorting\r\n                enablePagination\r\n            />\r\n        </ErrorBoundary>\r\n    );\r\n}\r\n","/**\r\n * External dependencies\r\n */\r\nimport React, { useCallback } from \"react\";\r\nimport { Button, NavigableMenu, __experimentalHStack as HStack } from \"@wordpress/components\";\r\nimport { __ } from \"@wordpress/i18n\";\r\n\r\n/**\r\n * HizzleWP dependencies\r\n */\r\nimport { ErrorBoundary } from '@hizzlewp/components';\r\nimport { useRoute, updatePath } from '@hizzlewp/history';\r\nimport { useProvidedCollectionConfig, useProvidedRecordId } from '@hizzlewp/store';\r\n\r\n/**\r\n * Allows the user to view a single inner record.\r\n *\r\n */\r\nexport const Tabs = () => {\r\n\r\n    // Prepare the state.\r\n    const { config: { labels, tabs: schemaTabs, namespace, collection } } = useProvidedCollectionConfig();\r\n    const recordId = useProvidedRecordId();\r\n    const recordPath = `${ namespace }/${ collection }/${ recordId }`;\r\n    const { params } = useRoute();\r\n\r\n    // Prepare the tabs.\r\n    const tabs = [\r\n        {\r\n            title: labels?.edit_item || labels?.singular_name || 'Edit',\r\n            name: 'overview',\r\n        }\r\n    ]\r\n\r\n    // Add any additional tabs.\r\n    if ( schemaTabs && !Array.isArray( schemaTabs ) ) {\r\n        Object.entries( schemaTabs ).map( ( [ name, { title } ] ) => (\r\n            tabs.push( {\r\n                title,\r\n                name,\r\n            } )\r\n        ) );\r\n    }\r\n\r\n    // Fired when a tab is selected.\r\n    const onTabSelect = useCallback( ( tabIndex ) => {\r\n        const newTab = tabs[ tabIndex ]?.name || 'overview';\r\n        const newPath = 'overview' === newTab ? recordPath : `${ recordPath }/${ newTab }`;\r\n        updatePath( newPath );\r\n    }, [ recordPath ] );\r\n\r\n    const currentTab = params?.get( 'tab' ) || 'overview';\r\n\r\n    // Display the update record screen.\r\n    return (\r\n        <ErrorBoundary>\r\n            { tabs.length > 1 ? (\r\n                <HStack\r\n                    as={ NavigableMenu }\r\n                    orientation=\"horizontal\"\r\n                    className=\"hizzle-interface__header-menu\"\r\n                    expanded={ false }\r\n                    spacing={ 0 }\r\n                    alignment=\"stretch\"\r\n                    onNavigate={ onTabSelect }\r\n                    wrap\r\n                >\r\n                    { tabs.map( ( recordTab, index ) => (\r\n                        <Button\r\n                            key={ recordTab.name }\r\n                            isPressed={ recordTab.name === currentTab || ( !currentTab && 0 === index ) }\r\n                            onClick={ () => onTabSelect( index ) }\r\n                            __next40pxDefaultSize\r\n                        >\r\n                            { recordTab.title }\r\n                        </Button>\r\n                    ) ) }\r\n                </HStack>\r\n            ) : (\r\n                <>{ labels?.singular_name || 'Item' }</>\r\n            ) }\r\n        </ErrorBoundary >\r\n    );\r\n};\r\n","/**\r\n * External dependencies\r\n */\r\nimport React from \"react\";\r\nimport { Notice, Spinner, Fill } from \"@wordpress/components\";\r\nimport { __ } from \"@wordpress/i18n\";\r\n\r\n/**\r\n * HizzleWP dependencies\r\n */\r\nimport { ErrorBoundary } from '@hizzlewp/components';\r\nimport { Outlet } from '@hizzlewp/history';\r\nimport { useProvidedCollectionConfig, useCollectionRecord, useProvidedRecordId, getRawValue } from '@hizzlewp/store';\r\n\r\n/**\r\n * Local dependencies\r\n */\r\nimport { Tabs } from \"./tabs\";\r\nimport { ItemActions } from \"../records-table/item-actions\";\r\n\r\n\r\nconst RecordActions: React.FC<{ namespace: string, collection: string, recordId: string | number }> = ( { namespace, collection, recordId } ) => {\r\n    const { record } = useCollectionRecord( namespace, collection, recordId as number );\r\n\r\n    return (\r\n        <Fill name={ `/${ namespace }/${ collection }/actions` }>\r\n            <ItemActions\r\n                actions={ record?.hizzlewp_actions }\r\n                namespace={ namespace }\r\n                collection={ collection }\r\n                id={ getRawValue( record?.id ) }\r\n                isOverview\r\n            />\r\n        </Fill >\r\n    );\r\n}\r\n\r\n/**\r\n * Ensure that the record config is loaded before rendering the page.\r\n *\r\n */\r\nconst CheckRecord: React.FC<{ children: React.ReactNode, namespace: string, collection: string, recordId: string | number }> = ( { children, namespace, collection, recordId } ) => {\r\n    // Prepare the state.\r\n    // If we're here, we already have a record ID.\r\n    const { record, isResolving, hasResolved, error } = useCollectionRecord( namespace, collection, recordId as number );\r\n\r\n    // Show loading indicator if still resolving.\r\n    if ( isResolving || !hasResolved ) {\r\n        return <Spinner />;\r\n    }\r\n\r\n    // Show error if any.\r\n    if ( error || !record ) {\r\n        return (\r\n            <Notice status=\"error\" isDismissible={ false }>\r\n                { error?.message || 'An unknown error occurred.' }\r\n            </Notice>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <ErrorBoundary>\r\n            { children }\r\n        </ErrorBoundary>\r\n    );\r\n}\r\n\r\n/**\r\n * Allows the user to view a single record.\r\n *\r\n */\r\nexport const ViewRecord: React.FC = () => {\r\n\r\n    // Prepare the state.\r\n    const recordId = useProvidedRecordId();\r\n    const { config: { namespace, collection } } = useProvidedCollectionConfig();\r\n\r\n    if ( !recordId ) {\r\n        return (\r\n            <Notice status=\"error\" isDismissible={ false }>\r\n                No record ID found.\r\n            </Notice>\r\n        );\r\n    }\r\n\r\n    // Display the update record screen.\r\n    return (\r\n        <>\r\n            <Fill name={ `/${ namespace }/${ collection }/title` }>\r\n                <Tabs />\r\n            </Fill>\r\n            <CheckRecord namespace={ namespace } collection={ collection } recordId={ recordId }>\r\n                <RecordActions namespace={ namespace } collection={ collection } recordId={ recordId } />\r\n                <Outlet path=\"/:namespace/:collection/:recordId\" />\r\n            </CheckRecord>\r\n        </>\r\n    );\r\n}\r\n","import { Button, Tip } from \"@wordpress/components\";\r\n\r\n/**\r\n * Displays an upsell div.\r\n */\r\nexport const Upsell = ( { children } ) => {\r\n    return (\r\n        <div className=\"hizzlewp-upsell-card\">\r\n            { children }\r\n        </div>\r\n    );\r\n};\r\n\r\n/**\r\n * Displays an upsell card.\r\n *\r\n * @param {Object} props\r\n * @returns \r\n */\r\nexport const UpsellCard = ( { upsell } ) => {\r\n\r\n    if ( !upsell ) {\r\n        return null;\r\n    }\r\n\r\n    const { content, buttonURL, buttonText } = upsell;\r\n\r\n    return (\r\n        <Upsell>\r\n            <Tip>\r\n                { content }\r\n                <Button href={ buttonURL } target=\"_blank\" variant=\"link\">\r\n                    { buttonText }\r\n                </Button>\r\n            </Tip>\r\n        </Upsell>\r\n    );\r\n};\r\n","/**\r\n * External dependencies.\r\n */\r\nimport domReady from '@wordpress/dom-ready';\r\nimport React, { createRoot } from \"@wordpress/element\";\r\nimport { SlotFillProvider } from '@wordpress/components';\r\nimport { store as keyboardShortcutsStore } from '@wordpress/keyboard-shortcuts';\r\nimport { dispatch } from '@wordpress/data';\r\n\r\n/**\r\n * Internal dependencies.\r\n */\r\nimport Layout from './components/layout';\r\nimport './style.scss';\r\n\r\ndeclare global {\r\n\tinterface Window {\r\n\t\thizzleWPStore?: {\r\n\t\t\tdata: {\r\n\t\t\t\tcollection: string;\r\n\t\t\t\tnamespace: string;\r\n\t\t\t\t[ key: string ]: any;\r\n\t\t\t};\r\n\t\t};\r\n\t}\r\n}\r\n\r\nconst { collection, namespace, ...rest } = window.hizzleWPStore?.data || {};\r\n\r\ndomReady( () => {\r\n\r\n\tconst target = document.getElementById( 'hizzlewp-store-ui' );\r\n\r\n\t// Abort if the target element is not found.\r\n\tif ( !target || !collection || !namespace ) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tdispatch( keyboardShortcutsStore ).registerShortcut( {\r\n\t\tname: 'hizzlewp/save-record',\r\n\t\tcategory: 'hizzlewp',\r\n\t\tdescription: 'Save the current record',\r\n\t\tkeyCombination: {\r\n\t\t\tmodifier: 'primary',\r\n\t\t\tcharacter: 's',\r\n\t\t},\r\n\t} );\r\n\r\n\tconst App = () => (\r\n\t\t<SlotFillProvider>\r\n\t\t\t<Layout\r\n\t\t\t\tdefaultNamespace={ namespace }\r\n\t\t\t\tdefaultCollection={ collection }\r\n\t\t\t\t{ ...rest }\r\n\t\t\t/>\r\n\t\t</SlotFillProvider>\r\n\t);\r\n\r\n\tcreateRoot( target ).render( <App /> );\r\n} );\r\n","// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"hizzlewp\"][\"components\"];","module.exports = window[\"hizzlewp\"][\"history\"];","module.exports = window[\"hizzlewp\"][\"interface\"];","module.exports = window[\"hizzlewp\"][\"records\"];","module.exports = window[\"hizzlewp\"][\"store\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"compose\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"date\"];","module.exports = window[\"wp\"][\"domReady\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","module.exports = window[\"wp\"][\"keyboardShortcuts\"];","module.exports = window[\"wp\"][\"notices\"];","module.exports = window[\"wp\"][\"primitives\"];","module.exports = window[\"wp\"][\"url\"];","module.exports = window[\"React\"];","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"store-ui\": 0,\n\t\"./store-ui/style-index\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunkhizzlewp\"] = globalThis[\"webpackChunkhizzlewp\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"./store-ui/style-index\"], () => (__webpack_require__(\"./packages/store-ui/src/index.tsx\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["useDispatch","store","noticesStore","Button","useCopyToClipboard","jsx","_jsx","CopyAction","value","onClick","as","props","createInfoNotice","ref","type","Component","label","showTooltip","React","useState","Modal","trash","DeleteModal","Fragment","_Fragment","jsxs","_jsxs","DeleteAction","isModalOpen","setIsModalOpen","onClose","children","isDestructive","icon","title","text","onRequestClose","closeModal","useCallback","useSelect","Spinner","hizzleStore","RemoteAction","actionName","namespace","collection","id","doRemoteCollectionRecordAction","createSuccessNotice","createErrorNotice","isDoingRemoteAction","select","isDoingRemoteCollectionRecordAction","onDoAction","e","preventDefault","then","res","message","catch","error","isDismissible","mainContent","document","getElementById","parentElement","scrollTo","top","behavior","useMemo","ErrorBoundary","Router","Main","RecordsTable","CreateRecord","ViewRecord","RecordOverview","TabContent","Import","Collection","defaultNamespace","defaultCollection","routes","path","element","index","basePath","Tip","Animate","Slot","__experimentalVStack","VStack","useShortcut","Setting","prepareField","MaybeAnimate","loading","className","style","cursor","EditRecordForm","record","onChange","schema","hidden","ignore","onSubmit","slotName","submitText","extraSettings","fields","prepared","prepareEditableRecordFields","Object","entries","forEach","key","prop_pos","setting","name","find","field","push","findIndex","splice","spacing","pointerEvents","map","settingKey","saved","setAttributes","fills","Array","isArray","fill","variant","isBusy","readonly","is_dynamic","includes","filter","item","addQueryArgs","Interface","Header","usePath","getHistory","EditorNotices","EditorSnackbars","highlightAdminMenuItem","href","urlParams","URLSearchParams","split","page","get","setTimeout","adminMenuItems","querySelectorAll","menuItem","menuItemHref","getAttribute","el","classList","remove","parentLi","closest","add","topLevelParent","setAttribute","TheHeader","brand","menu","currentPath","updatePath","startsWith","undefined","hizzlewp_path","isPressed","Layout","theContent","padding","header","content","NoticeList","SnackbarList","notices","getNotices","removeNotice","dismissibleNotices","nonDismissibleNotices","onRemove","MAX_VISIBLE_NOTICES","snackbarNotices","slice","Fill","FlexItem","CardBody","__experimentalHStack","HStack","__experimentalHeading","Heading","__","useProvidedCollectionConfig","CreateRecordForm","config","defaultProps","labels","settings","saveCollectionRecord","setLoading","setRecord","newIgnore","keys","removeAllNotices","handleSubmit","throwOnError","finally","newProps","save_item","SectionWithErrorBoundary","width","maxWidth","alignment","justify","wrap","level","size","truncate","add_new_item","MapHeaders","Progress","ImportFile","file","back","mappedHeaders","setMappedHeaders","updateRecords","setUpdateRecords","onContinue","headers","update","window","SelectFile","setFile","import","onUpload","Papa","useEffect","Notice","TextControl","ToggleControl","SelectControl","useOptions","normalizeString","string","replace","toLowerCase","MapHeader","options","fieldOptions","fieldLabel","setValue","customValue","setCustomValue","preparedOptions","__next40pxDefaultSize","__nextHasNoMarginBottom","length","disabled","placeholder","fileHeaders","setFileHeaders","setError","parse","skipEmptyLines","preview","complete","results","meta","guessedHeaders","normalizedHeader","partialMatch","match","normalizedKey","normalizedLabel","mapped","is_boolean","selectValues","values","status","enum","newValue","checked","sprintf","ProgressBar","hizzlewpStore","AnimatedNumber","StatCard","useImportReducer","MIN_CHUNK_SIZE","MAX_CHUNK_SIZE","IDEAL_DURATION","calculateChunkSize","lastDurationInMilliseconds","lastChunkSize","ratePerMillisecond","Math","min","max","floor","parseCSV","onComplete","onError","useParseRecord","parsed","paused","done","lastDuration","total","processed","stats","previousStats","chunks","dispatch","doBatchCollectionAction","setErrors","errors","context","parseRecord","startTime","Date","getTime","newChunks","chunk","shift","result","chunkStats","is_error","failed","data","diff","ceil","newChunkSize","recalculatedChunks","oldChunks","flat","i","records","batchSize","to","duration","created","from","updated","skipped","view_items","useReducer","importReducer","state","payload","FormFileUpload","Icon","__experimentalText","Text","weight","accept","event","currentTarget","files","target","NavigableMenu","Card","arrowLeft","rotateRight","Outlet","useRoute","CollectionProvider","UpsellCard","usePreparedQuery","RefreshRecords","query","invalidateResolution","onRefresh","actions","route","extra","goToCollectionIndex","expanded","orientation","action","isRounded","dangerouslySetInnerHTML","__html","upsell","CheckConfig","isResolving","hasResolved","params","recordId","Number","Flex","dateI18n","getSettings","getQueryArg","getRawValue","updateQueryString","getEnumBadge","Badge","rest","isObject","obj","constructor","normalizeAvatarColors","avatarUrl","fallbackText","isGrid","s","fallback","color","indexOf","d","substring","backgroundColor","hasCollectionNavigationLink","htmlString","parser","DOMParser","doc","parseFromString","querySelector","PrimaryColumn","rawValue","viewType","handleClick","isHtml","avatar_url","theValue","clickableProps","role","tabIndex","stopPropagation","onKeyDown","src","alt","BadgeList","enums","isOpen","setIsOpen","toShow","showToggle","gap","val","DisplayCell","row","isBadge","rendered","js_props","link","newPath","is_primary","is_date","formats","date","datetime","is_tokens","is_numeric","is_float","JSON","stringify","stringToColor","str","saturation","lightness","isLight","_x","useQuery","SavedFiltersDropdown","flatFiltersToColumnFilters","filters","columnFilters","suffixMatch","fieldName","suffix","columnFiltersToFlatFilters","flatFilters","EditForm","onApplyFilters","mainSetting","default","canSelectPlaceholder","secondarySetting","description","marginBottom","TheModal","currentFilters","setOpen","setFilters","hizzlewp_filters","paged","atts","useFilterableFields","isBulkEditing","isInputToChange","customAttributes","conditions","suggestions","multiple","is_textarea","useFilters","filtersString","preparedFilters","parsedFilters","filteredFilters","some","FiltersButton","numFilters","buttonText","useProvidedCollection","BulkDelete","isAllSelected","recordsCount","deleting","setDeleting","bulkDeleteCollectionRecords","onDeleteRecords","warningText","editableFields","onSave","changes","preparedSetting","toRemoveSetting","BulkEdit","saving","setSaving","setSaved","setChanges","hasChanges","bulkUpdateCollectionRecords","onSaveRecords","saveAs","useCollectionRecords","Download","exportArgs","__fields","join","per_page","columns","knownFields","reduce","acc","table_label","column","csv","unparse","escapeFormulae","backButton","marginLeft","filename","now","Blob","ExportModal","ExportButton","modalTitle","SelectFields","setFields","Boolean","step","setStep","next","direction","useBulkActionArgs","selected","getSelectedCollectionRecords","getIsAllCollectionRecordsSelected","matchingRecordsCount","getCollectionRecordsTotalItems","toIgnore","filteredQuery","fromEntries","include","ActionItem","args","Records","PER_PAGE_OPTIONS","usePreferences","ItemActions","SavedFiltersManager","preferences","preparedQuery","orderby","sorting","order","desc","pagination","pageSize","badges","setPreferences","viewPreferences","primaryColumn","prop","table","accessorKey","enableSorting","is_meta","enableColumnFilter","enableHiding","cell","original","enablePinning","hizzlewp_actions","columnVisibility","hiddenColumns","hiddenFields","querySort","queryOrder","isShowingAll","columnPinning","left","right","totalItems","pageIndex","rowSelection","globalFilter","search","setSelectedCollectionRecords","isLoading","rowCount","enablePagination","enableRowSelection","onRowSelectionChange","onColumnPinningChange","onGlobalFilterChange","onColumnFiltersChange","getRowId","searchLabel","search_items","bulkActions","filtersButton","DropdownMenu","MenuItem","moreVertical","EMPTY_ACTIONS","isOverview","primaryActions","preparedActions","unshift","isPrimary","flexShrink","CompactItemAction","CompactItemActions","buttonProps","iconSize","toggleProps","popoverProps","placement","actionProps","RenderAction","extraProps","ActionAs","RenderComponent","__experimentalInputControl","InputControl","getQueryArgs","useSavedFilters","savedFilters","saveFilter","prepareQueryString","trim","deleteFilter","useAvailableFilters","defaultFilters","preparedDefaultFilters","allFilters","getQueryName","hasNamedFilter","SaveFilterModal","filterName","setFilterName","handleSave","savedName","confirm","handleClose","isQuerySaved","isDefaultQuery","isSaveModalOpen","setIsSaveModalOpen","newQuery","hideLabelFromVision","queryArgs","orderedQueryArgs","sort","CopyButton","deleteCollectionRecord","isDeleting","deletingError","isDeletingCollectionRecord","getLastCollectionDeleteError","onDeleteRecord","DeleteLink","RemoteActionLink","ActionButtons","links","hide","WPCard","RawHTML","buttonLink","useCollectionRecord","useProvidedRecordId","EditRecord","editedRecord","edit","save","isSaving","onSaveRecord","Overview","__experimentalGrid","Grid","useCollectionRecordTabContent","Stats","overview","cards","minHeight","Table","tabs","currentTab","tabName","tab","fillProps","prepareSearchValue","is_list","arrayValue","arg","headerKey","url","is_badge","margin","replacements","recordUrl","btnStyle","alignItems","textDecoration","theIcon","accessorFn","emptyMessage","Tabs","schemaTabs","recordPath","edit_item","singular_name","onTabSelect","newTab","onNavigate","recordTab","RecordActions","CheckRecord","Upsell","buttonURL","domReady","createRoot","SlotFillProvider","keyboardShortcutsStore","hizzleWPStore","registerShortcut","category","keyCombination","modifier","character","App","render"],"sourceRoot":""}